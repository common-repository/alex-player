/* Alex Player v1.37, Author: Alex Zhyrytovskyi, 2019-2024. URL: https://alex.player.x10.name/ */
!function(globals,$){var engineVersion="1.37",ui,uiQuery,e,eventNameOverrides,easingFunctions,extras,hg,xg,Wg,Xg,Lh,Mh,Nh,jj,hj,ij,tj,Ik,Jk,Kk,Lk,Uk,ln,mn,rn,sn,tn,nn,on,pn,qn,no,oo,po,qo,usagesSent,dspProcessors,instanceMgr,RC,SC,mediaEngineInstanceCounter,fullScreenVisualisationRunned,lm,pQ,vQ,wQ,xQ,yQ,zQ,C4;function uiKit(e){return new _uiKit(e)}function _uiKit(e){return this.uiQuery(e)}function createNodeFromHTML(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}function prependChild(e,t){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function insertBefore(e,t){t.parentNode.insertBefore(e,t)}function insertAfter(e,t){t.parentNode.insertBefore(e,t.nextSibling)}function ig(){for(var e=[],t=0;t<hg.length;t++){var n=hg[t],i=n.node;i&&i.parentNode&&(n.handler(),e.push(n))}hg=e}function yg(){for(var e=[],t=0;t<xg.length;t++){var n=xg[t],i=n.node;i&&i.parentNode&&(n.handler(),e.push(n))}xg=e}function _g(e){for(var t=$?$(e)[0]:e,n=[],i=0;i<Wg.length;i++){var a=Wg[i];a.node!=t&&n.push(a)}Wg=n}function ah(e){e=e.callback;ui.isFunction(e)&&e()}function ch(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(e.is(i)||e.closest(i).length)return 1}}function eh(e,t){var n=$(e);if(e.parentNode&&e.ownerDocument){for(var i=[],a=Wg.length,r=0;r<a;r++){var o=Wg[r];o.closeOnClick==t?function(e,t,n){for(var i=t+1;i<Wg.length;i++){var a=Wg[i];if(n.is(a.node)||n.closest(a.node).length)return 1;if(ch(n,e.uiExclude))return 1}}(o,r,n)||ch(n,o.uiExclude)?i.push(o):ah(o):i.push(o)}Wg=i}}function Nk(){document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||(ui.isFunction(Lk)&&Lk(),Lk=Kk=null)}function Vk(){var e=Object.create(Wk.prototype);return Wk.apply(e,arguments)}function Wk(e,t,n,i){switch(arguments.length){case 1:this.setWebColor(e);break;case 3:this.setRGB(e,t,n);break;case 4:this.setRGBA(e,t,n,i)}return this}function Xk(e){return 255<(e=ui.toInt(e))?255:e<0?0:e}function Yk(e,t){return("00000000"+parseInt(e).toString(16)).slice(-t)}function Zk(e,t,n,i){return(e*(i-n)+t*n)/i}function vn(){0==nn&&0==on&&0==pn&&mn.remove()}function uo(y,e){t=(t=y).length?t.data("UIErrorTooltip"):qo;if(t)t.updateMessageHTML(e);else{var M=!0,S="",x=$('<div class="ui-error-tooltip ui-stuff">\t<div class="ui-error-tooltip-background">\t\t<div class="ui-error-tooltip-helper">\t\t\t<div class="ui-error-tooltip-helper-bg"></div>\t\t\t<div class="ui-error-tooltip-helper-fg"></div>\t\t</div>\t</div>\t<div class="ui-error-tooltip-text"></div></div>');$(document.body).append(x);var k=x.find(".ui-error-tooltip-helper");f(e);for(var t=y.length?no.skinAsPopup+" "+ui.toString(y.attr("data-error-skin")):no.skinAsWindow,n=ui.toString(t).split(" "),A="",R="",a="",r=0,o=0,i="",s="",l=0;l<n.length;l++){var u=n[l];"style-"==u.substr(0,6)?i=u:"theme-"==u.substr(0,6)?s=u:"to-"==u.substr(0,3)?A=u.substr(3):"align-"==u.substr(0,6)?R=u.substr(6):"animation-"==u.substr(0,10)&&(u=u.match(/^animation-(none|slide|islide|fade)(?:-(\d+))?(?:-(\d+))?$/),a=ui.toString(u[1]),r=ui.toInt(u[2])||r,o=void 0===u[3]?r:ui.toInt(u[3]))}x.addClass("ui-error-tooltip-skin-"+i),x.addClass("ui-error-tooltip-skin-"+s),setTimeout(function(){d(),p(!1,function(){M=!1,d()})},10);var c=ui.registerScrollEvent(y);ui.addResizeHandler(x,d),ui.addScrollHandler(x,d);e=y.length?[y]:[];ui.addPopup(x,e,function(){var e;M=!0,d(),p(!0,function(){x.remove(),x=null}),c.unregister(),ui.removeResizeHandler(x),ui.removeScrollHandler(x),(e=y).length?e.removeData("UIErrorTooltip"):qo=null}),t={updateMessageHTML:function(e){f(e),M||d()}},(e=y).length?e.data("UIErrorTooltip",t):qo=t}function f(e){x.find(".ui-error-tooltip-text").html(e)}function d(){(y.length?function(){x.css({display:"",position:"fixed",left:"",top:"",visibility:"hidden",width:"","max-width":""}),k.css({left:"","margin-left":"","margin-top":""}),x.outerWidth(x.outerWidth()+1),ui.removeClassByPattern(x,"ui-error-tooltip-to-*"),ui.removeClassByPattern(x,"ui-error-tooltip-align-*"),S=A;var e=oo.scrollLeft(),t=oo.scrollTop(),n=oo.innerWidth(),i=oo.innerHeight(),a=y.offset(),r=a.left-e,o=a.top-t,s=y.outerWidth(),l=y.outerHeight(),u=x.outerWidth(),c=x.outerHeight(),f=k.outerHeight();if(r+s<0||o+l<0||n<=r||n<=r||i<=o)return x.hide();var d,h=0,p=0,_=[],v={};b(),m()||(r<po&&(s+=r-po,r=po),o<po&&(l+=o-po,o=po),n-po<=r+s&&(s=n-r-po-1),i-po<=o+l&&(l=i-o-po-1),b(),m()||function(){x.css("max-width",n-2*po+"px");var e=x.outerHeight();e<o-f?(S="top",h=po,p=o-f-e,_=["ui-error-tooltip-to-top","ui-error-tooltip-align-right"],k.css("left",r+s/2-f-po+"px")):o+e<=i-po?(S="bottom",h=po,p=o+l+f,_=["ui-error-tooltip-to-bottom","ui-error-tooltip-align-right"],k.css("left",r+s/2-f-po+"px")):(S="",h=po,p=16,_=[],v={})}()),M?d="fixed":(d="absolute",h+=e,p+=t),x.css({position:d,left:h+"px",top:p+"px",visibility:"visible"});for(var g=0;g<_.length;g++)x.addClass(_[g]);function m(){return po<=h&&po<=p&&h+u<n-po&&p+c<i-po}function b(){"bottom"==A?w("left"==R?["bottom-left","bottom-right","top-left","top-right","left","right"]:"center"==R?["bottom-center","bottom-right","bottom-left","top-right","top-left","right","left"]:["bottom-right","bottom-left","top-right","top-left","right","left"]):"top"==A?w("left"==R?["top-left","top-right","bottom-left","bottom-right","left","right"]:"center"==R?["top-center","top-right","top-left","bottom-right","bottom-left","right","left"]:["top-right","top-left","bottom-right","bottom-left","right","left"]):"right"==A?w(["right","left","bottom-right","bottom-left","top-right","top-left"]):"left"==A&&w(["left","right","bottom-left","bottom-right","top-left","top-right"])}function w(e){for(var t=0;t<e.length;t++){switch(e[t]){case"bottom-right":S="bottom",h=r,p=o+l+f,_=["ui-error-tooltip-to-bottom","ui-error-tooltip-align-right"],v={};break;case"bottom-center":S="bottom",h=r+(s-u)/2,p=o+l+f,_=["ui-error-tooltip-to-bottom","ui-error-tooltip-align-center"],v={centerX:1};break;case"bottom-left":S="bottom",h=r+s-u,p=o+l+f,_=["ui-error-tooltip-to-bottom","ui-error-tooltip-align-left"],v={};break;case"top-right":S="top",h=r,p=o-f-c,_=["ui-error-tooltip-to-top","ui-error-tooltip-align-right"],v={};break;case"top-center":S="top",h=r+(s-u)/2,p=o-f-c,_=["ui-error-tooltip-to-top","ui-error-tooltip-align-center"],v={centerX:1};break;case"top-left":S="top",h=r+s-u,p=o-f-c,_=["ui-error-tooltip-to-top","ui-error-tooltip-align-left"],v={};break;case"left":S="left",h=r-f-u,p=o+(l-c)/2,_=["ui-error-tooltip-to-left"],v={centerY:1};break;case"right":S="right",h=r+s+f,p=o+(l-c)/2,_=["ui-error-tooltip-to-right"],v={centerY:1}}if(m())break}}v.centerX&&k.css("margin-left",-k.outerWidth()/2+"px"),v.centerY&&k.css("margin-top",-k.outerHeight()/2+"px"),ui.isVisible(y)||x.hide()}:function(){x.css({display:"",position:"fixed",left:"",top:"",visibility:"hidden",width:"","max-width":"600px"});var e,t,n=no.relX,i=no.relY,a=x.outerWidth(),r=x.outerHeight(),o=oo.innerWidth(),s=oo.innerHeight();e=0<n?n:n<0?o-a+n:(o-a)/2,t=0<i?i:i<0?s-r+i:(s-r)/2,n=Math.abs(n)||po,(e<n||o<=a+2*n)&&(e=po,x.outerWidth(o-2*po)),r=x.outerHeight(),0==i?t=(s-r)/2:s<=t+r+n&&(t=s-n-r),x.css({position:"fixed",visibility:"visible",left:e+"px",top:t+"px"})})()}function h(e,t,n,i){n?(x.css(t),x.animate(e,o,"linear",i)):(x.css(e),x.animate(t,r,"linear",i))}function p(e,t){if(x.toggleClass("ui-error-tooltip-opened",!e),"none"!=a){if("slide"==a){var n="left"==A?10:"right"==A?-10:0,i=0;return"bottom"!=A&&0!=y.length||(i=-10),"top"==A&&(i=10),void h({opacity:0,"margin-left":n+"px","margin-top":i+"px"},{opacity:1,"margin-left":0,"margin-top":0},e,t)}if("islide"==a){n="left"==S?-10:"right"==S?10:0,i=0;return"bottom"!=S&&0!=y.length||(i=10),"top"==S&&(i=-10),void h({opacity:0,"margin-left":n+"px","margin-top":i+"px"},{opacity:1,"margin-left":0,"margin-top":0},e,t)}"fade"!=a?ui.isFunction(t)&&t():h({opacity:0},{opacity:1},e,t)}else ui.isFunction(t)&&t()}}function vo(e,t){var n=$(e);n.length&&(n.addClass("ui-with-error"),ui.scrollToElement(n,8,8),((i=$(i=n)).is("input[type=text], input[type=password], input:not([type]), textarea")&&i.filter(":visible").length||0<(i=i.find("input[type=text], input[type=password], input:not([type]), textarea").filter(":visible")).length)&&i.focus());var i=0==$("body > .ui-error-tooltip-opened").length;""!=t&&i&&uo(n,t),n.length&&ui.addPopup(n,[".ui-error-tooltip"],function(){n.removeClass("ui-with-error")})}function sendUsages(){var e;usagesSent||((e=new XMLHttpRequest).open("GET","//media-engine.x10.name/usage-statistics/?url="+encodeURIComponent(location.href)+"&host="+encodeURIComponent(location.hostname)+"&version="+engineVersion),e.send(),usagesSent=!0)}function MediaEvents(){var r=[],i={};function a(e,t){(t=ui.toObject(t)).name=e;for(var n=0;n<r.length;n++){var i=r[n][e];if(i)for(var a=0;a<i.length;a++)i[a](t)}}return{bindEvent:function(e,t,n){ui.isFunction(n)&&((e=$(e)[0])._mediaEvents=ui.toObject(e._mediaEvents),e._mediaEvents[t]=ui.toArray(e._mediaEvents[t]),ui.arrayHas(e._mediaEvents[t],n)||e._mediaEvents[t].push(n),ui.arrayHas(r,e._mediaEvents)||r.push(e._mediaEvents))},unbindEvent:function(e,t,n){e=$(e)[0],ui.isArray(e._mediaEvents[t])&&ui.arrayRemove(e._mediaEvents[t],n)},unbindEvents:function(e){delete $(e)[0]._mediaEvents},triggerEvent:function(e,t){var n;"number"==typeof t?i.hasOwnProperty(e)||((n={}).timer=setTimeout(function(){delete i[e],a(e)},t),i[e]=n):a(e,t)},destroy:function(){ui.destroy(r),ui.destroy(i)}}}function getEQFreqStr(e){if((e=ui.toInt(e))<0||9<e)return"";e=globals.dspEQFreqs[e];return e<1e3?ui.toString(e):ui.toString(Math.floor(e/1e3))+"k"}function dspEqualizer(n){var i,a,t=1,r=new Float64Array(10),o={},s=new Float64Array(10),l=new Float64Array(10),u=new Float64Array(10),c=new Float64Array(10),f=new Float64Array(10),d=new Float64Array(10),h=[],p=[],_=[],v=[],g=null;function m(){for(var e=0;e<10;e++){var t=globals.dspEQFreqs[e];i<=2*t&&(t=0);t=2*Math.PI*t/i;s[e]=2*Math.sin(t)/12,c[e]=-2*Math.cos(t)}!function(){for(var e=0;e<10;e++){var t=Math.pow(10,r[e]/40);f[e]=1+s[e]*t,d[e]=1-s[e]*t,l[e]=1/(1+s[e]/t),u[e]=1-s[e]/t}}()}function b(e){t=Math.pow(10,e/40),g&&g.port.postMessage({action:"setPreAmp",preAmp:t}),n&&n.triggerEvent("onPreampChanged",10)}function w(e,t){(e=ui.toInt(e))<0||9<e||(r[e]=ui.ensureRange(ui.toFloat(t),-20,20),a=!0,g&&g.port.postMessage({action:"setEQBand",number:e,value:r[e]}),n&&n.triggerEvent("onEQBandChanged",10))}return{flush:function(e){i=e.sampleRate,a=!0,dsp_equalizer_flush(e.numberOfChannels,h,p,_,v,o),(g=e.processorNode)&&(g.port.postMessage({action:"setPreAmp",preAmp:t}),g.port.postMessage({action:"setEQBand",number:0,value:r[0]}),g.port.postMessage({action:"setEQBand",number:1,value:r[1]}),g.port.postMessage({action:"setEQBand",number:2,value:r[2]}),g.port.postMessage({action:"setEQBand",number:3,value:r[3]}),g.port.postMessage({action:"setEQBand",number:4,value:r[4]}),g.port.postMessage({action:"setEQBand",number:5,value:r[5]}),g.port.postMessage({action:"setEQBand",number:6,value:r[6]}),g.port.postMessage({action:"setEQBand",number:7,value:r[7]}),g.port.postMessage({action:"setEQBand",number:8,value:r[8]}),g.port.postMessage({action:"setEQBand",number:9,value:r[9]}))},process:function(e){a&&(m(),a=!1),dsp_equalizer_process(e.data,e.length,e.numberOfChannels,i,t,l,u,c,f,d,h,p,_,v,e.allowOverflow,o)},copyParams:function(e){b(e.getPreamp());for(var t=0;t<10;t++)w(t,e.getEQBand(t))},getPreamp:function(){return 40*ui.log10(t)},setPreamp:b,getEQBand:function(e){return(e=ui.toInt(e))<0||9<e?0:r[e]},setEQBand:w}}function dspSound3D(t){var n=0,i=0,a=null;function r(e){(e=ui.ensureRange(ui.toFloat(e),0,1))!=i&&(n=3*(i=e),a&&a.port.postMessage({action:"setSound3D",value:i,k:n}),t&&t.triggerEvent("onSound3DChanged",10))}return{flush:function(e){(a=e.processorNode)&&a.port.postMessage({action:"setSound3D",value:i,k:n})},process:function(e){dsp_sound3d_process(e.data,e.length,e.numberOfChannels,n,i)},copyParams:function(e){r(e.getValue())},getValue:function(){return i},setValue:r}}function dspLowpass(t){var n=[],i=1,a=1,r=null;function o(e){(e=ui.ensureRange(ui.toFloat(e),1e-4,1))!=a&&(a=e,i=Math.pow(2,5*(a-1)),r&&r.port.postMessage({action:"setLowpass",value:a,f:i}),t&&t.triggerEvent("onLowpassChanged",10))}return{flush:function(e){dsp_lowpass_flush(n,e.numberOfChannels),(r=e.processorNode)&&r.port.postMessage({action:"setLowpass",value:a,f:i})},process:function(e){dsp_lowpass_process(e.data,e.length,e.numberOfChannels,n,i,a)},copyParams:function(e){o(e.getValue())},getValue:function(){return a},setValue:o}}function dspHighpass(t){var n=[],i=0,a=0,r=null;function o(e){(e=ui.ensureRange(ui.toFloat(e),0,1))!=a&&(a=e,i=Math.pow(2,10*(.8*a-1)),r&&r.port.postMessage({action:"setHighpass",value:a,f:i}),t&&t.triggerEvent("onHighpassChanged",10))}return{flush:function(e){dsp_highpass_flush(n,e.numberOfChannels),(r=e.processorNode)&&r.port.postMessage({action:"setHighpass",value:a,f:i})},process:function(e){dsp_highpass_process(e.data,e.length,e.numberOfChannels,n,i,a)},copyParams:function(e){o(e.getValue())},getValue:function(){return a},setValue:o}}function dspBalance(t){var n=0,i=null;function a(e){(e=ui.ensureRange(e,-1,1))!=n&&(n=e,i&&i.port.postMessage({action:"setBalance",value:n}),t&&t.triggerEvent("onBalanceChanged",10))}return{flush:function(e){(i=e.processorNode)&&i.port.postMessage({action:"setBalance",value:n})},process:function(e){dsp_balance_process(e.data,e.length,e.numberOfChannels,n)},copyParams:function(e){a(e.getValue())},getValue:function(){return n},setValue:a}}function DSPFilter(t){var n=dspSound3D(t),i=dspLowpass(t),a=dspHighpass(t),r=dspEqualizer(t),o=dspBalance(t),s="";function l(e){var t=e.processorNode;t&&t.port.postMessage({action:"flush",sampleRate:e.sampleRate}),n.flush(e),i.flush(e),a.flush(e),r.flush(e),o.flush(e)}function u(e){n.process(e),i.process(e),a.process(e),r.process(e),o.process(e)}function c(e){n.copyParams(e.sound3d),i.copyParams(e.lowpass),a.copyParams(e.highpass),r.copyParams(e.equalizer),o.copyParams(e.balance)}return{sound3d:n,lowpass:i,highpass:a,equalizer:r,balance:o,flush:l,process:u,copyParams:c,previewDSP:function(e,t,n,i,a){i&&c(i),l({numberOfChannels:1,sampleRate:n}),u({numberOfChannels:1,sampleRate:n,length:e.length,data:[e],allowOverflow:a}),u({numberOfChannels:1,sampleRate:n,length:t.length,data:[t],allowOverflow:a})},getCookieName:function(){return s},setCookieName:function(e){s=e,(e=ui.toArray(ui.toString(ui.getCookie(s)).split(","))).length<15||(t.dsp.equalizer.setPreamp(ui.toFloat(e[0])),t.dsp.equalizer.setEQBand(0,ui.toFloat(e[1])),t.dsp.equalizer.setEQBand(1,ui.toFloat(e[2])),t.dsp.equalizer.setEQBand(2,ui.toFloat(e[3])),t.dsp.equalizer.setEQBand(3,ui.toFloat(e[4])),t.dsp.equalizer.setEQBand(4,ui.toFloat(e[5])),t.dsp.equalizer.setEQBand(5,ui.toFloat(e[6])),t.dsp.equalizer.setEQBand(6,ui.toFloat(e[7])),t.dsp.equalizer.setEQBand(7,ui.toFloat(e[8])),t.dsp.equalizer.setEQBand(8,ui.toFloat(e[9])),t.dsp.equalizer.setEQBand(9,ui.toFloat(e[10])),t.dsp.balance.setValue(ui.toFloat(e[11])),t.dsp.lowpass.setValue(ui.toFloat(e[12])),t.dsp.highpass.setValue(ui.toFloat(e[13])),t.dsp.sound3d.setValue(ui.toFloat(e[14])))}}}function getDSPFilterCode(){return dspProcessors+' function copyBuffer(a,b,c,d){for(var e=0;e<d;e++)for(var f=0;f<c;f++)b[e][f]=a[e][f]}function dspSound3D(){function a(a,d,e){dsp_sound3d_process(a,d,e,b,c)}var b=0,c=0;return{flush:function(){},process:a,handleMessage:function(a){c=a.value,b=a.k}}}function dspLowpass(){function a(a,f,g){b&&(dsp_lowpass_flush(c,g),b=!1),dsp_lowpass_process(a,f,g,c,d,e)}var b=!0,c=[],d=1,e=1;return{flush:function(){b=!0},process:a,handleMessage:function(a){e=a.value,d=a.f}}}function dspHighpass(){function a(a,f,g){b&&(dsp_highpass_flush(c,g),b=!1),dsp_highpass_process(a,f,g,c,d,e)}var b=!0,c=[],d=1,e=1;return{flush:function(){b=!0},process:a,handleMessage:function(a){e=a.value,d=a.f}}}function dspEqualizer(){function a(){for(var a,c=0;10>c;c++){a=r[c],2*a>=d&&(a=0);var e=2*Math.PI*a/d;g[c]=2*Math.sin(e)/12,k[c]=-2*Math.cos(e)}b()}function b(){for(var a,b=0;10>b;b++)a=Math.pow(10,f[b]/40),l[b]=1+g[b]*a,m[b]=1-g[b]*a,h[b]=1/(1+g[b]/a),j[b]=1-g[b]/a}function c(b,c,f){q&&(dsp_equalizer_flush(f,i,n,o,p,t),q=!1),s&&(a(),s=!1),dsp_equalizer_process(b,c,f,d,e,h,j,k,l,m,i,n,o,p,!1,t)}var d,e=1,f=new Float64Array(10),g=new Float64Array(10),h=new Float64Array(10),j=new Float64Array(10),k=new Float64Array(10),l=new Float64Array(10),m=new Float64Array(10),i=[],n=[],o=[],p=[],q=!0,r=[70,180,320,600,1e3,3e3,6e3,12e3,14e3,16e3],s=!0,t={};return{flush:function(a){d=a,q=!0,s=!0},process:c,setEQBand:function(a){var b=a.number;f[b]=a.value,s=!0},setPreAmp:function(a){e=a.preAmp}}}function dspBalance(){function a(a,c,d){dsp_balance_process(a,c,d,b)}var b=0;return{process:a,handleMessage:function(a){b=a.value}}}class CustomProcessor extends AudioWorkletProcessor{constructor(){super(),CustomProcessor.sound3d=dspSound3D(),CustomProcessor.lowpass=dspLowpass(),CustomProcessor.highpass=dspHighpass(),CustomProcessor.equalizer=dspEqualizer(),CustomProcessor.balance=dspBalance(),CustomProcessor.sampleRate=0,this.port.onmessage=function(a){var b=a.data;switch(b.action){case"flush":CustomProcessor.sampleRate=b.sampleRate,CustomProcessor.lowpass.flush(),CustomProcessor.highpass.flush(),CustomProcessor.equalizer.flush(CustomProcessor.sampleRate);break;case"setSound3D":CustomProcessor.sound3d.handleMessage(b);break;case"setLowpass":CustomProcessor.lowpass.handleMessage(b);break;case"setHighpass":CustomProcessor.highpass.handleMessage(b);break;case"setEQBand":CustomProcessor.equalizer.setEQBand(b);break;case"setPreAmp":CustomProcessor.equalizer.setPreAmp(b);break;case"setBalance":CustomProcessor.balance.handleMessage(b);}}}process(a,b){if(a&&a[0]&&a[0][0]){var c=b[0],d=a[0][0].length,e=a[0].length;return copyBuffer(a[0],c,d,e),CustomProcessor.sound3d.process(c,d,e),CustomProcessor.lowpass.process(c,d,e),CustomProcessor.highpass.process(c,d,e),CustomProcessor.equalizer.process(c,d,e),CustomProcessor.balance.process(c,d,e),!0}}}registerProcessor("DSPFilter",CustomProcessor);'}function dspFFT(e,t,n){var i,a,r,o,s,l,u,c,f,d,h,p,_,v,g;n=ui.toBoolean(n);var m=e.length;if((m&-m)==m){for(a=r=0,i=m-1;a<i;a++){for(a<r&&(f=e[a],d=t[a],e[a]=e[r],t[a]=t[r],e[r]=f,t[r]=d),o=Math.floor(m/2);o<=r;)r-=o,o=Math.floor(o/2);r+=o}for(u=-1,l=1,s=c=0,i=Math.floor(ui.log2(m));s<i;s++){for(_=1,r=v=0;r<l;r++){for(a=r;a<m;)h=_*e[a+l]-v*t[a+l],p=_*t[a+l]+v*e[a+l],e[a+l]=e[a]-h,t[a+l]=t[a]-p,e[a]+=h,t[a]+=p,a+=2*l;g=_*u-v*c,v=_*c+v*u,_=g}c=Math.sqrt((1-u)/2),n||(c=-c),u=Math.sqrt((1+u)/2),l*=2}if(n)for(a=0;a<m;a++)e[a]/=m,t[a]/=m}else console.error("FFT data must have the size that is equal to a power of two")}function dspGenerateSpectrumData(e){for(var t=Math.pow(2,1+Math.ceil(ui.log2(e.length))),n=new Float64Array(t),i=new Float64Array(t),a=0;a<e.length;a++)n[a]=e[a];!function(e,t){if(0!=e.length)for(var n=t*e[0],i=1;i<e.length;i++){var a=t*e[i];e[i]-=n,n=a}}(n,.9),dspFFT(n,i,!1);for(var r=new Float64Array(e.length),o=0;o<e.length;o++)r[o]=ui.hypot(n[o],i[o]);return r}function MediaEngineAPI(p,e){var t={renderFile:P,renderStream:function(t,e,n){function i(){_.load(),p.triggerEvent("onOpen"),p.setTitle(e)}setTimeout(function(){var e;(t=ui.trim(t))&&(B=!(x=!1),c=!(f=function(){n&&p.play(),ui.isFunction(n)&&n()}),v=null,_.src=t,_.crossOrigin="anonymous",M=t,w?r?s?(p.dsp.flush({numberOfChannels:d.channelCount,sampleRate:s.sampleRate,processorNode:d}),i()):(s=new(window.AudioContext||window.webkitAudioContext),e=getDSPFilterCode(),e=new Blob([e],{type:"application/javascript"}),e=window.URL.createObjectURL(e),s.audioWorklet.addModule(e).then(function(){g=s.createMediaElementSource(_),m=s.createAnalyser(),d=new AudioWorkletNode(s,"DSPFilter"),(h=s.createGain()).gain.value=l,g.connect(m).connect(d).connect(h).connect(s.destination),p.dsp.flush({numberOfChannels:d.channelCount,sampleRate:s.sampleRate,processorNode:d}),i()})):(s||(s=new(window.AudioContext||window.webkitAudioContext),g=s.createMediaElementSource(_),m=s.createAnalyser(),(d=s.createScriptProcessor(4096,g.channelCount,g.channelCount)).onaudioprocess=H,(h=s.createGain()).gain.value=l,g.connect(m),m.connect(d),d.connect(h),h.connect(s.destination)),p.dsp.flush({numberOfChannels:g.channelCount,sampleRate:g.context.sampleRate}),i()):i())},1)},renderFileVariable:function(e,t){if(!e)return;P(URL.createObjectURL(e),t),M=e.name},renderRadio:T,play:C,pause:function(){if(!c)return;_.pause()},paused:function(){return!c||_.paused},position:function(){return c?_.currentTime:0},duration:I,seek:O,setLooped:function(e){S=ui.toBoolean(e)},setAutoplay:function(e){i=ui.toBoolean(e)},setRate:V,volume:function(){return l},setVolume:z,muted:function(){return a},setMuted:function(e){a=ui.toBoolean(e),c&&q(a?0:l);p.triggerEvent("onVolumeChange",10)},hasVideo:function(){return!!c&&0<_.videoHeight},setVideoOwner:function(e){n.detach().appendTo(e),n.show()},videoWidth:function(){return c?_.videoWidth:0},videoHeight:function(){return c?_.videoHeight:0},numberOfChannels:function(){return v?v.numberOfChannels:0},sampleRate:function(){return v?v.sampleRate:0},getVisualData:function(e,t,n,i){var a,r,o,s,l,u=200;if(v){t=ui.ensureRange(ui.toInt(t),0,v.numberOfChannels-1);var c=v.getChannelData(t),f=Math.floor(_.currentTime*v.sampleRate);if(f+e>=c.length&&(e=c.length-f-e),e<0)return new Float64Array(0);for(a=new Float64Array(e),r=0;r<e;r++)a[r]=c[f+r];if(n){var d=f-u;d<0&&(u+=d,d=0),s=new Float64Array(u);for(var h=0;h<u;h++)s[h]=c[d],d++;b.previewDSP(s,a,v.sampleRate,p.dsp,i)}}else{if(!m)return new Float64Array(0);if(n){for(o=new Uint8Array(u+e),m.getByteTimeDomainData(o),s=new Float64Array(u),r=0;r<u;r++)s[r]=(o[r]-128)/128;for(a=new Float64Array(o.length),r=0;r<o.length;r++)2048<=(l=(r+u)%4096)&&(l=4095-l),a[r]=(o[l]-128)/128||0;b.previewDSP(s,a,g.context.sampleRate,p.dsp,i)}else for(o=new Uint8Array(e),m.getByteTimeDomainData(o),a=new Float64Array(o.length),r=0;r<o.length;r++)2048<=(l=r%4096)&&(l=4095-l),a[r]=(o[l]-128)/128}return a},getWavePrint:function(e,t,n,i,a){if(!v)return new Float64Array(0);(!a||e<a)&&(a=e);(i=ui.toInt(i))<0&&(i=0);e<i+a&&(i-=e-a);n=ui.ensureRange(ui.toInt(n),0,v.numberOfChannels-1);for(var r=v.getChannelData(n),o=new Float64Array(a),s=new Float64Array(a),l=0,u=0;u<a;u++){for(var c=0,f=0,d=Math.floor((u+i)*v.sampleRate*v.duration/e),h=0;h<t;h++){var p=r[Math.floor(l+(d-l)*h/t)];0<p?f<p&&(f=p):p<c&&(c=p)}l=d,o[u]=f,s[u]=c}return{length:e,hiData:o,loData:s}},getPCMFragment:function(e,t,n){var i,a;if(t<e)return null;var t=t-e,r=Math.floor(v.sampleRate*t),o=1<v.numberOfChannels,s=new Int16Array(r),l=null;o&&(l=new Int16Array(r));var u=v.getChannelData(0),c=null;o&&(c=v.getChannelData(1));var f=Math.floor(e*v.sampleRate);if(n){var d=new Float64Array(r),h=null;for(o&&(h=new Float64Array(r)),i=0;i<r;i++)d[i]=u[i+f],o&&(h[i]=c[i+f]);n=DSPFilter(null);for(n.copyParams(p.dsp),n.flush({numberOfChannels:v.numberOfChannels,sampleRate:v.sampleRate}),n.process({numberOfChannels:v.numberOfChannels,sampleRate:v.sampleRate,length:r,data:[d,h]}),i=0;i<r;i++)(a=Math.floor(32767*d[i]))<-32768?a=-32768:32767<a&&(a=32767),s[i]=a,o&&((a=Math.floor(32767*h[i]))<-32768?a=-32768:32767<a&&(a=32767),l[i]=a)}else for(i=0;i<r;i++)s[i]=Math.floor(32767*u[i+f]),o&&(l[i]=Math.floor(32767*c[i+f]));return{numberOfChannels:v.numberOfChannels,sampleRate:v.sampleRate,samples0:s,samples1:l}},isRadio:function(){return x},radioStationIndex:function(){return A},radioStations:function(){return k},setRadioStations:function(e){k=ui.toArray(e)},prevRadioStation:function(){if(!x||0==k.length)return;T((A-1+k.length-1)%k.length+1)},nextRadioStation:function(){if(!x||0==k.length)return;T((A-1+1)%k.length+1)},isStream:function(){return B},title:function(){return E},setTitle:D,enableDSP:function(e){w=ui.toBoolean(e)},requireWavePrint:function(e){y=ui.toBoolean(e)},url:function(){return M},destroy:function(){n&&n.remove();v=null,o&&(o.close(),o=null);s&&(s.close(),s=null)}},e="html5audio"==(e=ui.toObject(e)).api?"audio":"video",r=window.AudioWorkletNode&&(new AudioContext).audioWorklet;"video"==e&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(e="audio");var n=$('<div class="ui-media-engine" style="display: none"></div>'),_=document.createElement(e);$(_).attr({width:"100%",style:"display: none"}),n.append(_),$(document.body).append(n);var o=null,s=null,v=null,i=!1,a=!1,l=1,u=1,c=!1,f=null,g=null,m=null,d=null,h=null,b=DSPFilter(null),w=instanceMgr.defaulEnableDSP,y=instanceMgr.defaulRequireWavePrint,M="",S=!1,x=!1,k=[],A=0,R="Alex Player v"+engineVersion,E=R,B=!1,r=window.AudioWorkletNode&&(new AudioContext).audioWorklet;function P(n,i){function a(){_.load(),p.triggerEvent("onOpen")}setTimeout(function(){var e,t;(n=ui.trim(n))&&(f=i,c=B=x=!1,v=null,y&&((e=new XMLHttpRequest).open("GET",n,!0),e.responseType="arraybuffer",e.onload=function(){(o=o||new(window.AudioContext||window.webkitAudioContext)).decodeAudioData(e.response,function(e){v=e,p.triggerEvent("onWavePrintDataLoad")})},e.send()),_.src=n,_.crossOrigin="anonymous",M=n,w?r?s?(p.dsp.flush({numberOfChannels:d.channelCount,sampleRate:s.sampleRate,processorNode:d}),a()):(s=new(window.AudioContext||window.webkitAudioContext),t=getDSPFilterCode(),t=new Blob([t],{type:"application/javascript"}),t=window.URL.createObjectURL(t),s.audioWorklet.addModule(t).then(function(){g=s.createMediaElementSource(_),m=s.createAnalyser(),d=new AudioWorkletNode(s,"DSPFilter"),(h=s.createGain()).gain.value=l,g.connect(m).connect(d).connect(h).connect(s.destination),p.dsp.flush({numberOfChannels:d.channelCount,sampleRate:s.sampleRate,processorNode:d}),a()})):(s||(s=new(window.AudioContext||window.webkitAudioContext),g=s.createMediaElementSource(_),m=s.createAnalyser(),(d=s.createScriptProcessor(4096,g.channelCount,g.channelCount)).onaudioprocess=H,(h=s.createGain()).gain.value=l,g.connect(m),m.connect(d),d.connect(h),h.connect(s.destination)),p.dsp.flush({numberOfChannels:g.channelCount,sampleRate:g.context.sampleRate}),a()):(p.dsp.flush({numberOfChannels:g.channelCount,sampleRate:g.context.sampleRate}),a()))},1)}function T(n,e){function i(){_.load(),p.triggerEvent("onOpen")}e&&(k=ui.toArray(e)),setTimeout(function(){var e,t;0!=k.length&&((A=ui.toInt(n))<=0&&(A=Math.floor(Math.random()*k.length)),t=k[(A-1)%k.length],(e=ui.trim(t.url))&&(B=!(x=!0),c=!(f=function(){p.play()}),v=null,_.src=e,_.crossOrigin="anonymous",M=e,t.hasOwnProperty("name")&&D(t.name),w?r?s?(p.dsp.flush({numberOfChannels:d.channelCount,sampleRate:s.sampleRate,processorNode:d}),i()):(s=new(window.AudioContext||window.webkitAudioContext),t=getDSPFilterCode(),t=new Blob([t],{type:"application/javascript"}),t=window.URL.createObjectURL(t),s.audioWorklet.addModule(t).then(function(){g=s.createMediaElementSource(_),m=s.createAnalyser(),d=new AudioWorkletNode(s,"DSPFilter"),(h=s.createGain()).gain.value=l,g.connect(m).connect(d).connect(h).connect(s.destination),p.dsp.flush({numberOfChannels:d.channelCount,sampleRate:s.sampleRate,processorNode:d}),i()})):(s||(s=new(window.AudioContext||window.webkitAudioContext),g=s.createMediaElementSource(_),m=s.createAnalyser(),(d=s.createScriptProcessor(4096,g.channelCount,g.channelCount)).onaudioprocess=H,(h=s.createGain()).gain.value=l,g.connect(m),m.connect(d),d.connect(h),h.connect(s.destination)),p.dsp.flush({numberOfChannels:g.channelCount,sampleRate:g.context.sampleRate}),i()):i()))},1)}function C(){c&&(instanceMgr.suspendAll(),s&&s.resume(),_.play())}function I(){return!c||_.duration==1/0?0:_.duration}function O(e,t){c&&(_.currentTime=I()*ui.toFloat(e)/ui.toFloat(t),p.triggerEvent("onProgress"),p.triggerEvent("onSeek"))}function V(e){u=ui.toFloat(e),c&&(_.playbackRate=e)}function q(e){w&&h?h.gain.setValueAtTime(e,s.currentTime):_.volume=e}function z(e){l=ui.ensureRange(ui.toFloat(e),0,1),!a&&c&&q(l),p.triggerEvent("onVolumeChange",10)}function D(e){E=ui.trim(e)||R,p.triggerEvent("onTitleChange")}function H(e){for(var t=[],n=g.channelCount,i=0;i<n;i++){for(var a=e.inputBuffer.getChannelData(i),r=e.outputBuffer.getChannelData(i),o=0;o<a.length;o++)r[o]=a[o];t.push(r)}p.dsp.process({data:t,numberOfChannels:n,length:a.length,sampleRate:g.context.sampleRate})}return _.addEventListener("loadeddata",function(){c=!0,_.style.display=0<_.videoHeight?"block":"none",z(l),V(u),p.triggerEvent("onLoad"),ui.isFunction(f)&&f(),i?(_.play(),s&&s.resume()):p.triggerEvent("onPause"),p.triggerEvent("onProgress")},!1),_.ontimeupdate=function(){p.triggerEvent("onProgress")},_.onpause=function(){p.triggerEvent("onPause"),instanceMgr.unregisterActiveInstance(p)},_.onplay=function(){p.triggerEvent("onPlay"),instanceMgr.registerActiveInstance(p)},_.onended=function(){S?(O(0,1e3),C()):(p.triggerEvent("onPause"),p.triggerEvent("onComplete"),instanceMgr.unregisterActiveInstance(p))},t}function AudioEngineAPI(p,e){var h,_,t,n={renderFile:function(e,t){if(!(e=ui.trim(e)))return;R(),d=e;var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){E(n.response,t)},n.send(),p.triggerEvent("onOpen")},renderFileVariable:function(e,t){if(!e)return;R(),d=e.name;var n=new FileReader;n.onload=function(e){E(e.target.result,t)},n.readAsArrayBuffer(e),p.triggerEvent("onOpen")},play:function(){if(!b||!w)return;instanceMgr.suspendAll(),b=!1,B(_),h=g.context.currentTime-_,p.triggerEvent("onPlay"),instanceMgr.registerActiveInstance(p)},pause:S,paused:function(){return b},position:x,duration:function(){return w?v.duration:0},seek:k,setLooped:function(e){y=ui.toBoolean(e)},setAutoplay:function(e){i=ui.toBoolean(e)},setRate:function(e){u=ui.toFloat(e),w&&(g.playbackRate.value=u)},volume:function(){return s},setVolume:function(e){s=ui.ensureRange(ui.toFloat(e),0,1),w&&!l&&o&&(o.gain.value=s);p.triggerEvent("onVolumeChange",10)},muted:function(){return l},setMuted:function(e){l=ui.toBoolean(e),w&&o&&(o.gain.value=l?0:s);p.triggerEvent("onVolumeChange",10)},numberOfChannels:function(){return w?v.numberOfChannels:0},sampleRate:function(){return w?v.sampleRate:0},getVisualData:function(e,t,n,i){if(!w)return new Float64Array(0);t=ui.ensureRange(ui.toInt(t),0,v.numberOfChannels-1);var a=b?_:g.context.currentTime-h,r=v.getChannelData(t),o=Math.floor(a*v.sampleRate);o+e>=r.length&&(e=r.length-o-e);if(e<0)return new Float64Array(0);for(var s=new Float64Array(e),l=0;l<e;l++)s[l]=r[o],o++;if(n){var u=200,c=o-u;c<0&&(u+=c,c=0);for(var f=new Float64Array(u),d=0;d<u;d++)f[d]=r[c],c++;m.previewDSP(f,s,v.sampleRate,p.dsp,i)}return s},getWavePrint:function(e,t,n,i,a){if(!w)return new Float64Array(0);(!a||e<a)&&(a=e);(i=ui.toInt(i))<0&&(i=0);e<i+a&&(i-=e-a);n=ui.ensureRange(ui.toInt(n),0,v.numberOfChannels-1);for(var r=v.getChannelData(n),o=new Float64Array(a),s=new Float64Array(a),l=0,u=0;u<a;u++){for(var c=0,f=0,d=Math.floor((u+i)*v.sampleRate*v.duration/e),h=0;h<t;h++){var p=r[Math.floor(l+(d-l)*h/t)];0<p?f<p&&(f=p):p<c&&(c=p)}l=d,o[u]=f,s[u]=c}return{length:e,hiData:o,loData:s}},getPCMFragment:function(e,t,n){var i,a;if(t<e)return null;var t=t-e,r=Math.floor(v.sampleRate*t),o=1<v.numberOfChannels,s=new Int16Array(r),l=null;o&&(l=new Int16Array(r));var u=v.getChannelData(0),c=null;o&&(c=v.getChannelData(1));var f=Math.floor(e*v.sampleRate);if(n){var d=new Float64Array(r),h=null;for(o&&(h=new Float64Array(r)),i=0;i<r;i++)d[i]=u[i+f],o&&(h[i]=c[i+f]);n=DSPFilter(null);for(n.copyParams(p.dsp),n.flush({numberOfChannels:v.numberOfChannels,sampleRate:v.sampleRate}),n.process({numberOfChannels:v.numberOfChannels,sampleRate:v.sampleRate,length:r,data:[d,h]}),i=0;i<r;i++)(a=Math.floor(32767*d[i]))<-32768?a=-32768:32767<a&&(a=32767),s[i]=a,o&&((a=Math.floor(32767*h[i]))<-32768?a=-32768:32767<a&&(a=32767),l[i]=a)}else for(i=0;i<r;i++)s[i]=Math.floor(32767*u[i+f]),o&&(l[i]=Math.floor(32767*c[i+f]));return{numberOfChannels:v.numberOfChannels,sampleRate:v.sampleRate,samples0:s,samples1:l}},enableDSP:function(e){c=ui.toBoolean(e)},url:function(){return d},destroy:function(){A(),g&&(g.stop(),g.disconnect(),g=null);r&&(r.disconnect(),r=null);o&&(o.disconnect(),o=null);a.close()}},i=!1,a=new(window.AudioContext||window.webkitAudioContext),v=null,g=null,r=null,m=DSPFilter(null),o=null,b=!0,s=1,l=!1,u=1,w=!1,c=!1,f=null,d="",y=!1,M=window.AudioWorkletNode&&(new AudioContext).audioWorklet;function S(){!b&&w&&(_=x(),g.stop(null),b=!0,p.triggerEvent("onPause"),instanceMgr.unregisterActiveInstance(p))}function x(){return w?b?_:ui.ensureRange(g.context.currentTime-h,0,v.duration):0}function k(e,t){w&&(t=v.duration*ui.toFloat(e)/ui.toFloat(t),b?_=t:(B(t),h=g.context.currentTime-t),p.triggerEvent("onProgress"),p.triggerEvent("onSeek"))}function A(){f&&(clearInterval(f),f=null)}function R(){g&&(g.stop(),p.triggerEvent("onPause"),w=!1)}function E(e,t){a.decodeAudioData(e,function(e){v=e,b=!i,w=!0,i?B(0):_=0,p.triggerEvent("onLoad"),p.triggerEvent("onWavePrintDataLoad"),p.triggerEvent("onProgress"),i&&(p.triggerEvent("onPlay"),instanceMgr.registerActiveInstance(p)),A(),f=setInterval(function(){w&&g&&(g.context.currentTime-h>v.duration?y?k(0,1e3):(S(),p.triggerEvent("onProgress"),p.triggerEvent("onPause"),p.triggerEvent("onComplete"),instanceMgr.unregisterActiveInstance(p)):p.triggerEvent("onProgress"))},200),ui.isFunction(t)&&t()},function(e){console.error("Error with decoding audio data: "+e.error)})}function B(e){g&&(g.stop(),g.disconnect(),g=null),r&&(r.disconnect(),r=null),o&&(o.disconnect(),o=null),(g=a.createBufferSource()).buffer=v,g.playbackRate.value=u,(o=a.createGain()).gain.value=s,c?M?(r=new AudioWorkletNode(a,"DSPFilter"),g.connect(r).connect(o).connect(a.destination),p.dsp.flush({numberOfChannels:v.numberOfChannels,sampleRate:v.sampleRate,processorNode:r})):((r=a.createScriptProcessor(4096,v.numberOfChannels,v.numberOfChannels)).onaudioprocess=P,g.connect(r),r.connect(o),o.connect(a.destination),p.dsp.flush({numberOfChannels:v.numberOfChannels,sampleRate:v.sampleRate})):(g.connect(o),o.connect(a.destination)),h=g.context.currentTime,g.start(0,e)}function P(e){for(var t=[],n=v.numberOfChannels,i=0;i<n;i++){for(var a=e.inputBuffer.getChannelData(i),r=e.outputBuffer.getChannelData(i),o=0;o<a.length;o++)r[o]=a[o];t.push(r)}p.dsp.process({data:t,numberOfChannels:n,length:a.length,sampleRate:v.sampleRate})}return M&&(t=getDSPFilterCode(),t=new Blob([t],{type:"application/javascript"}),t=window.URL.createObjectURL(t),a.audioWorklet.addModule(t)),n}function detectMediaEngineAPI(e,t){var n=ui.toString(t.api);return(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"webaudio"==n?AudioEngineAPI:MediaEngineAPI)(e,t)}function engine(e){return new _mediaEngine(e)}function _mediaEngine(n){n=ui.toObject(n),this.dsp=DSPFilter(this);var e=n.api,i=e,a=this,r=detectMediaEngineAPI(a,n),t=MediaEvents();function o(){i!=e&&(r&&r.destroy(),i=e,n.api=e,r=detectMediaEngineAPI(a,n))}function s(){return r.position?r.position():0}function l(){return r.duration?r.duration():1}return this.id=mediaEngineInstanceCounter++,this.renderFile=function(e,t){o(),setTimeout(function(){r.renderFile&&r.renderFile(e,t)},1)},this.renderStream=function(e,t,n){o(),setTimeout(function(){r.renderStream&&r.renderStream(e,t,n)},1)},this.renderFileVariable=function(e,t){o(),setTimeout(function(){r.renderFileVariable&&r.renderFileVariable(e,t)},1)},this.renderRadio=function(e,t){"html5audio"!=i&&(r&&r.destroy(),i="html5audio",n.api=i,r=detectMediaEngineAPI(a,n)),setTimeout(function(){r.renderRadio&&r.renderRadio(e,t)},1)},this.paused=function(){return!r.paused||r.paused()},this.play=function(){r.position()==r.duration()&&r.seek(0,1e3);r.play&&r.play()},this.pause=function(){r.pause&&r.pause()},this.position=s,this.duration=l,this.positionStr=function(){return ui.formatTime(s(),l())},this.durationStr=function(){return ui.formatTime(l(),l())},this.seek=function(e,t){r.seek&&r.seek(e,t)},this.setLooped=function(e){r.setLooped&&r.setLooped(e)},this.setAutoplay=function(e){r.setAutoplay&&r.setAutoplay(e)},this.setRate=function(e){r.setRate&&r.setRate(e)},this.volume=function(){return r.volume?r.volume():1},this.setVolume=function(e){r.setVolume&&r.setVolume(e)},this.muted=function(){return!!r.muted&&r.muted()},this.setMuted=function(e){r.setMuted&&r.setMuted(e)},this.hasVideo=function(){return!!r.hasVideo&&r.hasVideo()},this.setVideoOwner=function(e){r.setVideoOwner&&r.setVideoOwner(e)},this.videoWidth=function(){return r.videoWidth?r.videoWidth():0},this.videoHeight=function(){return r.videoHeight?r.videoHeight():0},this.numberOfChannels=function(){return r.numberOfChannels?r.numberOfChannels():void 0},this.sampleRate=function(){return r.sampleRate?r.sampleRate():void 0},this.getVisualData=function(e,t,n,i){return r.getVisualData?r.getVisualData(e,t,n,i):null},this.getSpectrumData=function(e,t,n){return engine.getSpectrumData(this,e,t,n)},this.getVU=function(e,t,n){return engine.getVU(this,e,t,n)},this.getWavePrint=function(e,t,n,i,a){return r.getWavePrint?r.getWavePrint(e,t,n,i,a):null},this.getPCMFragment=function(e,t,n){return r.getPCMFragment?r.getPCMFragment(e,t,n):null},this.isRadio=function(){return!!r.isRadio&&r.isRadio()},this.radioStationIndex=function(){return r.radioStationIndex?r.radioStationIndex():0},this.radioStations=function(){return r.radioStations?r.radioStations():[]},this.prevRadioStation=function(){r.prevRadioStation&&r.prevRadioStation()},this.nextRadioStation=function(){r.nextRadioStation&&r.nextRadioStation()},this.isStream=function(){return!!r.isStream&&r.isStream()},this.title=function(){return r.title?r.title():""},this.setTitle=function(e){if(r.setTitle)return r.setTitle(e)},this.bindEvent=t.bindEvent,this.unbindEvents=t.unbindEvents,this.triggerEvent=t.triggerEvent,this.enableDSP=function(e){r.enableDSP&&r.enableDSP(e)},this.requireWavePrint=function(e){r.requireWavePrint&&r.requireWavePrint(e)},this.url=function(){return r.url?r.url():""},this.destroy=function(){r.destroy&&r.destroy();ui.arrayRemove(engine.instances,this),ui.destroy(this)},engine.instances.push(this),this}function initSmallVisualizationBox(e,c,t){var n=0,f="#000000",d=null,h=ui.initGraph(e),o=null,p=null,_=null;function i(){!fullScreenVisualisationRunned&&ui.isVisible(e)&&a()}function a(){(0==n?function(){var e=0,t=0,n=c.getVisualData(4*h.width,0);h.clear();var i=h.webColor2RGB(f);if(d&&0<n.length)for(var a=0,r=Math.min(4*h.width,n.length);a<r;a++){var o=10-10*n[4*a];0<a&&h.line(e,t,a,o,i),e=a,t=o}else{var s=h.height/2;h.line(0,s,h.width,s,i)}h.redraw()}:1==n?function(){o=o||new Float64Array(h.width);for(var e=c.getSpectrumData(2*o.length,0),t=h.webColor2RGB(f),n=0,i=Math.min(o.length,e.length);n<i;n++)o[n]-=.4,e[n]>o[n]&&(o[n]=e[n]);if(h.clear(),d&&0<e.length)for(var a=0;a<o.length;a++){var r=7*o[a];h.line(a,h.height-r,a,h.height-1,t)}else h.line(0,h.height-1,h.width,h.height-1,t);h.redraw()}:function(){var e,t,n=6,i=.5;p||(p=new Float64Array(21),_=new Float64Array(21));var a=c.getSpectrumData(128,0),r=h.webColor2RGB(f);for(e=0,t=Math.min(21,a.length);e<t;e++)p[e]-=.35,a[e]>p[e]&&(p[e]=a[e]),_[e]-=.08,a[e]>_[e]&&(_[e]=a[e]);if(h.clear(),d&&0<a.length)for(e=0;e<21;e++){var o=u(p[e]),s=h.height-1-o,l=3*e;h.fillRect(l,s,2,o,r);o=h.height-1-u(_[e]);h.line(l,o,2+l-1,o,r)}else for(e=0;e<21;e++)h.line(3*e,h.height-2,3*e+2-1,h.height-2,r);function u(e){return e*n*(1-i)+Math.sqrt(e*h.height*n)*i}h.redraw()})()}function r(e){(e=ui.toObject(e)).hasOwnProperty("color")&&(f=e.color),e.hasOwnProperty("visType")&&(n=Math.abs(ui.toInt(e.visType))%3),a()}return r(t),{start:function(){d=d||setInterval(i,40)},stop:function(){d&&(clearInterval(d),d=null,a())},redraw:a,update:r,visType:function(){return n},setVisType:function(e){n=Math.abs(ui.toInt(e))%3},setColor:function(e){f=e}}}function mediaEngineWavEncoder(e,t,n,i){var a=44+e*n.length*2,r=1<e,o=new Int8Array(a),s=0;c("RIFF"),c("----"),c("WAVE"),c("fmt "),d(16),f(1),f(e),d(t),d(2*t*e),f(2*e),f(16),c("data"),c("----");for(var l=0;l<n.length;l++)f(n[l]),r&&f(i[l]);return s=4,d(a-8),s=40,d(a-44),o;function u(e){o[s]=e,s++}function c(e){u(e.charCodeAt(0)),u(e.charCodeAt(1)),u(e.charCodeAt(2)),u(e.charCodeAt(3))}function f(e){u(e),u(e>>=8)}function d(e){u(e),u(e>>=8),u(e>>=8),u(e>>=8)}}function qQ(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)-5);return t}function QQ(e,t){var n=$('<div class="ui-equalizer-vu-meter">\t<div class="ui-equalizer-vu-meter-channels">\t\t<div class="ui-equalizer-vu-meter-channel-1">\t\t\t<div class="ui-equalizer-vu-meter-channel-1-box">\t\t\t\t<div class="ui-equalizer-vu-meter-channel-1-value"></div>\t\t\t</div>\t\t</div>\t\t<div class="ui-equalizer-vu-meter-channel-2">\t\t\t<div class="ui-equalizer-vu-meter-channel-2-box">\t\t\t\t<div class="ui-equalizer-vu-meter-channel-2-value"></div>\t\t\t</div>\t\t</div>\t</div>\t<div class="ui-equalizer-vu-meter-title"></div></div>');e.append(n);var i=n.find(".ui-equalizer-vu-meter-channel-1-value"),a=n.find(".ui-equalizer-vu-meter-channel-2-value");n.find(".ui-equalizer-vu-meter-title").text(t.title);var r=t.applyDSP,o=t.player;return{drawFrame:function(){var e=engine.getVU(o,0,r),t=engine.getVU(o,1,r);i.css("height",85*(e+40)/40+"%"),a.css("height",85*(t+40)/40+"%")}}}function RQ(a,r){return{drawFrame:function(){var e=Math.floor(a.height/2),t=engine.getVisualData(r,a.width,0,!0);a.ctx.clearRect(0,0,a.width,a.height),a.ctx.beginPath();for(var n=0;n<a.width;n++){var i=e+t[n]*e;0==n?a.ctx.moveTo(n,i):a.ctx.lineTo(n,i)}a.ctx.strokeStyle="#727272",a.ctx.stroke()}}}function SQ(l,u){var t=10,n=.5,c=l.RGB(160,160,160),f=l.RGB(114,114,114),d=[],h=[];function e(e,t){if(t>=e.length)for(var n=t-e.length,i=0;i<n;i++)e.push(0);else e.length=t}function p(e,t,n){for(var i=0;i<e.length;i++)e[i]-=n,t[i]>e[i]&&(e[i]=t[i]),e[i]<0&&(e[i]=0)}function _(e){return e*t*(1-n)+Math.sqrt(e*l.height*t)*n}return e(d,99),e(h,99),{drawFrame:function(e){var t=engine.getSpectrumData(u,99,0,!0);p(d,t,.5),p(h,t,.14);var n=Math.floor((e-4)/5),i=(e-5*n+1)/2;l.clear();for(var a=0;a<n;a++){var r=_(d[a]),o=l.height-1-r,s=i+5*a;l.fillRect(s,o,4,r,c);r=l.height-1-_(h[a]);l.line(s,r,4+s-1,r,f)}l.redraw()}}}function TQ(i,a){var r=[],o=8,s=.5,l=i.RGB(120,120,120);return function(e,t){if(t>=e.length)for(var n=t-e.length,i=0;i<n;i++)e.push(0);else e.length=t}(r,500),{drawFrame:function(){var e=engine.getSpectrumData(a,500,0,!0);!function(e,t,n){for(var i=0;i<e.length;i++)e[i]-=n,t[i]>e[i]&&(e[i]=t[i]),e[i]<0&&(e[i]=0)}(r,e,1),i.clear();for(var t=0;t<500;t++){var n=(n=r[t])*o*(1-s)+Math.sqrt(n*i.height*o)*s;i.line(t,i.height-1-n,t,i.height-1,l)}i.redraw()}}}function UQ(e,t){var n=$('<div class="ui-equalizer-vis">\t<div class="ui-equalizer-vis-frame">\t\t<div class="ui-equalizer-vis-box">\t\t\t<canvas class="ui-equalizer-vis-canvas"></canvas>\t\t</div>\t</div>\t<div class="ui-equalizer-vis-tabs">\t\t<div class="ui-equalizer-vis-tab selected" data-vis-type="2">Bars</div>\t\t<div class="ui-equalizer-vis-tab" data-vis-type="1">Spectrum</div>\t\t<div class="ui-equalizer-vis-tab" data-vis-type="0">Waveform</div>\t</div></div>');e.append(n);var i=n.find(".ui-equalizer-vis-box"),e=ui.initGraph(n.find(".ui-equalizer-vis-canvas"),500,48),a=RQ(e,t),r=SQ(e,t),o=TQ(e,t),s=2,l=null;f(),n.on("click",".ui-equalizer-vis-tab",function(){d(ui.toInt($(this).attr("data-vis-type"))),ui.isFunction(l)&&l({visType:s})});var u=setInterval(c,40);function c(){!fullScreenVisualisationRunned&&ui.isVisible(n)&&(1==s?o.drawFrame():2==s?r.drawFrame(i.width()):a.drawFrame())}function f(){c()}function d(e){s=ui.toInt(e),n.findAll(".ui-equalizer-vis-tab").each(function(){$(this).removeClass("selected")}),n.find('.ui-equalizer-vis-tab[data-vis-type="'+s+'"]').addClass("selected")}return{adjust:f,setVisType:d,setVisChangeHandler:function(e){l=e},destroy:function(){clearInterval(u)}}}function VQ(e,t){var i=$('<div class="ui-equalizer-sound-param ui-stuff ui-non-selectable">\t<div class="ui-equalizer-sound-param-image">\t\t<svg viewBox="0 0 72 72">\t\t\t<path class="ui-equalizer-sound-param-bg" fill="#8b8b8b"/>\t\t\t<path class="ui-equalizer-sound-param-fg" fill="#4fcb1d"/>\t\t\t<path class="ui-equalizer-sound-param-border" fill="#8b8b8b"/>\t\t</svg>\t\t<div class="ui-equalizer-sound-param-value"></div>\t\t<div class="ui-equalizer-sound-param-arrow"></div>\t</div>\t<div class="ui-equalizer-sound-param-label"></div></div>');e.append(i);var n=i.find(".ui-equalizer-sound-param-bg"),a=i.find(".ui-equalizer-sound-param-fg"),r=i.find(".ui-equalizer-sound-param-border"),o=i.find(".ui-equalizer-sound-param-value"),s=i.find(".ui-equalizer-sound-param-arrow"),l=i.find(".ui-equalizer-sound-param-label"),u=36,c=36,f=45,d=360-f,h=0,p=1,_=0,v=0,g=null,m=null;M(n,f,d,36,25),M(r,f,d,36,34),w(),(t=ui.toObject(t)).hasOwnProperty("color")||(t.color="#4fcb1d");t.player;function b(e){var t,n=!1;(e=ui.toObject(e)).hasOwnProperty("label")&&l.text(ui.toString(e.label)),e.hasOwnProperty("color")&&(t=ui.toString(e.color),a.attr("fill",t),s.css("border-color",t),s.css("box-shadow","0 0 4px "+t)),e.hasOwnProperty("minValue")&&(h=ui.toFloat(e.minValue),n=!0),e.hasOwnProperty("maxValue")&&(p=ui.toFloat(e.maxValue),n=!0),e.hasOwnProperty("value")&&(_=ui.toFloat(e.value),n=!0),e.hasOwnProperty("baseValue")&&(v=ui.toFloat(e.baseValue),n=!0),e.hasOwnProperty("formatHandler")&&(g=e.formatHandler),e.hasOwnProperty("onChange")&&(m=e.onChange),n&&w()}function w(){var e=y(_);M(a,y(v),e,36,20),s.css("transform","rotate("+(e-180)+"deg)"),ui.isFunction(g)?o.text(ui.toString(g(_))):o.text(_.toFixed(2))}function y(e){return(e-h)/(p-h)*(d-f)+f}function M(e,t,n,i,a){n<t&&(o=t,t=n,n=o);var r=(t+90)*Math.PI/180,o=(n+90)*Math.PI/180,t=180<(n-t+360)%360?1:0,r=["M",u+i*Math.cos(r),c+i*Math.sin(r),"A",i,i,0,t,1,u+i*Math.cos(o),c+i*Math.sin(o),"L",u+a*Math.cos(o),c+a*Math.sin(o),"A",a,a,1,t,0,u+a*Math.cos(r),c+a*Math.sin(r),"Z"];$(e).attr("d",r.join(" "))}return b(t),i.on("mousedown touchstart",function(e){function t(e){var t=i.offset().left+u-e.pageX,n=i.offset().top+c-e.pageY,e=(180*Math.atan2(-n,-t)/Math.PI+720-90)%360;ui.hypot(t,n)<20&&(e=45*Math.floor((e+23)/45));e=((e=ui.ensureRange(e,f,d))-f)/(d-f)*(p-h)+h;ui.isFunction(m)&&m({value:e})}ui.dragAndDrop({event:e,owner:this,cursor:"pointer",startDragging:t,processDragging:t})}),{update:b,value:function(){return _},destroy:function(){i.remove(),i.off()}}}function WQ(e,t){var a=ui.toInt(t.limit),n=ui.toString(t.limitText),i=(ui.toInt(t.index),ui.toFloat(t.value)),r=(t.player,$('<div class="ui-equalizer-band">\t<div class="ui-equalizer-band-value">0</div>\t<div class="ui-equalizer-band-slider">\t\t<div class="ui-equalizer-band-slider-ruler"></div>\t\t<div class="ui-equalizer-band-slider-line">\t\t\t<div class="ui-equalizer-band-slider-value">\t\t\t\t<div class="ui-equalizer-band-slider-placeholder"></div>\t\t\t</div>\t\t</div>\t</div>\t<div class="ui-equalizer-band-label"></div></div>'));e.append(r);var o=r.find(".ui-equalizer-band-value"),s=r.find(".ui-equalizer-band-slider"),l=r.find(".ui-equalizer-band-slider-line"),u=r.find(".ui-equalizer-band-slider-value"),c=r.find(".ui-equalizer-band-slider-placeholder");function f(){var e=Math.round(i);0<e?o.text("+"+e+n):o.text(e+n);var t=s.offset().top-l.offset().top,e=s.outerHeight();u.css({top:(-i+a)/(2*a)*e+t+"px"})}return r.find(".ui-equalizer-band-label").text(t.label),f(),function(){for(var e=r.find(".ui-equalizer-band-slider-ruler"),t=Math.floor(a/4),n=0;n<=a;n++){var i=$('<div class="ui-equalizer-band-slider-ruler-item"></div>');i.css("top",100*n/a+"%"),n%t==0&&i.addClass("ui-equalizer-band-slider-ruler-item-big"),e.append(i)}}(),{sliderOffsTop:function(){return s.offset().top},sliderHeight:function(){return s.outerHeight()},setValue:function(e){(e=ui.toFloat(e))!=i&&(i=e,f())},getOffsX:function(){return r.offset().left+r.outerWidth()/2},setColor:function(e){u.css("background-color",e),c.css({"background-color":e,"box-shadow":"0 0 8px "+e})},destroy:function(){r.remove()}}}function XQ(e,i){var t=$('<div class="ui-equalizer-graphic-eq">\t<div class="ui-equalizer-graphic-eq-top-panel">\t\t<div class="ui-equalizer-graphic-eq-top-left-panel">\t\t\t<div class="ui-equalizer-graphic-eq-preset-button">\t\t\t\t<div class="ui-equalizer-graphic-eq-preset-button-title">Preset</div>\t\t\t\t<div class="ui-equalizer-graphic-eq-preset-button-arrow">\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="ui-equalizer-graphic-screensaver-button"><div></div><div></div><div></div><div></div><span>Screensaver</span></div>\t\t</div>\t</div>\t<div class="ui-equalizer-graphic-eq-box">\t\t<div class="ui-equalizer-graphic-eq-scroll-box">\t\t\t<div class="ui-equalizer-graphic-eq-scroll-box-content">\t\t\t\t<div class="ui-equalizer-graphic-eq-sliders-panel">\t\t\t\t\t<div class="ui-equalizer-graphic-eq-preamp"></div>\t\t\t\t\t<div class="ui-equalizer-graphic-eq-bands">\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t</div>\t</div></div>');e.append(t);var e=t.find(".ui-equalizer-graphic-eq-preamp"),a=t.find(".ui-equalizer-graphic-eq-bands"),r=WQ(e,{player:i,label:"Amp",limit:12,limitText:" dB"}),o=[];t.findAll(".ui-equalizer-graphic-eq-band").each(function(e){e=WQ($(this),{player:i,label:getEQFreqStr(e),limit:20,index:e,value:i.dsp.equalizer.getEQBand(e)});o.push(e)});var n=ui(t.find(".ui-equalizer-graphic-eq-scroll-box")).ScrollBox({skin:"generic"});return t.on("click",".ui-equalizer-graphic-eq-preset-button",function(){var e,a,t;e=this,a=function(e){for(var t=e.bands,n=0;n<10;n++)i.dsp.equalizer.setEQBand(n,t[n])},t=$('<div class="ui-equalizer-presets-dropdown" data-ui-dropdown="tooltip-generic box-generic arrow-off to-bottom-right width-auto margin-2 anim-in-slide anim-out-slide">\t<div class="ui-equalizer-presets-dropdown-title">\t\tSelect preset from list\t</div>\t<div class="ui-equalizer-presets-dropdown-scroll-box" data-ui-dropdown-box>\t\t<div class="ui-equalizer-presets-dropdown-list"></div>\t</div></div>'),ui.openDropdown(e,t,function(t){for(var e=t.find(".ui-equalizer-presets-dropdown-list"),n=0;n<dspEQPresets.length;n++){var i=$('<div class="ui-equalizer-presets-dropdown-list-item"></div>');i.text(dspEQPresets[n].title),e.append(i)}t.on("click",".ui-equalizer-presets-dropdown-list-item",function(){var e=$(this).index();ui.isFunction(a)&&a({bands:dspEQPresets[e].bands}),ui.closeDropdown(t)})})}),t.on("click",".ui-equalizer-graphic-screensaver-button",function(){ui.runAudioScreensaver(i)}),t.on("mousedown touchstart",".ui-equalizer-graphic-eq-preamp",function(e){function t(e){e=(e.pageY-r.sliderOffsTop())/r.sliderHeight(),e=ui.ensureRange(12-24*e,-12,12);i.dsp.equalizer.setPreamp(e)}ui.dragAndDrop({event:e,owner:this,cursor:"pointer",startDragging:t,processDragging:t})}),t.on("mousedown touchstart",".ui-equalizer-graphic-eq-band",function(e){function t(e){var t=Math.floor(a.outerWidth()/10),n=Math.floor((e.pageX-a.offset().left)/t);n<0||9<n||(t=o[n],t=(e.pageY-t.sliderOffsTop())/r.sliderHeight(),t=ui.ensureRange(20-40*t,-20,20),i.dsp.equalizer.setEQBand(n,t))}ui.dragAndDrop({event:e,owner:this,cursor:"pointer",startDragging:t,processDragging:t})}),{update:function(e){(e=ui.toObject(e)).hasOwnProperty("color")&&function(e){r.setColor(e);for(var t=0;t<o.length;t++)o[t].setColor(e)}(e.color)},preampChanged:function(){r.setValue(i.dsp.equalizer.getPreamp())},eqBandChanged:function(){for(var e=0;e<o.length;e++)o[e].setValue(i.dsp.equalizer.getEQBand(e))},bandOffsX:function(e){return o[e].getOffsX()},destroy:function(){r.destroy();for(var e=0;e<o.length;e++)o[e].destroy();n.destroy(),t.off(),t.remove()}}}function YQ(e,t){var n=$('<div class="ui-equalizer-graph">\t<canvas class="ui-equalizer-graph-canvas"></canvas></div>');e.append(n);var i=(t=ui.toObject(t)).onGetPoints,s=(t.player,n.find(".ui-equalizer-graph-canvas")[0]),a=0;function r(){s.width=n.outerWidth(),s.height=n.outerHeight(),a=s.width;var e=s.getContext("2d");e.clearRect(0,0,s.width,s.height);var t=ui.makeArray(i(s.width,s.height));!function(e,t,n,i){var a;for(e.lineWidth=2,e.strokeStyle=n,e.beginPath(),a=0;a<t.length;a++){var r,o=t[a];0==a?e.moveTo(o.x,o.y):(r=t[a-1],e.bezierCurveTo(r.outer.x,r.outer.y,o.inner.x,o.inner.y,o.x,o.y))}e.stroke(),i&&(e.lineTo(s.width,s.height),e.lineTo(0,s.height),e.lineTo(0,t[0].y),e.fillStyle=i,e.fill())}(e,function(e){for(var t=0;t<e.length;t++){var n=e[Math.max(t-1,0)],i=e[t],a=e[Math.min(t+1,e.length-1)],r=Math.sqrt(Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2)),o=Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2)),s=.4*r/(r+o),o=.4*o/(r+o);e[t].inner={x:i.x-s*(a.x-n.x),y:i.y-s*(a.y-n.y)},e[t].outer={x:i.x+o*(a.x-n.x),y:i.y+o*(a.y-n.y)}}return e}(t),"#8b8b8b","#dadada")}return r(),{drawGraph:r,adjust:function(){a!=n.outerWidth()&&r()},destroy:function(){n.remove()}}}function _Q(e,t){e.css("text-decoration",t?"underline":"")}function loadEQFromCookie(e,t){t=ui.toArray(ui.getCookie(t).split(","));t.length<15||(e.dsp.equalizer.setPreamp(ui.toFloat(t[0])),e.dsp.equalizer.setEQBand(0,ui.toFloat(t[1])),e.dsp.equalizer.setEQBand(1,ui.toFloat(t[2])),e.dsp.equalizer.setEQBand(2,ui.toFloat(t[3])),e.dsp.equalizer.setEQBand(3,ui.toFloat(t[4])),e.dsp.equalizer.setEQBand(4,ui.toFloat(t[5])),e.dsp.equalizer.setEQBand(5,ui.toFloat(t[6])),e.dsp.equalizer.setEQBand(6,ui.toFloat(t[7])),e.dsp.equalizer.setEQBand(7,ui.toFloat(t[8])),e.dsp.equalizer.setEQBand(8,ui.toFloat(t[9])),e.dsp.equalizer.setEQBand(9,ui.toFloat(t[10])),e.dsp.balance.setValue(ui.toFloat(t[11])),e.dsp.lowpass.setValue(ui.toFloat(t[12])),e.dsp.highpass.setValue(ui.toFloat(t[13])),e.dsp.sound3d.setValue(ui.toFloat(t[14])))}globals.mediaEngineVersion&&globals.mediaEngineVersion()>=engineVersion||(_uiKit.prototype=uiKit.fn=uiKit.prototype={constructor:uiKit,push:[].push,node:null,length:0,extendUI:function(e){for(var t in e)this[t]=e[t]}},ui=window.mediaUI=uiKit,uiQuery=ui,e=Element.prototype,e.matches||(e.matches=e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector),ui.fn.uiQuery=function(e){if("string"==typeof e)""!=(e=e.trim())&&("<"==e.charAt(0)?(this.node=createNodeFromHTML(e),this.push(this.node)):(this.node=document.querySelector(e),this.node&&(this.push(this.node),this.node.uiInterface&&this.extendUI(this.node.uiInterface))));else if("object"==typeof e){if(!e)return this;if(e instanceof uiQuery)return e.node&&e.node.uiInterface&&e.extendUI(e.node.uiInterface),e;if(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array){for(var t=0;t<e.length;t++)this.push(e[t]);0<e.length&&(this.node=e[0])}else if(window.jQuery&&e instanceof jQuery&&0<e.length){this.node=e[0];for(var n=0;n<e.length;n++)this.push(e[n])}else this.node=e,this.push(this.node);this.node&&this.node.uiInterface&&this.extendUI(this.node.uiInterface)}else"function"==typeof e&&window.addEventListener("load",e,!1);return this},uiQuery.fn.hasClass=function(e){return this.node.classList.contains(e)},uiQuery.fn.addClass=function(e){this.node.classList.add(e)},uiQuery.fn.removeClass=function(e){this.node.classList.remove(e)},uiQuery.fn.toggleClass=function(e,t){"boolean"!=typeof t&&(t=!this.hasClass(e)),t?this.addClass(e):this.removeClass(e)},uiQuery.fn.show=function(){this.node.style.display="block"},uiQuery.fn.hide=function(){this.node.style.display="none"},uiQuery.fn.toggle=function(e){"boolean"!=typeof e&&(e="none"==window.getComputedStyle(this.node,null).getPropertyValue("display")),e?this.show():this.hide()},uiQuery.fn.css=function(e,t){if("string"==typeof e&&void 0===t)return window.getComputedStyle(this.node,null).getPropertyValue(e.trim());if("string"==typeof e)return this.node.style[e]=t,null;for(var n in e)this.node.style[n]=e[n];return null},uiQuery.fn.attr=function(e,t){if("string"==typeof e&&void 0===t)return this.node.getAttribute(e);if("string"==typeof e)return this.node.setAttribute(e,t),null;for(var n in e)this.node.setAttribute(n,e[n]);return null},uiQuery.fn.removeAttr=function(e){this.node.removeAttribute(e)},uiQuery.fn.data=function(e,t){return this.node._uiData=this.node._uiData||{},void 0===e?this.node._uiData:void 0===t?this.node._uiData[e]:(this.node._uiData[e]=t,null)},uiQuery.fn.removeData=function(e){this.node._uiData=this.node._uiData||{},delete this.node._uiData[e]},uiQuery.fn.empty=function(){this.node.innerHTML=""},uiQuery.fn.html=function(e){return void 0===e?this.node.innerHTML:(this.node.innerHTML=e,null)},uiQuery.fn.text=function(e){return void 0===e?this.node.innerText.trim():(this.node.innerText=e,null)},uiQuery.fn.remove=function(){this.node.parentNode.removeChild(this.node)},uiQuery.fn.detach=function(){return uiQuery(this.node.parentNode.removeChild(this.node))},uiQuery.fn.append=function(e){"object"==typeof e?e instanceof HTMLElement?this.node.appendChild(e):e instanceof uiQuery?this.node.appendChild(e.node):window.jQuery&&e instanceof jQuery&&0<e.length&&this.node.appendChild(e[0]):"string"==typeof e&&this.node.appendChild(uiQuery(e).node)},uiQuery.fn.prepend=function(e){"object"==typeof e?e instanceof HTMLElement?prependChild(this.node,e):e instanceof uiQuery?prependChild(this.node,e.node):window.jQuery&&e instanceof jQuery&&0<e.length&&prependChild(this.node,e[0]):"string"!=typeof e||(e=uiQuery(e).node)&&prependChild(this.node,e)},uiQuery.fn.appendTo=function(e){e instanceof uiQuery?e.node.appendChild(this.node):window.jQuery&&e instanceof jQuery?e.append(this[0]):e.appendChild(this.node)},uiQuery.fn.insertBefore=function(e){e instanceof uiQuery?insertBefore(this.node,e.node):window.jQuery&&e instanceof jQuery&&e.length?insertBefore(this[0],e.node):insertBefore(this,e.node)},uiQuery.fn.insertAfter=function(e){e instanceof uiQuery?insertAfter(this.node,e.node):window.jQuery&&e instanceof jQuery&&e.length?insertAfter(this[0],e.node):insertAfter(this,e.node)},uiQuery.fn.offset=function(){var e=this.node;if(e.getBoundingClientRect)var t=e.getBoundingClientRect(),n=t.left+window.pageXOffset,i=t.top+window.pageYOffset;else for(i=n=0;e;)n+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{left:n,top:i}},uiQuery.fn.width=function(e){return void 0===e?parseInt(window.getComputedStyle(this.node,null).getPropertyValue("width")):(this.node.style.width=ui.toInt(e)+"px",null)},uiQuery.fn.innerWidth=function(e){return void 0===e?this.node==window?document.documentElement.clientWidth:this.node.clientWidth||this.node.innerWidth:(this.node.style.width=ui.toInt(e)+this.node.clientWidth-parseInt(window.getComputedStyle(this.node,null).getPropertyValue("width"))+"px",null)},uiQuery.fn.outerWidth=function(e){return void 0===e?this.node.offsetWidth:(this.node.style.width=ui.toInt(e)+this.node.offsetWidth-parseInt(window.getComputedStyle(this.node,null).getPropertyValue("width"))+"px",null)},uiQuery.fn.height=function(e){return void 0===e?parseInt(window.getComputedStyle(this.node,null).getPropertyValue("height")):(this.node.style.height=ui.toInt(e)+"px",null)},uiQuery.fn.innerHeight=function(e){return void 0===e?this.node==window?document.documentElement.clientHeight:this.node.clientHeight||this.node.innerHeight:(this.node.style.height=ui.toInt(e)+this.node.clientHeight-parseInt(window.getComputedStyle(this.node,null).getPropertyValue("height"))+"px",null)},uiQuery.fn.outerHeight=function(e){return void 0===e?this.node.offsetHeight:(this.node.style.height=ui.toInt(e)+this.node.offsetHeight-parseInt(window.getComputedStyle(this.node,null).getPropertyValue("height"))+"px",null)},uiQuery.fn.scrollLeft=function(e){return void 0===e?this.node==window?window.pageXOffset:this.node.scrollLeft:(this.node==window?window.scrollTo(e,window.pageYOffset):this.node.scrollLeft=e,null)},uiQuery.fn.scrollTop=function(e){return void 0===e?this.node==window?window.pageYOffset:this.node.scrollTop:(this.node==window?window.scrollTo(window.pageXOffset,e):this.node.scrollTop=e,null)},eventNameOverrides={mouseenter:"mouseover",mouseleave:"mouseout"},uiQuery.fn.on=function(e,n,i){eventNameOverrides.hasOwnProperty(e)&&(e=eventNameOverrides[e]),"function"==typeof n&&(i=n,n=null);var t=e.split(" ");if(1<t.length)for(var a=0;a<t.length;a++)this.on(t[a],n,i);else{function r(e){var t;n?(t=e.target,e.target.matches(n)||(t=e.target.closest(n)),t&&i.call(t,e)):i.call(o,e)}var o=this.node,s=ui.toArray(this.node._uiEvents);s.push({name:e,selector:n,listener:r,handler:i}),this.node._uiEvents=s,this.node.addEventListener(e,r)}},uiQuery.fn.off=function(e,t,n){var i;if("function"==typeof t&&(n=t,t=null),void 0!==e){u=ui.toArray(this.node._uiEvents);var a=[];if(t||n){if(ui.isFunction(n))for(s=0;s<u.length;s++)(i=u[s]).name==e&&i.handler==n?this.node.removeEventListener(i.name,i.listener):a.push(i);else if(t)for(s=0;s<u.length;s++)(i=u[s]).name==e&&i.selector==t?this.node.removeEventListener(i.name,i.listener):a.push(i)}else for(s=0;s<u.length;s++)(i=u[s]).name==e?this.node.removeEventListener(i.name,i.listener):a.push(i);this.node._uiEvents=a,u=null}else{for(u=ui.toArray(this.node._uiEvents),s=0;s<u.length;s++)i=u[s],this.node.removeEventListener(i.name,i.listener);for(var r=this.node,o=this.node.childNodes||[],s=0;s<o.length;s++){for(var l=o[s],u=ui.toArray(this.node._uiEvents),c=0;c<u.length;c++)i=u[c],l.removeEventListener(i.name,i.listener);delete l._uiEvents,this.node=l,this.off()}this.node=r}},uiQuery.fn.find=function(e){if("object"==typeof e){var a=e instanceof uiQuery?e.node:e instanceof HTMLElement?e:window.jQuery&&e instanceof jQuery&&e.length?e[0]:null;return uiQuery(a?function e(t){for(var n=0;n<t.length;n++){var i=t[n];if(i==a)return i;var i=e(i.childNodes);if(i)return i}return null}(a.childNodes):null)}return uiQuery(this.node.querySelector(e))},uiQuery.fn.findAll=function(e){return"object"==typeof e?this.find(e):uiQuery(this.node.querySelectorAll(e))},uiQuery.fn.closest=function(e){if("string"==typeof e)return uiQuery(this.node.closest(e));for(var t=this.node,n=uiQuery(e).node;;){if(!t)return uiQuery(null);if(t==n)return uiQuery(t);t=t.parentNode}},uiQuery.fn.is=function(e){if("string"==typeof e)return this.node.matches(e);if("object"==typeof e){if(e instanceof uiQuery)return this.node==e.node;if(window.jQuery&&e instanceof jQuery&&0<e.length)return this.node==e[0]}return this.node==e},uiQuery.fn.clone=function(e){return void 0===e&&(e=!0),uiQuery(this.node.cloneNode(e))},uiQuery.fn.trigger=function(e,t){var n;if(this.node)switch(e){case"click":case"mousedown":case"mouseup":(n=document.createEvent("MouseEvents")).initEvent(e,!0,!0),this.node.dispatchEvent(n);break;case"focus":case"change":case"blur":case"select":(n=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),this.node.dispatchEvent(n);break;case"resize":window.dispatchEvent(new Event("resize"));break;default:this.node.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:ui.toObject(t)}))}},uiQuery.fn.click=function(e,t){void 0!==e||void 0!==t?this.on("click",e,t):this.trigger("click")},uiQuery.fn.resize=function(e,t){void 0!==e||void 0!==t?this.on("resize",e,t):this.trigger("resize")},uiQuery.fn.each=function(e){if("function"==typeof e)for(var t=0;t<this.length;t++)e.call(this[t],t)},uiQuery.fn.eq=function(e){return e<0||e>=this.length?uiQuery(null):uiQuery(this[e])},uiQuery.fn.children=function(e){for(var t=uiQuery(),n=this.node.childNodes,i=0;i<n.length;i++){var a=n[i];3==a.nodeType||e&&!a.matches(e)||t.push(a)}return t.node=t.length?t[0]:null,t},uiQuery.fn.filter=function(e){":visible"==e&&(e=function(){return"none"!=this.style.display});for(var t=[],n=0;n<this.length;n++)e.call(this[n],n)&&t.push(this[n]);for(n=this.length=0;n<t.length;n++)this.push(t[n]);return this},uiQuery.fn.focus=function(){this.node&&this.node.focus&&this.node.focus()},easingFunctions={easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return e<.5?2*e*e:-2*e*e+4*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){--e;return e*e*e+1},easeInOutCubic:function(e){if(e<.5)return 4*e*e*e;e=2*e-2;return.5*e*e*e+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){var t=e-1;return t*t*t*(1-e)+1},easeInOutQuart:function(e){if(e<.5)return 8*e*e*e*e;--e;return-8*e*e*e*e+1},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){--e;return e*e*e*e*e+1},easeInOutQuint:function(e){if(e<.5)return 16*e*e*e*e*e;e=2*e-2;return.5*e*e*e*e*e+1},easeInSine:function(e){return Math.sin((e-1)*(Math.PI/2))+1},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return.5*(1-Math.cos(e*(Math.PI/2)))},easeInExpo:function(e){return 0==e?e:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1==e?e:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0==e||1==e?e:e<.5?.5*Math.pow(2,20*e-10):-.5*Math.pow(2,-20*e+10)+1},easeInCirc:function(e){return 1-Math.sqrt(1-e*e)},easeOutCirc:function(e){return Math.sqrt((2-e)*e)},easeInOutCirc:function(e){return e<.5?.5*(1-Math.sqrt(1-e*e*4)):.5*(Math.sqrt(-(2*e-3)*(2*e-1))+1)},easeInElastic:function(e){return Math.sin(Math.PI/2*13*e)*Math.pow(2,10*(e-1))},easeOutElastic:function(e){return Math.sin(Math.PI/2*-13*(e+1))*Math.pow(2,-10*e)+1},easeInOutElastic:function(e){return e<.5?.5*Math.sin(Math.PI/2*13*(2*e))*Math.pow(2,10*(2*e-1)):.5*(Math.sin(Math.PI/2*-13*(2*e-1+1))*Math.pow(2,-10*(2*e-1))+2)},easeInBack:function(e){return e*e*e-e*Math.sin(e*Math.PI)},easeOutBack:function(e){e=1-e;return 1-(e*e*e-e*Math.sin(e*Math.PI))},easeInOutBack:function(e){var t;return e<.5?.5*((t=2*e)*t*t-t*Math.sin(t*Math.PI)):.5*(1-((t=1-(2*e-1))*t*t-t*Math.sin(t*Math.PI)))+.5},easeInBounce:function(e){return 1-this.easeOutBounce(1-e)},easeOutBounce:function(e){return e<4/11?121*e*e/16:e<8/11?9.075*e*e-9.9*e+3.4:e<.9?4356/361*e*e-35442/1805*e+16061/1805:10.8*e*e-20.52*e+10.72},easeInOutBounce:function(e){return e<.5?.5*this.easeOutBounce(2*e):.5*this.easeOutBounce(2*e-1)+.5}},uiQuery.easing=easingFunctions,uiQuery.fn.animate=function(e,l,u,c){this.stop();var t,f=this,d=null,h={},p={};for(t in e){var n=e[t];switch(t){case"step":ui.isFunction(n)&&(d=n);break;case"margin-left":case"margin-top":case"margin-right":case"margin-bottom":case"padding-left":case"padding-top":case"padding-right":case"padding-bottom":h[t]={start:parseFloat(f.css(t)),end:parseFloat(n),unit:"px"};break;case"opacity":h[t]={start:parseFloat(f.css(t)),end:parseFloat(n),unit:""};break;case"color":case"background-color":p[t]={start:ui.Color(f.css(t)),end:ui.Color(n)};break;case"left":case"top":case"right":case"bottom":case"width":case"height":case"font-size":case"line-height":h[t]={start:parseFloat(f.css(t)),end:parseFloat(n),unit:ui.toString(n).replace(/^\d+/,"")}}}var _=(new Date).getTime();!function e(){var t=(new Date).getTime()-_;var t=ui.ensureRange(t/l,0,1);var n=easingFunctions.hasOwnProperty(u)?easingFunctions[u](t):t;for(var i in h){var a=h[i],r=(a.end-a.start)*n+a.start;f.css(i,r+a.unit)}for(var o in p){var s=p[o],s=ui.Color.mix(s.start,s.end,n,1);f.css(i,s.getRGBAColorString())}d&&d(t);t<1?this._uiAnimationTimer=setTimeout(e,10):(this.stop(),ui.isFunction(c)&&c())}()},uiQuery.fn.stop=function(){this._uiAnimationTimer&&(clearTimeout(this._uiAnimationTimer),delete this._uiAnimationTimer)},uiQuery.fn.fadeIn=function(e,t){var n=this;n.css({display:"block",opacity:0}),n.animate({opacity:1},e,"linear",function(){n.css("opacity",""),ui.isFunction(t)&&t()})},uiQuery.fn.fadeOut=function(e,t){var n=this;n.css({opacity:1}),n.animate({opacity:0},e,"linear",function(){n.css({display:"none",opacity:""}),ui.isFunction(t)&&t()})},uiQuery.fn.fadeTo=function(e,t,n){this.animate({opacity:t},e,"linear",n)},uiQuery.fn.slideDown=function(e,t){var n,i=this;"none"==i.css("display")?(i.css({display:"block",visibility:"hidden",overflow:"hidden"}),n=i.height(),i.css({visibility:"",height:"0px"}),i.animate({height:n+"px"},e,"linear",function(){i.css({height:"",overflow:""}),ui.isFunction(t)&&t()})):ui.isFunction(t)&&t()},uiQuery.fn.slideUp=function(e,t){var n=this;"none"!=n.css("display")?(n.css({height:n.height()+"px",overflow:"hidden"}),n.animate({height:"0px"},e,"linear",function(){n.css({display:"none",height:"",overflow:""}),ui.isFunction(t)&&t()})):ui.isFunction(t)&&t()},uiQuery.fn.index=function(){for(var e=this.node.previousSibling,t=0;e;)e=e.previousSibling,t++;return t},uiQuery.fn.parent=function(){return uiQuery(this.node.parentNode)},uiQuery.fn.val=function(e){return void 0===e?this.node.value:(this.node.value=e,null)},window.jQuery&&(jQuery.fn.findAll=jQuery.fn.find),$=$||uiQuery,ui.toInt=function(e){var t=typeof e;return"number"==t?Math.floor(e):"boolean"==t?e?1:0:"string"==t&&parseInt(e)||0},ui.toFloat=function(e){var t=typeof e;return"number"==t?e:"boolean"==t?e?1:0:"string"==t&&parseFloat(e.replace(/e.*$/i,""))||0},ui.toBoolean=function(e){var t=typeof e;return"number"==t?!!e:"boolean"==t?e:"string"==t&&!!parseInt(e)},ui.isString=function(e){return"string"==typeof e},ui.toString=function(e){var t=typeof e;return"number"==t?e.toString():"boolean"==t?e?"1":"0":"string"==t?e:""},ui.trim=function(e){var t=typeof e;return"number"==t?e.toString():"boolean"==t?e?"1":"0":"string"==t?e.trim():""},ui.isObject=function(e){return"object"==typeof e&&null!==e&&!(e instanceof Array)},ui.isEmptyObject=function(e){if(!ui.isObject(e))return!1;for(var t in e)return!1;return!0},ui.toObject=function(e){return ui.isObject(e)?e:{}},ui.isArray=function(e){return"object"==typeof e&&e instanceof Array},ui.toArray=function(e){return ui.isArray(e)?e:[]},ui.makeArray=function(e){return ui.isArray(e)?e:[e]},ui.isFunction=function(e){return"function"==typeof e},ui.toFunction=function(e){return"function"==typeof e?e:null},ui.arrayHas=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1},ui.arrayRemove=function(e,t){for(var n=0,i=0;i<e.length;){for(;e[i]==t;)i++;n!=i&&(e[n]=e[i]),n++,i++}e.length-=i-n},ui.destroy=function(e){if(ui.isObject(e))for(var t in e)ui.destroy(e[t]),delete e[t];else if(ui.isArray(e)){for(var n=0;n<e.length;n++)ui.destroy(e[n]);e.length=0}},ui.format2Digit=function(e){return 9<e?e:"0"+e},ui.ensureRange=function(e,t,n){return e<t?t:n<e?n:e},ui.setCookie=function(e,t,n){var i,a="";n&&((i=new Date).setTime(i.getTime()+24*n*60*60*1e3),a="; expires="+i.toUTCString()),document.cookie=e+"="+(t||"")+a+"; path=/"},ui.getCookie=function(e){e=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return e?e[2]:null},ui.deleteCookie=function(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"},ui.format2Digit=function(e){return 9<e?e:"0"+e},ui.formatTime=function(e,t){var n=(e=ui.toInt(e))%60,i=(e=Math.floor(e/60))%60;return e=Math.floor(e/60),3600<=t?e+":"+ui.format2Digit(i)+":"+ui.format2Digit(n):i+":"+ui.format2Digit(n)},ui.ensureRange=function(e,t,n){return e<t?t:n<e?n:e},ui.log10=Math.log10||function(e){return Math.log(e)*Math.LOG10E},ui.log2=Math.log2||function(e){return Math.log(e)*Math.LOG2E},ui.hypot=Math.hypot||function(e,t){return Math.sqrt(e*e+t*t)},ui.removeClassByPattern=function(e,t){var n=$(e),t=ui.toString(t);t=(t=t.replace(/[^-\w\d\*]/g,"")).replace(/[*]/g,"[-\\w\\d]+");for(var i=new RegExp("\\b"+t+"\\b");;){var a=ui.toString(n.attr("class"));if(0==a.length)break;a=a.match(i);if(!a)break;n.removeClass(a[0])}},ui.getDeltaFromScrollEvent=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),{x:t,y:n}},ui.extend=function(e,t){for(var n in t)e[n]=t[n]},ui.textToHTML=function(e){return e=ui.toString(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g,"&nbsp; ").replace(/(\r\n|\n\r|\r|\n)/g,"<br />").replace(/\t/g,"&emsp;")},ui.formatThousands=function(e,t){return t=ui.toInt(t),e.toFixed(t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},ui.escapeJavascriptString=function(e){return"'"+(e=(e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\//g,"\\/")).replace(/'/g,"\\'")).replace(/"/g,'\\"')).replace(/\n/g,"\\n"))+"'"},ui.dumpJS=function(e,a){var t,r="";function o(e){for(var t="",n=0;n<e;n++)t+="\t";return t}return a=ui.toInt(a),ui.isArray(e)?function(e){r+="[";for(var t=0;r+=ui.dumpJS(e[t],a),!(++t>=e.length);)r+=", ";r+="]"}(e):ui.isObject(e)?function(e){a++,r+="{\n";for(var t=Object.keys(e),n=0;;){var i=t[n];if(r+=o(a)+ui.escapeJavascriptString(i)+": "+ui.dumpJS(e[i],a),++n>=t.length){r+="\n";break}r+=",\n"}r+=o(--a)+"}"}(e):"string"==typeof e?(t=e,r+=ui.escapeJavascriptString(t)):r+="number"==typeof e?e:"boolean"==typeof e?e?"true":"false":"null",r},ui.dumpPHP=function(e,a){var r="";function o(e){for(var t="",n=0;n<e;n++)t+="\t";return t}function s(e){return'"'+(e=(e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\//g,"\\/")).replace(/'/g,"\\'")).replace(/"/g,'\\"')).replace(/\n/g,"\\n"))+'"'}return a=ui.toInt(a),ui.isArray(e)?function(e){r+="array(";for(var t=0;r+=ui.dumpPHP(e[t],a),!(++t>=e.length);)r+=", ";r+=")"}(e):ui.isObject(e)?function(e){a++,r+="array(\n";for(var t=Object.keys(e),n=0;;){var i=t[n];if(r+=o(a)+s(i)+" => "+ui.dumpPHP(e[i],a),++n>=t.length){r+="\n";break}r+=",\n"}r+=o(--a)+")"}(e):r+="string"==typeof e?s(e):"number"==typeof e?e:"boolean"==typeof e?e?"true":"false":"null",r},ui.getProp=function(e,t){var n;if(!e)return e;if("string"!=typeof t||0==t.length)return e;if("."==t[0])return ui.getProp(e,t.substring(1,t.length));if(n=t.match(/^([-_a-zA-Z0-9]+)(.*)$/)){var i=n[1];return ui.getProp(e[i],n[2])}if(n=t.match(/^\[([0-9]+)\](.*)$/)){i=ui.toInt(n[1]);return ui.getProp(e[i],n[2])}if(n=t.match(/^\[([-_a-zA-Z0-9]+)=([-_a-zA-Z0-9]+)\](.*)$/)){e=ui.toArray(e);for(var a=ui.toString(n[1]),r=ui.toString(n[2]),o=0;o<e.length;o++)if(ui.toString(e[o][a])==r)return ui.getProp(e[o],n[3])}else if(n=t.match(/^\[([-_a-zA-Z0-9]+)=["]((?:[\\"]|[^"])*)["]\](.*)$/)){var s=ui.toString(n[1]),l=ui.toString(n[2]).replace(/\\([\\"])/g,"$1");for(o=0;o<e.length;o++)if(ui.toString(e[o][s])==l)return ui.getProp(e[o],n[3])}else;},ui.setProp=function(e,t,n){var i;if(0==t.length)return n;if("."==t[0])return ui.setProp(e,t.substring(1,t.length),n);if(a=t.match(/^([-_a-zA-Z0-9]+)(.*)$/)){e=ui.toObject(e);var a,r=a[1],o=a[2];if(a=o.match(/^\[([-_a-zA-Z0-9]+)[=]([-_a-zA-Z0-9]+)\](.*)$/)){var s=ui.toString(a[1]),l=ui.toString(a[2]);for(e[r]=ui.toArray(e[r]),i=0;i<e[r].length;i++)if(ui.toString(e[r][i][s])==l)return e[r][i]=ui.setProp(e[r][i],a[3],n),e;return e}if(a=o.match(/^\[([-_a-zA-Z0-9]+)[=]["]((?:[\\"]|[^"])*)["]\](.*)$/)){var u=ui.toString(a[1]),c=ui.toString(a[2]).replace(/\\([\\"])/g,"$1");for(e[r]=ui.toArray(e[r]),i=0;i<e[r].length;i++)if(ui.toString(e[r][i][u])==c)return e[r][i]=ui.setProp(e[r][i],a[3],n),e;return e}return e[r]=ui.toObject(e[r]),void 0===n&&0==o.length?delete e[r]:e[r]=ui.setProp(e[r],o,n),e}if(a=t.match(/^\[([0-9]+)\](.*)$/)){e=ui.toArray(e);t=ui.toInt(a[1]);return e[t]=ui.setProp(e[t],a[2],n),e}return e},ui.escapeProp=function(e){return ui.toString(e).replace(/["\\]/g,"\\$&")},ui.validateEmail=function(e){return/^[-_\w\d]+([\.][-_\w\d]+)*@[-\w\d]+([\.]\w{2,})+$/.test(ui.toString(e))},ui.linkify=function(e){return e=(e=ui.textToHTML(e)).replace(/\b((http:\/\/|https:\/\/|\/\/|www\.)([-a-zA-Z0-9.]+\.)+[a-z0-9]{2,}[-a-zA-Z0-9@:%_\+.~#?&//=;]*)(\s|$|<)/gi,'<a href="$1" target="_blank">$1</a>$4')},ui.stripHttpAndWwwFromUrl=function(e){return e=(e=(e=ui.trim(e)).replace(/^(http:\/\/|https:\/\/|\/\/)/,"")).replace(/^www./,"")},ui.selectElementText=function(e){var t,n=$(e)[0];document.body.createTextRange?((t=document.body.createTextRange()).moveToElementText(n),t.select()):window.getSelection&&(e=window.getSelection(),(t=document.createRange()).selectNodeContents(n),e.removeAllRanges(),e.addRange(t))},ui.scrollToElement=function(e,t,n){for(var i,a,r,o,s,l,u,c,f,d,h,p,_,v,g,m,b=$(e),w=b.parent();w[0]!=document.body;){var y=w.css("overflow");"auto"!=y&&"scroll"!=y&&"hidden"!=y||(a=b,f=c=u=l=s=void(o=r=0),c=$(i=w),f=$(a),0!=c.length&&0!=f.length&&(r=ui.toInt(r),o=ui.toInt(o),s=f.offset().top,l=c.offset().top,u=c.scrollTop(),i=c[0].clientHeight,a=f.outerHeight(),(f=s-l)<r&&c.scrollTop(u+f-r),i<f+o+a&&c.scrollTop(u+s-l-i+a+o))),w=w.parent()}h=t,p=n,0!=(m=$(d=b)).length&&(h=ui.toInt(h),p=ui.toInt(p),_=$(window),v=_.scrollTop(),g=m.offset().top-v,d=_.innerHeight(),m=m.outerHeight(),g<h&&_.scrollTop(v+g-h),d<g+p+m&&_.scrollTop(v+g-d+m+p))},ui.isVisible=function(e){var t=$(e);if(0==t.length)return!1;if("none"==f(t[0],"display")||"hidden"==f(t[0],"visibility")||"0"==f(t[0],"opacity"))return!1;var n=t.offset().top,i=t.outerHeight(),a=$(window),e=a.scrollTop();if(n+i<e)return!1;if(n-e>=a.innerHeight())return!1;for(var r,o,s,l,u=t[0].parentNode;u&&u!=document.body;){var c=f(u,"overflow");if("auto"==c||"scroll"==c||"hidden"==c)if(!(r=n,o=i,l=void 0,(s=(l=$(s=u)).offset().top)<r+o&&r-s<l[0].clientHeight))return!1;u=u.parentNode}function f(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)}return!0},ui.download=function(e,t,n){t=t||"download.txt",n=n||"text/plain";e=new Blob([e],{type:n}),n=window.URL.createObjectURL(e),e=document.createElement("a");e.href=n,e.setAttribute("download",t),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(e.href)},extras={},extras.randSeed=location.hostname.charCodeAt(0),extras.randMax=1073741823,extras.rand=function(){return extras.randSeed=22695477*extras.randSeed+1&1073741823},extras.srand=function(e){extras.randSeed=e},extras._randSeed=location.hostname.charCodeAt(0),extras._rand=function(){return extras._randSeed=22695477*extras._randSeed+1&1073741823},hg=[],$?($(ig),$(window).on("resize",ig)):(window.addEventListener("load",ig,!1),window.addEventListener("resize",ig,!1)),ui.addResizeHandler=function(e,t,n){hg.push({node:$?$(e)[0]:e,handler:t}),n&&t()},ui.removeResizeHandler=function(e){for(var t=[],n=$(e)[0],i=0;i<hg.length;i++){var a=hg[i];a.node!=n&&t.push(a)}hg=t},xg=[],$(window).on("scroll uiScroll",yg),ui.addScrollHandler=function(e,t){xg.push({node:$?$(e)[0]:e,handler:t})},ui.removeScrollHandler=function(e){for(var t=[],n=$?$(e)[0]:e,i=0;i<xg.length;i++){var a=xg[i];a.node!=n&&t.push(a)}xg=t},ui.registerScrollEvent=function(e){var t=$?$(e)[0]:e,n=[];if(t){var i=window.getComputedStyle(t,null).getPropertyValue("overflow");for("auto"!=i&&"scroll"!=i&&"hidden"!=i||a(t),t=t.parentNode;t&&t!=document;)"auto"!=(i=window.getComputedStyle(t,null).getPropertyValue("overflow"))&&"scroll"!=i||a(t),t=t.parentNode}function a(e){e._uiScrollEventBinded?e._uiScrollEventBinded++:($(e).on("scroll",yg),e._uiScrollEventBinded=1,n.push(e))}return{unregister:function(){for(var e=0;e<n.length;e++){var t=n[e];t._uiScrollEventBinded&&(t._uiScrollEventBinded--,0==t._uiScrollEventBinded&&($?$(t).off("scroll",yg):t.removeEventListener("scroll",yg),delete t._uiScrollEventBinded))}}}},Wg=[],Xg=$(document),Xg.on("mousedown",function(e){if(e.target==document.documentElement&&e.pageX>document.documentElement.clientWidth)return;eh(e.target,!1)}),Xg.on("click",function(e){eh(e.target,!0)}),ui.addPopup=function(e,t,n,i){_g(e=$?$(e)[0]:e),(t=ui.makeArray(t)).push(e),Wg.push({node:e,uiExclude:t,callback:n,closeOnClick:ui.toBoolean(i)})},ui.removePopup=_g,ui.closeAllPopups=function(){for(var e=0,t=Wg.length;e<t;e++)ah(Wg[e]);Wg=[]},Lh=!1,Mh=null,Nh=null,ui.dragAndDrop=function(e){var t,n,i,a=e.event.originalEvent||e.event;function r(e){e=e.originalEvent||e;t.pageX=e.touches[0].pageX,t.pageY=e.touches[0].pageY,t.processDragging&&t.processDragging(t)}e.isTouchDragging=!!a.touches,e.isTouchDragging?(t=e,Nh||((n=t.event).preventDefault(),delete t.event,(i=$((Nh=t).owner)).on("touchmove",r),i.on("touchend",function e(){t.stopDragging&&t.stopDragging(t);i.off("touchmove",r);i.off("touchend",e);Nh=null}),n=n.originalEvent||n,t.pageX=n.touches[0].pageX,t.pageY=n.touches[0].pageY,t.startDragging&&t.startDragging(t))):1!=(n=(a=e).event).which||Mh||(n.preventDefault(),delete a.event,function(){var e;Lh||((e=$(document)).on("mousemove",function(e){Mh&&Mh.processDragging&&(Mh.pageX=e.pageX,Mh.pageY=e.pageY,Mh.processDragging(Mh))}),e.on("mouseup",function(e){Mh&&(Mh.stopDragging&&(Mh.pageX=e.pageX,Mh.pageY=e.pageY,Mh.stopDragging(Mh)),Mh._overlayJQ.remove(),Mh=null)}),Lh=!0)}(),Mh=a,e=$('<div style="position: fixed; left: 0; top: 0; width: 100%; height: 100%; z-index: 9999; cursor: move; cursor: grab;">'),$(document.body).append(e),a._overlayJQ=e,a.hasOwnProperty("cursor")&&e.css("cursor",a.cursor),a.hasOwnProperty("overlayClass")&&e.addClass(a.overlayClass),a.startDragging&&(a.pageX=n.pageX,a.pageY=n.pageY,a.startDragging(a)))},ui.fn.dragSort=function(e){var s=$(this),t=s.data("UIDragSort");if(t)return e&&t.update(e),t;var i,a,r,l,u,c,f,d,h,p,_,v,g,m,b,w,t=(e=ui.toObject(e)).dragPlaceholderSelector,y=!1;function n(e){(e=ui.toObject(e)).hasOwnProperty("disabled")&&(y=e.disabled),e.hasOwnProperty("dragSortHandler")&&(i=e.dragSortHandler)}n(e),s.on("mousedown touchstart",t,function(e){if(!y){var t=$(window);for(f=$(this);!f.parent().is(s);)f=f.parent();ui.dragAndDrop({event:e,owner:this,cursor:$(this).css("cursor"),startDragging:function(e){l=!1,d=null,s.children().each(function(){($(this).find(f).length||$(this).is(f))&&(d=$(this))}),d&&(d.index(),a=e.pageX,r=e.pageY,b=t.scrollLeft(),w=t.scrollTop())},processDragging:function(e){d&&(u=e.pageX,c=e.pageY,!l&&(1<Math.abs(a-u)||1<Math.abs(r-c))&&function(){switch(l=!0,m=$('<div class="ui-drag-sort-overlay non-selectable">   <div class="ui-drag-sort-item-box">       <div class="ui-drag-sort-block-item-container"></div>       <ul class="ui-drag-sort-list-item-container"></ul>       <table class="ui-drag-sort-table-row-container"></table>   </div></div>'),$(document.body).append(m),h=d.is("li")?"list-item":d.is("tr")?"table-row":"block-item",(p=m.find(".ui-drag-sort-item-box")).css({width:d.outerWidth()+"px",height:d.outerHeight()+"px"}),_=a-d.offset().left,v=r-d.offset().top,h){case"block-item":n(".ui-drag-sort-block-item-container");break;case"list-item":n(".ui-drag-sort-list-item-container");break;case"table-row":n(".ui-drag-sort-table-row-container")}(g=d.clone()).addClass("ui-drag-sort-dummy-item"),g.outerHeight(d.outerHeight()),g.insertAfter(d),d.addClass("ui-hidden")}(),l&&function(){var e=u-_-b,t=c-v-w;p.css({left:e+"px",top:t+"px"});var n,i=c-v+p.outerHeight()/2,a=null,r=!1;s.children().each(function(){var e=$(this);e.is(g)?r=!0:(n=r?e.offset().top:e.offset().top+e.outerHeight(),i<n&&!a&&(a=e))}),g.detach(),a?g.insertBefore(a):s.append(g)}())},stopDragging:function(){m&&(m.remove(),m=null),g&&(i&&i(),d.detach().insertAfter(g),g.remove(),d.removeClass("ui-hidden"),g=null),l=!1}})}function n(e){var t=m.find(e);t.show(),t.append(function e(t,n){1==t[0].nodeType&&n.css(o(t));var i=t[0].childNodes;var a=n[0].childNodes;for(var r=0;r<i.length;r++)e($(i[r]),$(a[r]));return n}(d,d.clone())),"table-row"==h&&(e=s.is("table")?s:s.closest("table"),t.css("table-layout",e.css("table-layout")))}function o(e){for(var t=["font-family","font-size","font-weight","font-style","color","text-transform","text-decoration","letter-spacing","word-spacing","line-height","text-align","vertical-align","direction","background-color","background-image","background-repeat","background-position","background-size","background-attachment","opacity","width","height","top","right","bottom","left","margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","position","display","visibility","z-index","overflow-x","overflow-y","white-space","float","clear","cursor","list-style-image","list-style-position","list-style-type","marker-offset"],n={},i=0;i<t.length;i++){var a=t[i];!e.is("td")||"border-top-width"!=a&&"border-left-width"!=a?n[a]=e.css(a):n[a]=e.css("border-bottom-width")}return n}});t={update:n};return s.data("UIDragSort",t),t},hj=!1,ij={},ui.setStyles=function(e,t){ui.isArray(e)&&(e=e.join(", ")),t?ij[e]=t:delete ij[e]},ui.buildStyles=function(){hj||(jj=$('<style type="text/css"></style>'),$(document.body).prepend(jj),hj=!0);var e,t="";for(e in ij){t+=e+" { ";var n,i=ij[e];for(n in i)t+=n+": "+i[n]+"; ";t+="}\n"}jj.html(t)},tj=null,ui.showFileDialog=function(e,t){tj&&(tj.off("change"),tj.remove()),tj=$('<input type="file" style="display: none" />'),$(document.body).append(tj),(e=ui.toObject(e)).hasOwnProperty("accept")&&tj.attr("accept",ui.toString(ui.toArray(e.accept).join(", ")));var n=ui.toBoolean(e.multiple);n&&tj.attr("multiple","multiple"),tj.on("change",function(){ui.isFunction(t)&&this.files&&t(n?this.files:this.files[0])}),tj.click()},ui.fn.dropFilesArea=function(e){var n=$(this),t=n.data("UIDropFilesArea");if(t)return ui.isObject(e)&&t.update(e),t;var i=null,a="Drop file(s) here",r=null,o=!1;function s(e){(e=ui.toObject(e)).hasOwnProperty("title")&&(a=ui.trim(e.title)),e.hasOwnProperty("onDropFiles")&&(r=e.onDropFiles),e.hasOwnProperty("disabled")&&(o=ui.toBoolean(e.disabled))}function l(e){var t;o||(e.preventDefault(),e.stopPropagation(),i||(i=$('<div class="ui-drop-files-area ui-non-selectable">\t<div class="ui-drop-files-area-placeholder">\t\t<div class="ui-drop-files-area-placeholder-title"></div>\t</div></div>'),n.append(i),t=i.find(".ui-drop-files-area-placeholder"),i.find(".ui-drop-files-area-placeholder-title").text(a),e=(i.height()-t.height())/2,t.css("top",e+"px"),i.on("dragenter",l),i.on("dragover",l),i.on("dragleave",u),i.on("drop",c)))}function u(e){e.preventDefault(),e.stopPropagation(),i&&(i.remove(),i=null)}function c(e){var t=e.originalEvent||e;ui.isFunction(r)&&r(t.dataTransfer.files),u(e)}n.on("dragenter",l),n.on("dragover",l),n.on("drop",c),s(e);e={update:s,destroy:function(){n.off("dragenter"),n.off("dragover"),n.off("drop"),delete n[0].uiInterface}};return n.data("UIDropFilesArea",e),n[0].uiInterface=e},ui.BinaryReader=function(e){var n=new Uint8Array(e),i=0,a=0,r=0;function o(e){r<e&&(a|=n[i++]<<r,r+=8);var t=a&(1<<e)-1;return a>>=e,r-=e,t}function s(e){for(var t=0;0<e;){var n=e%8;0==n&&(n=8),t|=o(n)<<e-n,e-=n}return t}return{eof:function(){return i>=n.length&&r<=0},readNumber:s,readInteger:function(e){var t=e%8;0==t&&(t=8);var n=o(t-1),i=o(1);return t<e&&(n=n<<e-t|s(e-t)),i&&(n=-1-(n^(1<<e-1)-1)),n},readString:function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(s(8));return t}}},ui.BinaryWriter=function(){var n=[],i=0,a=0,r=0;function o(e,t){a|=e<<r,8<=(r+=t)&&(n[i++]=255&a,a>>=8,r-=8)}function s(e,t){for(;0<t;){var n=t%8;0==n&&(n=8),o(e>>t-n,n),e&=(1<<t-n)-1,t-=n}}return{writeNumber:s,writeInteger:function(e,t){var n=t%8;0==n&&(n=8);var i=0;e<0&&(e=-(i=1)-(e^(1<<t-1)-1)),o(e>>t-n,n-1),o(i,1),n<t&&s(e&(1<<t-n)-1,t-n)},writeString:function(e){for(var t=0;t<e.length;t++)o(e.charCodeAt(t),8)},getData:function(){return 0<r&&(n[i++]=a),new Uint8Array(n)}}},ui.fullScreenMode={},Ik=ui.fullScreenMode,Jk=!1,Kk=null,Lk=null,Ik.enter=function(e,t){0==(e=$(e)).length||Kk||(Jk||(document.addEventListener("fullscreenchange",Nk),document.addEventListener("webkitfullscreenchange",Nk),document.addEventListener("mozfullscreenchange",Nk),document.addEventListener("MSFullscreenChange",Nk),Jk=!0),Kk=e[0],Lk=t,Kk.requestFullscreen?Kk.requestFullscreen():Kk.mozRequestFullScreen?Kk.mozRequestFullScreen():Kk.webkitRequestFullscreen?Kk.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):Kk.msRequestFullscreen&&Kk.msRequestFullscreen())},Ik.entered=function(){return null!=Kk},Ik.exit=function(){Kk&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),Kk=null)},Uk={transparent:"rgba(0, 0, 0, 0)",aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4","indianred ":"cd5c5c","indigo ":"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},Wk.prototype=Vk.fn=Vk.prototype={constructor:Vk,r:0,g:0,b:0,a:0},(ui.Color=Vk).fn.setRGB=function(e,t,n){this.r=Xk(e),this.g=Xk(t),this.b=Xk(n),this.a=255},Vk.fn.setRGBA=function(e,t,n,i){this.r=Xk(e),this.g=Xk(t),this.b=Xk(n),this.a=Xk(i)},Vk.fn.setWebColor=function(e){var t;return e=ui.trim(e).toLowerCase(),Uk.hasOwnProperty(e)?this.setWebColor(Uk[e]):(t=e.match(/^rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)$/))?this.setRGB(t[1],t[2],t[3]):(t=e.match(/^rgba\s*\(\s*(\d+),\s*(\d+),\s*(\d+),\s*(\d+(:?\.\d+)?)\s*\)$/))?this.setRGBA(t[1],t[2],t[3],255*ui.toFloat(t[4])):(t=e.match(/^[#]?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/))?this.setRGB(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)):null},Vk.fn.assign=function(e){this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a},Vk.fn.equalTo=function(e){return this.r==e.r&&this.g==e.g&&this.b==e.b&&this.a==e.a},Vk.fn.getRGBColorString=function(){return"rgb("+Math.floor(this.r)+", "+Math.floor(this.g)+", "+Math.floor(this.b)+")"},Vk.fn.getRGBAColorString=function(){return"rgba("+Math.floor(this.r)+", "+Math.floor(this.g)+", "+Math.floor(this.b)+", "+(this.a/255).toFixed(3)+")"},Vk.fn.getColorString=function(){return 255==Math.floor(this.a)?this.getRGBColorString(this):this.getRGBAColorString(this)},Vk.fn.getColorNumber=function(){return Yk(this.r,2)+Yk(this.g,2)+Yk(this.b,2)},Vk.fn.getHSL=function(){var e=Math.min(this.r,this.g,this.b),t=Math.max(this.r,this.g,this.b),n=t!=e?((n=this.r==t?42.5*(this.g-this.b)/(t-e):this.g==t?85+42.5*(this.b-this.r)/(t-e):170+42.5*(this.r-this.g)/(t-e))+256)%256:0,i=t+e!=0?255*(t-e)/(t+e):255;return{h:n,s:i,l:(t+e)/2}},Vk.fn.setHSL=function(e){var t=Xk(e.h),n=Xk(e.s),i=Xk(e.l),e=Vk.getHueColorByIndex(t,255),t=[Vk(0,0,0),e,Vk(255,255,255)],e=Vk.multiMix(t,i,255);this.assign(Vk.mix(Vk(128,128,128),e,n,255))},Vk.fn.getHSV=function(){var e=Math.min(this.r,this.g,this.b),t=Math.max(this.r,this.g,this.b),n=t!=e?((n=this.r==t?42.5*(this.g-this.b)/(t-e):this.g==t?85+42.5*(this.b-this.r)/(t-e):170+42.5*(this.r-this.g)/(t-e))+256)%256:0,e=0!=t?255-255*e/t:0;return{h:n,s:e,v:t}},Vk.fn.setHSV=function(e){var t=Xk(e.h),n=Xk(e.s),e=Xk(e.v),t=Vk.getHueColorByIndex(t,255),t=Vk.mix(Vk(255,255,255),t,n,255);this.assign(Vk.mix(Vk(0,0,0),t,e,255))},Vk.getHueColorByIndex=function(e,t){var n=[Vk(255,0,0),Vk(255,255,0),Vk(0,255,0),Vk(0,255,255),Vk(0,0,255),Vk(255,0,255),Vk(255,0,0)];return Vk.multiMix(n,e,t)},Vk.mix=function(e,t,n,i){return Vk(Zk(e.r,t.r,n,i),Zk(e.g,t.g,n,i),Zk(e.b,t.b,n,i),Zk(e.a,t.a,n,i))},Vk.multiMix=function(e,t,n){t<0&&(t=0),n<t&&(t=n);var i=Math.ceil((n+1)/(e.length-1)),n=Math.floor(t/i),t=t%i;return Vk.mix(e[n],e[n+1],t,i)},ui.initGraph=function(e,i,a){e="string"==typeof e?$?$(e)[0]:document.querySelector(e):e instanceof $?e[0]:e,void 0!==i?(e.width=i,e.height=a):(i=e.width,a=e.height);var t=e.getContext("2d"),n=null,r=null;0<i&&0<a&&(n=t.getImageData(0,0,e.width,e.height),r=n.data);for(var o=[],s=0;s<a;s++)o.push(s*i*4);var l=c(0,0,0);function d(e,t,n){e<0||i<=e||t<0||a<=t||(e=o[t]+(e<<2),r[e]=n.r,r[e+1]=n.g,r[e+2]=n.b,r[e+3]=n.a)}function u(e,t,n,i){return{r:e,g:t,b:n,a:i}}function c(e,t,n){return{r:e,g:t,b:n,a:255}}return{width:i,height:a,ctx:t,clear:function(){for(var e=0;e<r.length;e++)r[e]=0},getPixel:function(e,t){return e<0||i<=e||t<0||a<=t?l:(e=o[t]+(e<<2),u(r[e],r[e+1],r[e+2],r[e+3]))},putPixel:d,line:function(e,t,n,i,a){e=Math.floor(e),t=Math.floor(t),n=Math.floor(n),i=Math.floor(i);var r=Math.abs(e-n),o=Math.abs(t-i),s=Math.max(r,o);if(d(e,t,a),0!=s)for(var l=Math.floor((n-e<<16)/s),u=Math.floor((i-t<<16)/s),c=e<<16,f=t<<16;s;)d((c+=l)>>16,(f+=u)>>16,a),s--},fillRect:function(e,t,n,i,a){for(var r=Math.floor(e),o=Math.floor(t),s=Math.floor(e+n),l=Math.floor(t+i),u=o;u<l;u++)for(var c=r;c<s;c++)d(c,u,a)},redraw:function(){n&&t.putImageData(n,0,0)},RGB:c,RGBA:u,webColor2RGB:function(e){return void 0!==ui.Color?ui.Color(e):(t=(e=ui.toString(e).toLowerCase()).match(/^[#]?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/))?c(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)):(t=e.match(/^rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)$/))?c(t[1],t[2],t[3]):(t=e.match(/^rgba\s*\(\s*(\d+),\s*(\d+),\s*(\d+),\s*(\d+(?:\.\d+)?)\s*\)$/))?u(t[1],t[2],t[3],255*ui.toFloat(t[4])):u(0,0,0,1);var t},setErrorColor:function(e){l=e}}},ui.screenLocker={},ln=ui.screenLocker,nn=0,on=0,pn=0,qn=[],ln.show=function(e){switch(0==nn&&0==on&&0==pn&&(mn=$('<div class="ui-screen-locker ui-stuff">\t<div class="ui-screen-locker-state-inactive"></div>\t<div class="ui-screen-locker-state-busy"></div>\t<div class="ui-screen-locker-state-loading">\t\t<div class="ui-screen-locker-state-loading-spinner"></div>\t</div></div>'),$(document.body).append(mn),mn.on("click",function(e){e.preventDefault(),e.stopPropagation()}),rn=mn.find(".ui-screen-locker-state-loading"),sn=mn.find(".ui-screen-locker-state-busy"),tn=mn.find(".ui-screen-locker-state-inactive")),"busy"!=e&&"locked"!=e&&(e="loading"),qn.push(e),e){case"loading":0==nn&&(rn.stop(),rn.css({display:"block",opacity:0}),rn.fadeTo(400,.5)),nn++;break;case"busy":0==on&&sn.show(),on++;break;case"locked":0==pn&&tn.show(),pn++}},ln.hide=function(){switch(qn.pop()){case"loading":0==--nn&&(rn.stop(),rn.fadeTo(200,0,function(){rn.hide(),vn()}));break;case"busy":0==--on&&(sn.hide(),vn());break;case"locked":0==--pn&&(tn.hide(),vn())}},$(function(){var h=$(window),e=$(document),p="style-generic theme-default delay-200 animate-100";function t(n){if(window.PointerEvent){var i=n.attr("data-ui-inplace-hint");if(function(e,t){var n=$("<div>");$(document.body).append(n),n.css({position:"fixed",left:"-9999px",top:"-9999px","word-break":"break-word","line-height":"normal","font-family":e.css("font-family"),"font-size":e.css("font-size"),"font-weight":e.css("font-weight"),"font-style":e.css("font-style"),"text-transform":e.css("text-transform"),"text-decoration":e.css("text-decoration"),"letter-spacing":e.css("letter-spacing"),"word-spacing":e.css("word-spacing"),border:e.css("border"),"box-sizing":e.css("box-sizing")}),n.html(e.html());e=n.height();n.width(t+1);t=n.height();return n.remove(),e<t}(n,n.outerWidth())||""!=i){var a=$('<div class="ui-inplace-hint ui-stuff">\t<div class="ui-inplace-hint-frame"></div>\t<div class="ui-inplace-hint-content"></div></div>');$(document.body).append(a);var r=a.find(".ui-inplace-hint-content"),e=p+" "+ui.toString(n.attr("data-ui-inplace-hint-skin"));""==e&&(e=p);for(var t=e.split(" "),o="",s="",l=0,u=0,c=0;c<t.length;c++){var f=t[c];"delay-"==f.substr(0,6)?l=ui.toInt(f.substr(6)):"animate-"==f.substr(0,8)?u=ui.toInt(f.substr(8)):"style-"==f.substr(0,6)?o=f:"theme-"==f.substr(0,6)&&(s=f)}a.addClass("ui-inplace-hint-skin-"+o),a.addClass("ui-inplace-hint-skin-"+s);var d=setTimeout(function(){d=null,0<u?a.fadeIn(u):a.show();""==i?r.html(n.html()):r.text(i);!function(e){r.css({"font-family":e.css("font-family"),"font-size":e.css("font-size"),"font-weight":e.css("font-weight"),"font-style":e.css("font-style"),"text-transform":e.css("text-transform"),"text-decoration":e.css("text-decoration"),"letter-spacing":e.css("letter-spacing"),"word-spacing":e.css("word-spacing")})}(n);var e=n.offset(),t=e.left+ui.toInt(n.css("padding-left"))-h.scrollLeft(),e=e.top+ui.toInt(n.css("padding-top"))+function(e){var t=$("<div>");$(document.body).append(t),t.css({position:"fixed",left:"-9999px",top:"-9999px","font-family":e.css("font-family"),"font-size":e.css("font-size"),"line-height":"normal","white-space":"nowrap"});var n=e.clone();t.append(n);e=t.height();n.css("line-height","normal");n=t.height();return t.remove(),(e-n)/2}(n)-h.scrollTop();a.css({left:t+"px",top:e+"px"})},l);n.data("UIInplaceHint",{destroy:function(){d&&clearTimeout(d),a.remove()}})}}}e.on("mouseenter","[data-ui-inplace-hint]",function(){t($(this))}),e.on("mouseleave","[data-ui-inplace-hint]",function(){var e=$(this).data("UIInplaceHint");e&&e.destroy()})}),no={relX:0,relY:-16,skinAsPopup:"style-generic theme-generic to-bottom align-right animation-islide-150-150",skinAsWindow:"style-generic theme-maroon animation-slide-150-150"},oo=$(window),po=8,qo=null,ui.setError=function(e,t){vo(e,ui.textToHTML(t))},ui.setErrorHTML=vo,ui.setErrorDefaults=function(e){e.hasOwnProperty("relX")&&(no.relX=ui.toInt(e.relX)),e.hasOwnProperty("relY")&&(no.relY=ui.toInt(e.relY)),e.hasOwnProperty("skinAsPopup")&&(no.skinAsPopup=ui.toString(e.skinAsPopup)),e.hasOwnProperty("skinAsWindow")&&(no.skinAsWindow=ui.toString(e.skinAsWindow))},ui.setErrorTooltipStyle=function(e,t){var n,i,a={},r={},o={},s={},l={},u={},c={},f={},d={},h={};t.hasOwnProperty("hPadding")&&(n=ui.toInt(t.hPadding),a["padding-left"]=n+"px",a["padding-right"]=n+"px"),t.hasOwnProperty("vPadding")&&(i=ui.toInt(t.vPadding),a["padding-top"]=i+"px",a["padding-bottom"]=i+"px"),t.hasOwnProperty("borderRadius")&&(r["border-radius"]=ui.toInt(t.borderRadius)+"px"),t.hasOwnProperty("borderWidth")&&(i=ui.toInt(t.borderWidth),r["border-width"]=i+"px !important",i=-(32-i)+"px",c["margin-bottom"]=i,f["margin-top"]=i,d["margin-left"]=i,h["margin-right"]=i),t.hasOwnProperty("fontSize")&&(o["font-size"]=ui.toInt(t.fontSize)+"px"),t.hasOwnProperty("fontWeight")&&(o["font-weight"]=ui.toString(t.fontWeight)),t.hasOwnProperty("helperReservedSize")&&(s.height=ui.toInt(t.helperReservedSize)+"px"),t.hasOwnProperty("helperSize")&&(t=ui.toInt(t.helperSize),l.width=2*t+"px",l.height=t+"px",u.width=t+"px",u.height=2*t+"px"),ui.isEmptyObject(a)||ui.setStyles(".ui-error-tooltip.ui-error-tooltip-skin-style-"+e,a),ui.isEmptyObject(r)||ui.setStyles(".ui-error-tooltip.ui-error-tooltip-skin-style-"+e+" .ui-error-tooltip-background",r),ui.isEmptyObject(o)||ui.setStyles(".ui-error-tooltip.ui-error-tooltip-skin-style-"+e+" .ui-error-tooltip-text",o),ui.isEmptyObject(s)||ui.setStyles(".ui-error-tooltip.ui-error-tooltip-skin-style-"+e+" .ui-error-tooltip-helper",s),ui.isEmptyObject(l)||ui.setStyles([".ui-error-tooltip.ui-error-tooltip-skin-style-"+e+".ui-error-tooltip-to-top .ui-error-tooltip-helper",".ui-error-tooltip.ui-error-tooltip-skin-style-"+e+".ui-error-tooltip-to-bottom .ui-error-tooltip-helper"],l),ui.isEmptyObject(u)||ui.setStyles([".ui-error-tooltip.ui-error-tooltip-skin-style-"+e+".ui-error-tooltip-to-right .ui-error-tooltip-helper",".ui-error-tooltip.ui-error-tooltip-skin-style-"+e+".ui-error-tooltip-to-left .ui-error-tooltip-helper"],u),ui.isEmptyObject(c)||ui.setStyles(".ui-error-tooltip.ui-error-tooltip-skin-style-"+e+".ui-error-tooltip-to-top .ui-error-tooltip-helper-fg",c),ui.isEmptyObject(f)||ui.setStyles(".ui-error-tooltip.ui-error-tooltip-skin-style-"+e+".ui-error-tooltip-to-bottom .ui-error-tooltip-helper-fg",f),ui.isEmptyObject(d)||ui.setStyles(".ui-error-tooltip.ui-error-tooltip-skin-style-"+e+".ui-error-tooltip-to-right .ui-error-tooltip-helper-fg",d),ui.isEmptyObject(h)||ui.setStyles(".ui-error-tooltip.ui-error-tooltip-skin-style-"+e+".ui-error-tooltip-to-left .ui-error-tooltip-helper-fg",h)},ui.setErrorTooltipTheme=function(e,t){var n,i={},a={},r={},o={};t.hasOwnProperty("backgroundColor")&&(n=ui.trim(t.backgroundColor),i["background-color"]=n,a["border-color"]=n),t.hasOwnProperty("borderColor")&&(n=ui.toString(t.borderColor),i["border-color"]=n,r["border-color"]=n),t.hasOwnProperty("textColor")&&(o.color=ui.toString(t.textColor)),ui.isEmptyObject(i)||ui.setStyles(".ui-error-tooltip.ui-error-tooltip-skin-theme-"+e+" .ui-error-tooltip-background",i),ui.isEmptyObject(o)||ui.setStyles(".ui-error-tooltip.ui-error-tooltip-skin-theme-"+e+" .ui-error-tooltip-text",o),ui.isEmptyObject(a)||ui.setStyles(".ui-error-tooltip.ui-error-tooltip-skin-theme-"+e+" .ui-error-tooltip-helper-fg",a),ui.isEmptyObject(r)||ui.setStyles(".ui-error-tooltip.ui-error-tooltip-skin-theme-"+e+" .ui-error-tooltip-helper-bg",r)},ui.fn.ScrollBox=function(e){var o=$(this),t=o.data("UIScrollBox");if(t)return t.update(e),t;o.addClass("ui-scroll-box"),o.addClass("ui-stuff");var s=$(window),l=null,u=null,c=null;!function(){var e,t=o[0].childNodes,n=[];for(e=0;e<t.length;e++)n.push(t[e]);for(l=$('<div class="ui-scroll-content"></div>'),o.append(l),u=$('<div class="ui-v-area">\t<div class="ui-v-rail"></div>\t<div class="ui-v-bar-area">\t\t<div class="ui-v-bar"></div>\t</div></div>'),o.append(u),c=$('<div class="ui-h-area">\t<div class="ui-h-rail"></div>\t<div class="ui-h-bar-area">\t\t<div class="ui-h-bar"></div>\t</div></div>'),o.append(c),e=0;e<n.length;e++)$(n[e]).detach().appendTo(l)}();var f=u.find(".ui-v-bar-area"),d=c.find(".ui-h-bar-area"),h=0,p=0,_=0,v=0,g=0,m=0,b=0,w=0,y=16,M=!1,r=null;function n(e){var t,n,i,a=!1;(e=ui.toObject(e)).hasOwnProperty("width")&&(t=ui.toInt(e.width),o.css("width",t?t+"px":""),a=!0),e.hasOwnProperty("height")&&(n=ui.toInt(e.height),l.css("height",n?n+"px":""),a=!0),e.hasOwnProperty("maxWidth")&&(n=ui.toInt(e.maxWidth),o.css("max-width",n?n+"px":""),a=!0),e.hasOwnProperty("maxHeight")&&(i=ui.toInt(e.maxHeight),l.css("max-height",i?i+"px":""),a=!0),e.hasOwnProperty("barSize")&&(b=ui.toInt(e.barSize),w=b,a=!0),e.hasOwnProperty("vBarSize")&&(b=ui.toInt(e.vBarSize),a=!0),e.hasOwnProperty("hBarSize")&&(w=ui.toInt(e.hBarSize),a=!0),e.hasOwnProperty("vBarSize")&&(b=ui.toInt(e.vBarSize),a=!0),e.hasOwnProperty("minBarSize")&&(y=ui.toInt(e.minBarSize),a=!0),e.hasOwnProperty("hBarFixed")&&(M=ui.toBoolean(e.hBarFixed),a=!0),e.hasOwnProperty("skin")&&(i=ui.trim(e.skin),ui.removeClassByPattern(o,"ui-scroll-box-*-skin"),""!=i&&o.addClass("ui-scroll-box-"+i+"-skin"),a=!0),e.hasOwnProperty("onScroll")&&(r=e.onScroll,ui.isFunction(r)||(r=null)),a&&S()}function S(){0!=o[0].offsetWidth&&(o.removeClass("ui-with-h-scroll"),o.removeClass("ui-with-v-scroll"),0,l[0].scrollWidth>l[0].clientWidth&&(o.addClass("ui-with-h-scroll"),0),l[0].scrollHeight>l[0].clientHeight&&(o.addClass("ui-with-v-scroll"),0),a())}function a(){var e,t,n,i,a,r;0!=o[0].offsetWidth&&(h=l[0].scrollWidth,p=l[0].scrollHeight,_=l[0].clientWidth,v=l[0].clientHeight,g=Math.min(l.scrollLeft(),h-_),m=Math.min(l.scrollTop(),p-v),0==h&&(h=1),0==p&&(p=1),(e=b)<=0&&u[0].offsetHeight*v/p<y&&(e=y),(a=w)<=0&&c[0].offsetWidth*_/h<y&&(a=y),e<=0?f.css({top:100*m/p+"%",height:100*v/p+"%"}):(t=u[0].offsetHeight,n=m*(t-e)/(p-v),f.css({top:100*n/t+"%",height:100*e/t+"%"})),a<=0?d.css({left:100*g/h+"%",width:100*_/h+"%"}):(r=c[0].offsetWidth,i=g*(r-a)/(h-_),d.css({left:100*i/r+"%",width:100*a/r+"%"})),M?(i=s.scrollTop()+s.innerHeight()-c[0].offsetHeight,r=(a=o.offset().top)+v-c[0].offsetHeight,a<i&&i<r?c.css("bottom",r-i+"px"):c.css("bottom","")):c.css("bottom",""))}n(e),S(),ui.addResizeHandler(o,S),ui.addScrollHandler(o,a),l.on("scroll",function(){a()}),u.on("mousedown touchstart",function(e){var t,n,i=$(e.target);ui.dragAndDrop({event:e,owner:this,cursor:$(this).css("cursor"),startDragging:function(e){u.addClass("ui-v-dragging"),i.hasClass("ui-v-bar-area")||0!=i.closest(".ui-v-bar-area").length||(m=(e.pageY-f.outerHeight()/2-u.offset().top)/(u.outerHeight()-f.outerHeight())*(p-v),l.scrollTop((e.pageY-f.outerHeight()/2-u.offset().top)/(u.outerHeight()-f.outerHeight())*(p-v)),a()),t=m,n=e.pageY},processDragging:function(e){l.scrollTop(t+(e.pageY-n)/(u.outerHeight()-f.outerHeight())*(p-v)),a()},stopDragging:function(){u.removeClass("ui-v-dragging")}})}),c.on("mousedown touchstart",function(e){var t,n,i=$(e.target);ui.dragAndDrop({event:e,owner:this,cursor:$(this).css("cursor"),startDragging:function(e){c.addClass("ui-h-dragging"),i.hasClass("ui-h-bar-area")||0!=i.closest(".ui-h-bar-area").length||(l.scrollLeft((e.pageX-d.outerWidth()/2-c.offset().left)/(c.outerWidth()-d.outerWidth())*(h-_)),a()),t=g,n=e.pageX},processDragging:function(e){l.scrollLeft(t+(e.pageX-n)/(c.outerWidth()-d.outerWidth())*(h-_)),a()},stopDragging:function(){c.removeClass("ui-h-dragging")}})}),l.on("scroll",function(){o.trigger("uiScroll"),r&&r()});e={update:n,resize:S,scrollLeft:function(){return l.scrollLeft()},scrollTop:function(){return l.scrollTop()},scrollWidth:function(){return l[0].scrollWidth},scrollHeight:function(){return l[0].scrollHeight},clientWidth:function(){return l[0].clientWidth},clientHeight:function(){return l[0].clientHeight},destroy:function(){for(var e=l[0].childNodes,t=[],n=0;n<e.length;n++)t.push(e[n]);for(n=0;n<t.length;n++)$(t[n]).detach().appendTo(o);o.removeClass("ui-scroll-box"),o.removeClass("ui-stuff"),u.remove(),l.remove(),c.remove(),ui.removeResizeHandler(o),ui.removeScrollHandler(o),o.removeData("UIScrollBox"),delete o[0].uiInterface}};return o.data("UIScrollBox",e),o[0].uiInterface=e},ui.openDropdown=function(e,t,n,i){var Q,W,a,X,r,o,s,j,Y,U,G,l,K,Z,u,c,f,d,h,J,ee,te,ne,ie,ae,p,re=$(e);function _(e){for(var t=ui.trim(e).split(" "),n=0;n<t.length;n++){var i=t[n];if("tooltip-"==i.substr(0,8)){ui.removeClassByPattern(W,"ui-dropdown-*-skin");var a=i.substr(8);W.addClass("ui-dropdown-"+a+"-skin")}else if("box-"==i.substr(0,4))o=i.substr(4);else if("arrow-"==i.substr(0,6))s="on"==i.substr(6),W.toggleClass("ui-dropdown-with-arrow",s);else if("to-"==i.substr(0,3))j=i.substr(3);else if("width-"==i.substr(0,6)){var r=i.substr(6);switch(r){case"auto":case"full":Y=r;break;default:Y="fixed",U=ui.toInt(r)}}else"max-height-"==i.substr(0,11)?G=ui.toInt(i.substr(11)):"margin-"==i.substr(0,7)?l=ui.toInt(i.substr(7)):"v-padding-"==i.substr(0,10)?K=ui.toInt(i.substr(10)):"anim-in-"==i.substr(0,8)?(a=i.substr(8).split("-"),u=a[0],c=ui.toInt(a[1])||("none"==u?0:100)):"anim-out-"==i.substr(0,9)&&(i=i.substr(9).split("-"),f=i[0],d=ui.toInt(i[1])||("none"==f?0:100))}}function v(){var t,e=Q.scrollLeft(),n=Q.scrollTop(),i=Q.innerWidth(),a=Q.innerHeight(),r=re.offset(),o=r.left-e,s=r.top-n,l=re.outerHeight(),u=re.outerWidth();0==U&&W.css("width",""),"full"==Y&&W.css("min-width",u+"px"),0<U?(t=Math.min(U,i-4),W.outerWidth(t)):(v=W.outerWidth(),(t=Math.min(v,i-4))<v&&W.outerWidth(t)),te.resize();var r=W[0].offsetHeight-ee[0].offsetHeight,c=te.scrollHeight()+r;G&&G<c&&(c=G);var f=s-ie-2,d=Q.innerHeight()-s-l-ie-2,h="",p=0,_=0,v="",g=0,m=0;function b(){return 2<=p&&2<=_&&p+t<=i-2&&_+c<=a-2}function w(){var e=n(o,o+u-1,2,i-2-1),t=n(s,s+l-1,2,a-2-1);function n(e,t,n,i){return e<n&&n<t||e<i&&i<t}return e||t}function y(){G&&(I(!1),b()||O(!1),b())||(f<d?I:O)(!0)}function M(){G&&(O(!1),b()||I(!1),b())||(f<d?I:O)(!0)}function S(){G&&(V(!1),b()||q(!1),b())||(f<d?V:q)(!0)}function x(){G&&(q(!1),b()||V(!1),b())||(f<d?V:q)(!0)}function k(){z(!1),b()||D(!1),b()||(f<d?z:D)(!0)}function A(){D(!1),b()||z(!1),b()||(f<d?z:D)(!0)}function R(){H(),b()||F(),b()||B()}function E(){F(),b()||H(),b()||T()}function B(){h="right",p=o+u+ie,_=s-K,g=0,m=l/2+K,L(),b()&&!w()||y()}function P(){h="right",p=o+u+ie,_=s+l-c+K,g=0,m=c-l/2-K,L(),b()&&!w()||M()}function T(){h="left",p=o-ie-t,_=s-K,g=0,m=l/2+K,L(),b()&&!w()||S()}function C(){h="left",p=o-ie-t,_=s+l-c+K,g=0,m=c-l/2-K,L(),b()&&!w()||x()}function I(e){e&&(c=d),h="bottom",g=o+t+2<i||o-t<2?(p=o,_=s+l+ie,ae):(p=o+u-t,_=s+l+ie,t-ae),m=0,N()}function O(e){e&&(c=Math.min(c,f)),h="top",g=o+t+2<i||o-t<2?(p=o,_=s-ie-c,ae):(p=o+u-t,_=s-ie-c,t-ae),m=0,N()}function V(e){e&&(c=d),h="bottom",g=2<=o+u-t||o-t<2?(p=o+u-t,_=s+l+ie,t-ae):(p=o,_=s+l+ie,ae),m=0,N()}function q(e){e&&(c=Math.min(c,f)),h="top",g=2<=o+u-t||o-t<2?(p=o+u-t,_=s-ie-c,t-ae):(p=o,_=s-ie-c,ae),m=0,N()}function z(e){h="bottom",p=o+(u-t)/2,_=s+l+ie,g=t/2,m=0,e&&(c=a-2-_-1),N()}function D(e){h="top",p=o+(u-t)/2,_=s-ie-c,g=t/2,m=0,e&&(c=s-ie-(_=2)),N()}function H(){h="right",p=o+u+ie,_=s+(l-c)/2,g=0,m=c/2,L()}function F(){h="left",p=o-ne-t,_=s+(l-c)/2,g=0,m=c/2,L()}function L(){var e=_;a-1-2<_+c&&(_=a-1-2-c),_<2&&(_=2,c=Math.min(c,a-4)),m=m+e-_}function N(){i-2<=p+t&&(g=p-(p=i-2-t-1)+u/2),p<2&&(g=o-(p=2)+u/2)}({"bottom-right":y,"top-right":M,"bottom-left":S,"top-left":x,"bottom-center":k,"top-center":A,"right-center":R,"left-center":E,"right-bottom":B,"right-top":P,"left-bottom":T,"left-top":C})[j](),Z?v="fixed":(v="absolute",document.fullscreenElement||(p+=e,_+=n)),W.css({display:ui.isVisible(re)?"block":"none",position:v,left:p+"px",top:_+"px"}),te.update({maxHeight:c-r}),X.css("left",g?g-ne+"px":""),X.css("top",m?m-ne+"px":""),J!=h&&(W.removeClass("ui-dropdown-align-"+J),W.addClass("ui-dropdown-align-"+h),J=h)}function g(){var e;W&&(ui.removeResizeHandler(a),ui.removeScrollHandler(a),re.removeData("UIDropdown"),a.removeData("UIDropdown"),re.removeClass("ui-expanded"),W.off(),0<d?(Z=!0,v(),e=W,W=null,e.addClass("ui-dropdown-locked"),e.addClass("ui-dropdown-animation-out-"+f),setTimeout(function(){r.css("transition","all "+d+"ms linear"),e.addClass("ui-dropdown-animating"),setTimeout(function(){ui.isFunction(h)&&h(a),te.destroy(),e.remove()},d)},1)):(ui.isFunction(h)&&h(a),te.destroy(),W.remove(),W=null))}(e=re.data("UIDropdown"))?e.close():(Q=$(window),W=$('<div class="ui-dropdown ui-stuff">\t<div class="ui-dropdown-animation-box">\t\t<div class="ui-dropdown-arrow">\t\t\t<div class="ui-dropdown-arrow-bg"></div>\t\t\t<div class="ui-dropdown-arrow-fg"></div>\t\t</div>\t\t<div class="ui-dropdown-frame"></div>\t</div></div>'),(document.fullscreenElement?$(document.fullscreenElement):$(document.body)).append(W),(a=$(t).eq(0)).parent().length&&(a=a.clone()),a.show(),a.css("display","block"),(t=W.find(".ui-dropdown-frame")).append(a),re.addClass("ui-expanded"),X=W.find(".ui-dropdown-arrow"),r=W.find(".ui-dropdown-animation-box"),Z=s=!1,f=u="none",d=c=K=l=G=U=0,h=null,J=Y=j=o="",_("tooltip-generic box-generic arrow-on to-bottom-right width-full max-height-auto"),_(a.attr("data-ui-dropdown")),0==(ee=W.find("[data-ui-dropdown-box]")).length&&(ee=t),te=ui(ee).ScrollBox({skin:o}),0<c&&(Z=!0,W.addClass("ui-dropdown-animation-in-"+u),setTimeout(function(){W&&(r.css("transition","all "+c+"ms linear"),W.addClass("ui-dropdown-animating"),setTimeout(function(){W&&(W.removeClass("ui-dropdown-animation-in-"+u),W.removeClass("ui-dropdown-animating"),r.css("transition",""),Z=!1,v())},c))},1)),ui.addResizeHandler(a,v),ui.addScrollHandler(a,v),i=ui.toObject(i),(i=ui.makeArray(i.uiExclude)).push(re),i.push(W),ui.addPopup(a,i,g),v(),ui.isFunction(n)&&(n(a,p={onClose:null}),h=p.onClose),ne=s?ui.toInt(X.css("height")):0,ie=ne+l,ae=ui.toInt(X.css("width"))||16,v(),p={close:g},re.data("UIDropdown",p),a.data("UIDropdown",p))},ui.closeDropdown=function(e){0==(e=$(e)).length||(e=e.data("UIDropdown"))&&e.close()},usagesSent=!1,dspProcessors="function dsp_equalizer_set2dArray(r,s,a){for(var o=r.length=0;o<s;o++)r.push(new Float64Array(a))}function dsp_equalizer_flush(r,s,a,o,f,e){e.dynAmpFactor=1,dsp_equalizer_set2dArray(s,10,r),dsp_equalizer_set2dArray(a,10,r),dsp_equalizer_set2dArray(o,10,r),dsp_equalizer_set2dArray(f,10,r)}function dsp_equalizer_process(r,s,a,o,f,e,n,p,_,i,d,t,u,c,l,h){for(var v,y,A,q,z=h.dynAmpFactor,g=0;g<a;g++)for(A=0;A<s;A++){for(v=r[g][A],q=0;q<10;q++)y=(_[q]*v+p[q]*d[q][g]+i[q]*u[q][g]-p[q]*t[q][g]-n[q]*c[q][g])*e[q],u[q][g]=d[q][g],d[q][g]=v,c[q][g]=t[q][g],(1<=(v=t[q][g]=y)||v<=-1)&&(z=Math.min(z,1/Math.abs(v)));v*=z,v*=f,r[g][A]=v}o/=48e5;if(h.dynAmpFactor=(1-o)*z+o,!l)for(g=0;g<a;g++)for(A=0;A<s;A++)1<(v=r[g][A])?v=1:v<-1&&(v=-1),r[g][A]=v}function dsp_sound3d_process(r,s,a,o,f){if(0!=f)for(var e=0;e<s;e++){for(var n=0,p=0;p<a;p++)n+=r[p][e];n/=a;for(var _=0;_<a;_++){var i=r[_][e];r[_][e]=i+o*(i-n)}}}function dsp_lowpass_flush(r,s){for(var a=r.length=0;a<s;a++)r.push(0)}function dsp_lowpass_process(r,s,a,o,f,e){if(0!=e)for(var n=0;n<a;n++)for(var p=0;p<s;p++){var _=r[n][p];o[n]=o[n]+f*(_-o[n]),r[n][p]=o[n]}}function dsp_highpass_flush(r,s){for(var a=r.length=0;a<s;a++)r.push(0)}function dsp_highpass_process(r,s,a,o,f,e){if(0!=e)for(var n=0;n<a;n++)for(var p=0;p<s;p++){var _=r[n][p];o[n]=o[n]+f*(_-o[n]),r[n][p]=_-o[n]}}function dsp_balance_process(r,s,a,o){if(2==a)for(var f=0;f<s;f++)0<o&&(r[0][f]-=r[0][f]*o),o<0&&(r[1][f]+=r[1][f]*o)}",eval(dspProcessors),globals.dspEQPresets=[{title:"Default",bands:[0,0,0,0,0,0,0,0,0,0]},{title:"Classical",bands:[0,0,0,0,0,0,-7.2,-7.2,-7.2,-9.6]},{title:"Club",bands:[0,0,9,5.6,5.6,5.6,3.2,0,0,0]},{title:"Dance",bands:[9.6,7.2,2.4,0,0,-5.6,-7.2,-7.2,0,0]},{title:"Full Bass",bands:[9.6,9.6,9.6,5.6,1.6,-4,-8,-10.4,-11.2,-11.2]},{title:"Full Bass & Treble",bands:[7.2,5.6,0,-7.2,-4.8,1.6,8,11.2,12,12]},{title:"Full Treble",bands:[-9.6,-9.6,-9.6,-4,2.4,11.2,16,16,16,16.8]},{title:"Laptop Speakers / Headphones",bands:[4.8,11.2,5.6,-3.2,-2.4,1.6,4.8,9.6,12.8,14.4]},{title:"Large Hall",bands:[10.4,10.4,5.6,5.6,0,-4.8,-4.8,-4.8,0,0]},{title:"Live",bands:[-4.8,0,4,5.6,5.6,5.6,4,2.4,2.4,2.4]},{title:"Party",bands:[7.2,7.2,0,0,0,0,0,0,7.2,7.2]},{title:"Pop",bands:[-1.6,4.8,7.2,8,5.6,0,-2.4,-2.4,-1.6,-1.6]},{title:"Reggae",bands:[0,0,0,-5.6,0,6.4,6.4,0,0,0]},{title:"Rock",bands:[8,4.8,-5.6,-8,-3.2,4,8.8,11.2,11.2,11.2]},{title:"Ska",bands:[-2.4,-4.8,-4,0,4,5.6,8.8,9.6,11.2,9.6]},{title:"Soft",bands:[4.8,1.6,0,-2.4,0,4,8,9.6,11.2,12]},{title:"Soft Rock",bands:[4,4,2.4,0,-4,-5.6,-3.2,0,2.4,8.8]},{title:"Techno",bands:[8,5.6,0,-5.6,-4.8,0,8,9.6,9.6,8.8]}],globals.dspEQFreqs=[70,180,320,600,1e3,3e3,6e3,12e3,14e3,16e3],instanceMgr={},RC=instanceMgr,SC=MediaEvents(),RC.registerActiveInstance=function(e){var t=engine.activeInstances.length;ui.arrayHas(engine.activeInstances,e)||engine.activeInstances.push(e),0==t&&1==engine.activeInstances.length&&SC.triggerEvent("onGlobalPlay")},RC.unregisterActiveInstance=function(e){var t=engine.activeInstances.length;ui.arrayRemove(engine.activeInstances,e),1==t&&0==engine.activeInstances.length&&SC.triggerEvent("onGlobalPause")},RC.suspendAll=function(){for(var e=0;e<engine.activeInstances.length;e++)engine.activeInstances[e].pause()},RC.bindEvent=SC.bindEvent,RC.unbindEvents=SC.unbindEvents,RC.triggerEvent=SC.triggerEvent,RC.defaulEnableDSP=!1,RC.defaulRequireWavePrint=!1,RC.enableDSP=function(e){e=ui.toBoolean(e),RC.defaulEnableDSP=e;for(var t=0;t<engine.instances.length;t++)engine.instances[t].enableDSP(e)},RC.requireWavePrint=function(e){e=ui.toBoolean(e),RC.defaulRequireWavePrint=e;for(var t=0;t<engine.instances.length;t++)engine.instances[t].requireWavePrint(e)},mediaEngineInstanceCounter=101,fullScreenVisualisationRunned=!1,engine.instances=[],engine.activeInstances=[],engine.bindEvent=instanceMgr.bindEvent,engine.unbindEvents=instanceMgr.unbindEvents,engine.triggerEvent=instanceMgr.triggerEvent,engine.enableDSP=instanceMgr.enableDSP,engine.requireWavePrint=instanceMgr.requireWavePrint,engine.getVisualData=function(e,t,n,i,a){if(e)return e.getVisualData(t,n,i,a);if(1==engine.activeInstances.length)return engine.activeInstances[0].getVisualData(t,n,i,a);for(var r=new Float64Array(t),o=0;o<engine.activeInstances.length;o++)for(var s=engine.activeInstances[o].getVisualData(t,n,i,a),l=0;l<s.length;l++)r[l]+=s[l];for(var u=0;u<t;u++)r[l]/=engine.activeInstances.length;return r},engine.getSpectrumData=function(e,t,n,i){return dspGenerateSpectrumData(engine.getVisualData(e,t,n,i))},engine.getVU=function(e,t,n,i){for(var a=engine.getVisualData(e,i||1e3,t,n,!0),r=0,o=0;o<a.length;o++){var s=Math.abs(a[o]);r<s&&(r=s)}return n&&1==engine.activeInstances.length&&(n=engine.activeInstances[0].dsp.balance.getValue(),0==t&&0<n?r*=1-n:1==t&&n<0&&(r*=1+n)),0==r?-40:20*ui.log10(r)},window.MediaEngine=window.mediaEngine=engine,ui.fn.Spectrum=function(e){var t=$(this),n=t.data("UISpectrum");if(n)return e&&n.update(e),n;var i=$('<div class="ui-spectrum ui-stuff">\t<canvas class="ui-spectrum-canvas"></canvas></div>');t.append(i);var a=i.find(".ui-spectrum-canvas")[0],r=a.getContext("2d"),o=null,s="#4fcb1d",l=[],u=50,c=!1,f=(e=ui.toObject(e)).player;if(!f)return{};function d(){o||(h(),o=setInterval(h,40))}function h(){if(!fullScreenVisualisationRunned&&ui.isVisible(a)){a.width=a.parentNode.offsetWidth,a.height=u,function(){var e=Math.pow(2,1+Math.ceil(ui.log2(a.width)));if(e>l.length){var t=l.length;l.length=e;for(var n=t;n<e;n++)l[n]=0}else l.length=e}();for(var e=f.getSpectrumData(l.length,0),t=0;t<l.length;t++)l[t]=2*l[t]/3,e[t]>l[t]&&(l[t]=e[t]);r.clearRect(0,0,a.width,a.height),r.beginPath();for(var n=0;n<a.width;n++){var i=5*l[Math.floor(n*l.length/a.width/3)],i=Math.sqrt(i*a.height);r.moveTo(n,a.height-i*u/100),r.lineTo(n,a.height)}r.strokeStyle=s,r.stroke()}}function p(){c||h()}function _(e){(e=ui.toObject(e)).hasOwnProperty("color")&&(s=e.color),e.hasOwnProperty("height")&&(u=ui.toInt(e.height))}f.enableDSP(!0),f.requireWavePrint(!0),_(e),p(),ui.addResizeHandler(i,p),f.paused()||d(),f.bindEvent(i,"onPause",function(){h(),o&&(clearInterval(o),o=null),c=!1}),f.bindEvent(i,"onPlay",function(){d(),c=!0}),f.bindEvent(i,"onComplete",function(){for(var e=0;e<l.length;e++)l[e]=0;h()});e={update:_,destroy:function(){o&&clearInterval(o),f.unbindEvents(i),ui.removeResizeHandler(i),t.removeData("UISpectrum"),i.remove()}};return t.data("UISpectrum",e),e},ui.fn.MediaPlayer=ui.fn.UIMediaPlayer=function(e){var t=$(this),n=t.data("UIMediaPlayer");if(n)return e&&n.update(e),n;sendUsages();var r=e.player;r.enableDSP(!0);var o=$('<div data-about="Alex Player v'+engineVersion+' (http://alex.player.x10.name/)" class="ui-media-player ui-stuff ui-non-selectable ui-media-player-style-generic">\t<div class="ui-media-player-spectrum"></div>\t<div class="ui-media-player-video"></div>\t<div class="ui-media-player-panel-container">\t\t<div class="ui-media-player-panel">\t\t\t<div class="ui-media-player-left-panel">\t\t\t\t<div class="ui-media-player-control-buttons">\t\t\t\t\t<div class="ui-media-player-play-button">\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t\t\t\t\t</div>\t\t\t\t\t<div class="ui-media-player-pause-button">\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="ui-media-player-progress">\t\t\t\t<div class="ui-media-player-progress-line">\t\t\t\t\t<div class="ui-media-player-progress-value"></div>\t\t\t\t</div>\t\t\t\t<div class="ui-media-player-radio-panel">\t\t\t\t\t<div class="ui-media-player-radio-panel-buttons">\t\t\t\t\t\t<div class="ui-media-player-radio-panel-prev-button">\t\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="ui-media-player-radio-panel-next-button">\t\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="ui-media-player-radio-panel-title"></div>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="ui-media-player-right-panel">\t\t\t\t<div class="ui-media-player-time-bar">0:00 / 0:00</div>\t\t\t\t<div class="ui-media-player-visualization-panel">\t\t\t\t\t<div class="ui-media-player-visualization-box"><canvas width="64" height="20"></canvas></div>\t\t\t\t</div>\t\t\t\t<div class="ui-media-player-volume-panel">\t\t\t\t\t<div class="ui-media-player-volume-icon">\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t\t\t\t\t</div>\t\t\t\t\t<div class="ui-media-player-no-volume-icon">\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t\t\t\t\t</div>\t\t\t\t\t<div class="ui-media-player-volume-line">\t\t\t\t\t\t<div class="ui-media-player-volume-value"></div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\t<div class="ui-media-player-full-screen-panel">\t\t\t\t\t<div class="ui-media-player-full-screen-button">\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 5v4h2V5h4V3H5c-1.1 0-2 .9-2 2zm2 10H3v4c0 1.1.9 2 2 2h4v-2H5v-4zm14 4h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zm0-16h-4v2h4v4h2V5c0-1.1-.9-2-2-2z"/></svg>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t</div>\t</div></div>');t.append(o);var i=$(window),s=o.find(".ui-media-player-video"),a=o.find(".ui-media-player-panel"),l=o.find(".ui-media-player-progress"),u=(o.find(".ui-media-player-progress-line"),o.find(".ui-media-player-progress-value")),c=o.find(".ui-media-player-time-bar"),f=o.find(".ui-media-player-volume-value"),d=o.find(".ui-media-player-right-panel"),h=o.find(".ui-media-player-spectrum"),p=o.find(".ui-media-player-radio-panel-title"),_=!1,v="#c0c0c0",g=null,m=null,b=!1,w=!1,y="#4fcb1d",M=null,S=!1,x="#4fcb1d",k=50,A=initSmallVisualizationBox(o.find(".ui-media-player-visualization-panel canvas"),r,{visType:0,color:v}),R=!1,E=0;function B(e){var t,n=!1,i={},a={};if((e=ui.toObject(e)).hasOwnProperty("lineColor")&&(v=ui.trim(e.lineColor),o.find(".ui-media-player-progress-value").css("background-color",v),o.find(".ui-media-player-volume-value").css("background-color",v),a.color=v),e.hasOwnProperty("visType")&&(a.visType=e.visType),e.hasOwnProperty("mode"))switch(e.mode){case"pro":case"extended":e.extendedMode=!0;break;case"full":e.extendedMode=!1,e.hideTimeBar=!1,e.hideVisualization=!1,e.hideVolumeBar=!1;break;case"normal":e.extendedMode=!1,e.hideTimeBar=!1,e.hideVisualization=!0,e.hideVolumeBar=!1;break;case"minimal":e.extendedMode=!1,e.hideTimeBar=!0,e.hideVisualization=!0,e.hideVolumeBar=!0}e.hasOwnProperty("extendedMode")&&(w=!!ui.toBoolean(e.extendedMode)&&(e.hideTimeBar=!1,e.hideVisualization=!1,!(e.hideVolumeBar=!1))),e.hasOwnProperty("hideTimeBar")&&(o.toggleClass("ui-media-player-without-time-bar",ui.toBoolean(e.hideTimeBar)),n=!0),e.hasOwnProperty("hideVisualization")&&(_=ui.toBoolean(e.hideVisualization),o.toggleClass("ui-media-player-without-visualization",_),(_?C:r.paused()?T:P)(),n=!0),e.hasOwnProperty("hideVolumeBar")&&(o.toggleClass("ui-media-player-without-volume-panel",ui.toBoolean(e.hideVolumeBar)),n=!0),e.hasOwnProperty("hidePlayButton")&&(o.toggleClass("ui-media-player-without-play-button",ui.toBoolean(e.hidePlayButton)),n=!0),e.hasOwnProperty("equalizerColor")&&(y=e.equalizerColor),e.hasOwnProperty("onPause")&&(g=e.onPause),e.hasOwnProperty("onPlay")&&(m=e.onPlay),e.hasOwnProperty("showVideo")&&(t=e.showVideo,ui.toBoolean(t)?r.setVideoOwner(s):r.setVideoOwner(null)),e.hasOwnProperty("style")&&(function e(t){t=ui.toString(t);ui.removeClassByPattern(o,"ui-media-player-style-*");switch(t){case"generic":case"translucent":o.addClass("ui-media-player-style-"+t);break;default:e("generic")}}(e.style),n=!0),e.hasOwnProperty("reverseTime")&&(b=ui.toBoolean(e.reverseTime),O(),n=!0),e.hasOwnProperty("width")&&(t=ui.toInt(e.width),o.css("width",t?t+"px":"")),e.hasOwnProperty("spectrumEnabled")&&(!(S=ui.toBoolean(e.spectrumEnabled))&&M&&(M.destroy(),M=null),S&&!M&&(M=ui(h).Spectrum({player:r}),i={color:x,height:k})),e.hasOwnProperty("spectrumColor")&&(i={color:x=e.spectrumColor}),e.hasOwnProperty("position")&&function(e){var t=ui.trim(e).replace(/\s\s/g," ").split(" ");if(2!=t.length)return o.removeClass("ui-media-player-fixed"),R=!1,o.css({left:"",top:"",right:"",bottom:"","max-width":""});o.addClass("ui-media-player-fixed"),R=!0;var n=ui.toInt(t[0]),e=ui.toInt(t[1]);E=Math.abs(2*n),t={left:"",top:"",right:"",bottom:""},0<=n?t.left=n+"px":t.right=Math.abs(n)+"px",0<=e?t.top=e+"px":t.bottom=Math.abs(e)+"px",o.css(t),I()}(e.position),e.hasOwnProperty("cookieName")&&r.dsp.setCookieName(e.cookieName),ui.isEmptyObject(a)||A.update(a),!ui.isEmptyObject(i)&&M&&M.update(i),n&&I()}function P(){A.start()}function T(){A.redraw()}function C(){A.stop()}function I(){o.removeClass("ui-m1"),o.removeClass("ui-m2"),o.removeClass("ui-m3"),a.css("padding-right",d.width()+"px"),l.outerWidth()<120&&(o.addClass("ui-m1"),a.css("padding-right",d.width()+"px")),l.outerWidth()<120&&(o.addClass("ui-m2"),a.css("padding-right",d.width()+"px")),l.outerWidth()<120&&(o.addClass("ui-m3"),a.css("padding-right",d.width()+"px")),R&&o.css("max-width",i.innerWidth()-E+"px")}function O(){var e=r.position(),t=r.duration();0<t?b?c.text("-"+ui.formatTime(t-e)+" / "+ui.formatTime(t)):c.text(ui.formatTime(e)+" / "+ui.formatTime(t)):c.text(ui.formatTime(e))}function V(){ui.fullScreenMode.entered()?ui.fullScreenMode.exit():(o.addClass("ui-media-player-full-screen"),ui.fullScreenMode.enter(o,function(){o.removeClass("ui-media-player-full-screen")}))}function q(e){e=$(e);0==e.length||(e=e.data("UIMediaPlayerProgressHint"))&&e.close()}function z(e,t,n){var i=n.offset(),a=i.left,i=i.top;return a<=e&&i<=t&&e<a+n.outerWidth()&&t<i+n.outerHeight()}B(e),I(),ui.addResizeHandler(o,I),r.bindEvent(o,"onOpen",function(){o.toggleClass("ui-media-player-with-radio-panel",r.isStream()||r.isRadio()),o.toggleClass("ui-media-player-with-radio-buttons",r.isRadio()&&1<r.radioStations().length)}),r.bindEvent(o,"onLoad",function(){o.toggleClass("ui-media-player-enable-duration",0<r.duration()),o.toggleClass("ui-media-player-with-video",r.hasVideo())}),r.bindEvent(o,"onTitleChange",function(){p.text(ui.trim(r.title()))}),r.bindEvent(o,"onProgress",function(){var e=r.duration(),e=0<e?100*r.position()/e:0;u.css("width",e+"%"),O(),I()}),r.bindEvent(o,"onPause",function(){o.removeClass("ui-media-player-playing"),C(),ui.isFunction(g)&&g()}),r.bindEvent(o,"onPlay",function(){o.addClass("ui-media-player-playing"),P(),ui.isFunction(m)&&m()}),r.bindEvent(o,"onVolumeChange",function(){var e=ui.ensureRange(r.volume(),0,1);f.css("width",100*e+"%"),o.toggleClass("ui-media-player-muted",r.muted())}),r.bindEvent(o,"onWavePrintDataLoad",function(){r.paused()||P()}),r.bindEvent(o,"onComplete",function(){C()}),o.on("click",".ui-media-player-play-button",function(){r.play()}),o.on("click",".ui-media-player-pause-button",function(){r.pause()}),o.on("mousedown touchstart",".ui-media-player-progress-line",function(e){var i;0!=r.duration()&&(i=$(this),ui.dragAndDrop({event:e,owner:i,cursor:"pointer",processDragging:function(e){var t=e.pageX-i.offset().left,t=ui.ensureRange(t,0,i.outerWidth()),n=r.duration()*t/i.outerWidth();z(e.pageX,e.pageY,i)?function(e,t){var i=$(e);if(e=i.data("UIMediaPlayerProgressHint"))return e.update(t);var a=$('<div class="ui-media-player-progress-hint ui-stuff">\t<div class="ui-media-player-progress-hint-frame">\t\t<div class="ui-media-player-progress-hint-helper">\t\t\t<div class="ui-media-player-progress-hint-helper-bg"></div>\t\t\t<div class="ui-media-player-progress-hint-helper-fg"></div>\t\t</div>\t</div>\t<div class="ui-media-player-progress-hint-text"></div></div>');(document.fullscreenElement?$(document.fullscreenElement):$(document.body)).append(a);var r=$(window),n=a.find(".ui-media-player-progress-hint-text"),o=a.find(".ui-media-player-progress-hint-helper"),s=0,l=ui.toInt(o.css("height"));function u(e){(e=ui.toObject(e)).hasOwnProperty("position")&&(s=ui.toInt(e.position)),e.hasOwnProperty("text")&&n.text(ui.toString(e.text)),c()}function c(){var e=a.outerWidth(),t=a.outerHeight(),n=i.offset().left+s-e/2,e=i.offset().top-t-l,t=!1;e<r.scrollTop()&&(t=!0,e=i.offset().top+i.outerHeight()+l),t?a.addClass("ui-media-player-progress-hint-to-bottom"):a.addClass("ui-media-player-progress-hint-to-top"),n-=r.scrollLeft(),e-=r.scrollTop(),a.css({left:n+"px",top:e+"px"}),o.css("margin-left",-o.width()/2+"px")}u(t),a.fadeIn(200),c(),i.data("UIMediaPlayerProgressHint",{update:u,close:function(){i.removeData("UIMediaPlayerProgressHint"),a.fadeOut(200,function(){a.remove()})}})}(i,{text:ui.formatTime(n),position:t}):q(i)},stopDragging:function(e){q(i),z(e.pageX,e.pageY,i)&&r.seek(e.pageX-i.offset().left,i.outerWidth())}}))}),o.on("click",".ui-media-player-radio-panel-prev-button",function(){r.prevRadioStation()}),o.on("click",".ui-media-player-radio-panel-next-button",function(){r.nextRadioStation()}),o.on("click",".ui-media-player-volume-icon",function(){r.setMuted(!0)}),o.on("click",".ui-media-player-no-volume-icon",function(){r.setMuted(!1)}),o.on("mousedown touchstart",".ui-media-player-volume-line",function(e){r.setMuted(!1);var t=$(this);function n(e){e=(e.pageX-t.offset().left)/t.outerWidth();r.setVolume(e)}ui.dragAndDrop({event:e,owner:t,cursor:"pointer",startDragging:n,processDragging:n})}),o.on("click",".ui-media-player-time-bar",function(){b=!b,O(),I()}),o.on("click",".ui-media-player-visualization-box",function(){var e;w?(e=$('<div class="ui-media-player-equalizer-dropdown ui-stuff" data-ui-dropdown="tooltip-generic box-generic arrow-off to-bottom-center width-612 margin-4 anim-in-slide anim-out-slide"></div>'),ui.openDropdown(a,e,function(e,t){ui(e).Equalizer({player:r,color:y,visType:A.visType(),cookieName:r.dsp.getCookieName(),onSelectVis:function(e){A.update({visType:e.visType}),T()}}),t.onClose=function(){ui(e).destroy()}},{uiExclude:[".ui-media-player-visualization-box"]})):(A.update({visType:A.visType()+1}),T())}),o.on("click",".ui-media-player-full-screen-button",function(){ui.closeAllPopups(),V()}),o.on("dblclick",".ui-media-player-video",function(){ui.closeAllPopups(),V()}),o.on("dblclick",".ui-media-player-panel-container",function(e){e.target==this&&(ui.closeAllPopups(),V())});e={update:B,destroy:function(){M&&M.destroy(),ui.removeResizeHandler(o),r.unbindEvents(o),o.off(),o.remove(),t.removeData("UIMediaPlayer"),delete t[0].uiInterface}};return t.data("UIMediaPlayer",e),t[0].uiInterface=e},ui.fn.WaveSurfer=ui.fn.UIWaveSurfer=function(e){var t=$(this),n=t.data("UIWaveSurfer");if(n)return e&&n.update(e),n;sendUsages();var l,S=e.player,a=!0,f=55,r="#4fcb1d",x="#8b8b8b",o=2,u=28,s=!0,c=!1,d=0,h=0,i=0,p=!0,_=!1,v=!1,g=null,m=!1,b=null,w=null,y=$('<div class="ui-wavesurfer ui-stuff ui-non-selectable">\t<div class="ui-wavesurfer-top-panel">\t\t<div class="ui-wavesurfer-top-panel-selected-range-box">\t\t\t<div class="ui-wavesurfer-selection-values"></div>\t\t\t<div class="ui-wavesurfer-top-panel-selected-range-box-label">0:00 - 0:01 (0:01)</div>\t\t\t<div class="ui-wavesurfer-top-panel-selected-range-box-clear-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t\t\t</div>\t\t</div>\t\t<div class="ui-wavesurfer-top-panel-current-time">0:00</div>\t</div>\t<div class="ui-wavesurfer-scroll-box">\t\t<div class="ui-wavesurfer-content">\t\t\t<div class="ui-wavesurfer-section-new">\t\t\t\t<div class="ui-wavesurfer-selection"></div>\t\t\t\t<div class="ui-wavesurfer-wave-frame">\t\t\t\t\t<div class="ui-wavesurfer-wave-frame-queued"><canvas></canvas></div>\t\t\t\t\t<div class="ui-wavesurfer-wave-frame-passed"><canvas></canvas></div>\t\t\t\t</div>\t\t\t\t<div class="ui-wavesurfer-progress-line"></div>\t\t\t</div>'+(_?'\t\t\t<div class="ui-wavesurfer-section-old">\t\t\t\t<div class="ui-wavesurfer-wave-queued-old"><canvas></canvas></div>\t\t\t\t<div class="ui-wavesurfer-wave-passed-old"><canvas></canvas></div>\t\t\t</div>':"")+'\t\t</div>\t</div>\t<div class="ui-wavesurfer-error-placeholder"></div>\t<div class="ui-wavesurfer-navigation-panel ui-non-selectable">\t\t<div class="ui-wavesurfer-left-panel">\t\t\t<div class="ui-wavesurfer-play-button ui-wavesurfer-navigation-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t\t\t</div>\t\t\t<div class="ui-wavesurfer-pause-button ui-wavesurfer-navigation-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t\t\t</div>\t\t\t<div class="ui-wavesurfer-zoom-in-button ui-wavesurfer-navigation-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path fill="none" d="M0 0h24v24H0V0z"/><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/></svg>\t\t\t</div>\t\t\t<div class="ui-wavesurfer-zoom-out-button ui-wavesurfer-navigation-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"/></svg>\t\t\t</div>\t\t\t<div class="ui-wavesurfer-download-selection-button ui-wavesurfer-navigation-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>\t\t\t</div>\t\t</div>\t\t<div class="ui-wavesurfer-scroll-panel">\t\t\t<div class="ui-wavesurfer-scroll-left-button ui-wavesurfer-navigation-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>\t\t\t</div>\t\t\t<div class="ui-wavesurfer-scroll-rail-area">\t\t\t\t<div class="ui-wavesurfer-scroll-rail-container">\t\t\t\t\t<div class="ui-wavesurfer-scroll-rail-selection"></div>\t\t\t\t\t<div class="ui-wavesurfer-scroll-rail-current-position"></div>\t\t\t\t\t<div class="ui-wavesurfer-scroll-rail-image"></div>\t\t\t\t\t<div class="ui-wavesurfer-scroll-rail"></div>\t\t\t\t\t<div class="ui-wavesurfer-scroll-bar">\t\t\t\t\t\t<div class="ui-wavesurfer-scroll-bar-image">\t\t\t\t\t\t\t<div class="ui-wavesurfer-scroll-bar-image-line-1"></div>\t\t\t\t\t\t\t<div class="ui-wavesurfer-scroll-bar-image-line-2"></div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="ui-wavesurfer-scroll-right-button ui-wavesurfer-navigation-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>\t\t\t</div>\t\t</div>\t\t<div class="ui-wavesurfer-about">Alex Player v'+engineVersion+'<a href="http://alex.player.x10.name/" target="_blank"></a></div>\t</div></div>');t.append(y);var M,k,A,R,E=y.find(".ui-wavesurfer-progress-line"),B=y.find(".ui-wavesurfer-scroll-box"),P=y.find(".ui-wavesurfer-content"),T=y.find(".ui-wavesurfer-navigation-panel"),C=y.find(".ui-wavesurfer-left-panel"),I=y.find(".ui-wavesurfer-scroll-rail"),O=y.find(".ui-wavesurfer-scroll-bar"),V=y.find(".ui-wavesurfer-zoom-in-button"),q=y.find(".ui-wavesurfer-zoom-out-button"),z=y.find(".ui-wavesurfer-scroll-left-button"),D=y.find(".ui-wavesurfer-scroll-right-button"),H=y.find(".ui-wavesurfer-scroll-rail-current-position"),F=y.find(".ui-wavesurfer-scroll-rail-selection"),L=(M=y.find(".ui-wavesurfer-wave-frame"),k=y.find(".ui-wavesurfer-wave-frame-queued canvas")[0],A=y.find(".ui-wavesurfer-wave-frame-passed canvas")[0],R=y.find(".ui-wavesurfer-wave-frame-passed"),{rebuild:N,updatePosition:function(){var e=ui.toInt(M.css("left")),t=M.outerWidth(),n=B[0].clientWidth,i=B.scrollLeft();(i<e||e+t<i+n)&&(N(),e=ui.toInt(M.css("left"))),i=B[0].scrollWidth,n=S.duration(),i=0<n?i*S.position()/n:0,0==n?R.css("width",E.css("left")):e<=i&&i<e+t?R.css("width",i-e+"px"):i<e?R.css("width","0"):R.css("width","100%")}});function N(){var e=B[0].clientWidth,t=2*e;M.outerWidth(t);var n=B.scrollLeft(),i=B[0].scrollWidth,a=n-e/2,a=ui.ensureRange(a,0,i-t);M.css("left",a+"px");n=S.getWavePrint(i,10,0,a,t),e=null;1<l&&(e=S.getWavePrint(i,10,1,a,t)),b&&0==n.length&&(n=_e(i,1,0,a,t),1<l&&(e=_e(i,1,1,a,t))),oe(k,t,n,e,x,a,s&&0<S.duration()),oe(A,t,n,e,r,a,!1)}var Q,W,X,j=_?(Q=y.find(".ui-wavesurfer-wave-passed-old"),W=y.find(".ui-wavesurfer-wave-passed-old canvas")[0],X=y.find(".ui-wavesurfer-wave-queued-old canvas")[0],{rebuild:function(){var e=P.outerWidth(),t=S.getWavePrint(e,10,0),n=null;1<l&&(n=S.getWavePrint(e,10,1)),oe(X,e,t,n,x,0,s),oe(W,e,t,n,r,0,!1)},updatePosition:function(){var e=0<(e=S.duration())?100*S.position()/e:0;Q.css("width",e+"%")}}):null,Y=y.find(".ui-wavesurfer-selection"),U=y.find(".ui-wavesurfer-top-panel-current-time"),G=y.find(".ui-wavesurfer-top-panel-selected-range-box"),K=y.find(".ui-wavesurfer-top-panel-selected-range-box-label"),Z=y.find(".ui-wavesurfer-selection-values"),J=0;function ee(){var e=S.duration(),t=0<e?B[0].scrollWidth*S.position()/e:0,n=B.scrollLeft(),e=B[0].clientWidth;return n<=t&&t<n+e}function te(e){var t,n=!1,i=!1;(e=ui.toObject(e)).hasOwnProperty("channels")&&(a=1<ui.toInt(e.channels),n=!0),e.hasOwnProperty("channelHeight")&&(f=ui.toInt(e.channelHeight),n=!0),e.hasOwnProperty("mainColor")&&(r=ui.trim(e.mainColor),n=!0),e.hasOwnProperty("secondaryColor")&&(x=ui.trim(e.secondaryColor),y.find(".ui-wavesurfer-top-panel-current-time").css("color",x),y.find(".ui-wavesurfer-top-panel-selected-range-box-label").css("color",x),y.find(".ui-wavesurfer-top-panel-selected-range-box-clear-button svg").css("fill",x),y.find(".ui-wavesurfer-scroll-bar-image-line-1").css("background-color",x),y.find(".ui-wavesurfer-scroll-bar-image-line-2").css("background-color",x),y.find(".ui-wavesurfer-scroll-bar-image").css("border-color",x),H.css("background-color",x),y.findAll(".ui-wavesurfer-navigation-panel svg").each(function(){$(this).css("fill",x)}),n=!0),e.hasOwnProperty("splitterSize")&&(o=ui.toInt(e.splitterSize),n=!0),e.hasOwnProperty("showRuler")&&(s=ui.toBoolean(e.showRuler),n=!0),e.hasOwnProperty("showNavigation")&&y.toggleClass("ui-wavesurfer-without-navigation",!ui.toBoolean(e.showNavigation)),e.hasOwnProperty("selectionEnabled")&&(c=ui.toBoolean(e.selectionEnabled),y.toggleClass("ui-wavesurfer-with-selection",c),n=!0),e.hasOwnProperty("selectionStartTime")&&(d=ne(e.selectionStartTime),n=!0),e.hasOwnProperty("selectionEndTime")&&(h=ne(e.selectionEndTime),n=!0),e.hasOwnProperty("onSelectionChange")&&(g=e.onSelectionChange),e.hasOwnProperty("selectionDownloadEnabled")&&(y.toggleClass("ui-wavesurfer-with-selection-download",ui.toBoolean(e.selectionDownloadEnabled)),i=!0),e.hasOwnProperty("selectionColor")&&(ui.Color(e.selectionColor),(t=ui.Color(e.selectionColor)).a=128,t={"background-color":e.selectionColor,"border-color":t.getColorString()},Y.css(t),F.css(t)),e.hasOwnProperty("hidePlayButton")&&y.toggleClass("ui-wavesurfer-without-play-button",ui.toBoolean(e.hidePlayButton)),e.hasOwnProperty("cachedWave")&&(m=ui.toBoolean(e.cachedWave)),e.hasOwnProperty("cachedWaveURL")&&(m=ui.trim(e.cachedWaveURL)),i&&ie(),n&&ae()}function ne(e){if(ui.isString(e)&&-1<e.indexOf(":")){var t=e.split(":");if(2==t.length)return 60*ui.toInt(t[0])+ui.toFloat(t[1]);if(3==t.length)return 3600*ui.toInt(t[0])*ui.toInt(t[1])*60+ui.toFloat(t[2])}return ui.toFloat(e)}function ie(){T.css("padding-left",C.outerWidth()+"px")}function ae(){l=a?2:1;var e=B[0].clientWidth,t=e*Math.pow(2,i);P.outerWidth(t);var n=f*l;E.css({width:o+"px",height:n+"px","background-color":r});s&&(n+=15),Y.css({height:n+"px"});t=e/t*S.duration();V.toggleClass("ui-disabled",t<30),q.toggleClass("ui-disabled",i<=0),y.toggleClass("ui-wavesurfer-with-scroll-panel",0<i),L.rebuild(),_&&j.rebuild(),ue(),re()}function re(){var e=B.scrollLeft(),t=B[0].scrollWidth,n=B[0].clientWidth;!p||(e+n<=(a=0<(i=S.duration())?B[0].scrollWidth*S.position()/i:0)||a<e)&&(B.scrollLeft(a),e=B.scrollLeft()),L.updatePosition(),_&&j.updatePosition();var i=I.outerWidth()*n/t,a=I.outerWidth()*e/t;O.css({left:a+"px",width:i+"px"}),z.toggleClass("ui-disabled",e<=0),D.toggleClass("ui-disabled",t-n<=e),ce()}function oe(e,t,n,i,a,r,o){e.width=t,e.height=f*l+(o?u:0);var s=ui.initGraph(e),e=s.ctx;e.clearRect(0,0,s.width,s.height),1<l?(se(s,n,t,0,a),se(s,i,t,f,a),o&&le(e,r,t,2*f)):(se(s,n,t,0,a),o&&le(e,r,t,f))}function se(e,t,n,i,a){var r=f/2;i+=r;var o,s,l=e.webColor2RGB(a);if(0<t.length)for(o=0,s=Math.min(n,t.length);o<s;o++)e.line(o,i+t.loData[o]*r,o,i+t.hiData[o]*r,l);else for(extras.srand(0),o=0,s=n;o<s;o++){var u=extras.rand()/extras.randMax*20,c=extras.rand()/extras.randMax*20;e.line(o,i-u,o,i+c,l)}e.redraw()}function le(i,a,e,t){var r=S.duration();if(0!=r){i.beginPath(),i.font="10px Arial",i.strokeStyle=x,i.fillStyle=x;var o=t+8,n=o+16;i.fillText("0",-a,n);var s=B[0].scrollWidth,t=M(r),l=i.measureText(t).width;i.fillText(t,s-2-l-a,n);for(var u,c,f=[1,5,10,15,20,30,60],d=0;u=f[d%f.length],!(2*l<(c=(s-1)*(u*=Math.pow(60,Math.floor(d/f.length)))/r));)d++;var h=0,p=0,_=s-2*l;for(e=e||_;p<_;){if(a<=p&&p<=a+e){y(p,-6,6);for(var v,g,m=1;m<10;m++)m%5==0?y(p+c*m/10,-4,4):y(p+c*m/10,-1,1);0==p?i.fillText("0",0,n):(v=M(h),g=i.measureText(v).width,i.fillText(v,p-g/2-a,n))}h+=u,p+=c}if(a<=p&&p<=a+e)if(p<s-1)for(var b=0,w=c/10;;){if(s-1<=p+w){y(p,-6,6);break}b%5==0?y(p,-4,4):y(p,-1,1),p+=w,b++,h+=u}else y(s-2,-6,6);i.stroke()}function y(e,t,n){e=e+1-a;i.moveTo(e,o+t),i.lineTo(e,o+n)}function M(e){var t=Math.floor(e),n=t%60,e=(t=Math.floor(t/60))%60;return t=Math.floor(t/60),3600<=r?t+":"+ui.format2Digit(e)+":"+ui.format2Digit(n):e+":"+ui.format2Digit(n)}}function ue(){var e=S.duration(),t=P.outerWidth(),n=d/e*t,t=h/e*t-n;Y.css({display:d!=h&&c?"block":"none",left:n+"px"}),Y.outerWidth(t),K.text(ui.formatTime(d)+" - "+ui.formatTime(h)+" ("+ui.formatTime(h-d)+")"),Z.text(d+"|"+h)}function ce(){var e=S.position(),t=S.duration(),n=B.scrollLeft(),i=y.outerWidth(),a=0,r=0,o=!1;d<h&&c?(G.show(),r=G.outerWidth(),a=(d+(h-d)/2)/t*P.outerWidth()-r/2-n,a=ui.ensureRange(a,0,i-r),o=0<=(s=Y.offset().left-y.offset().left)+Y.outerWidth()&&s<i,G.css({display:o?"block":"none",left:Math.floor(a)+"px"}),s=I.outerWidth(),F.css({display:"block",left:d/t*s+"px",width:(h-d)/t*s+"px"})):(G.css({display:"",left:""}),F.css({display:"none",left:"",width:""}));var s=U.outerWidth(),t=0<t?e/t*P.outerWidth()-s/2-n:0;t=ui.ensureRange(t,0,i);n=1;o&&ui.toInt(a<t+s+8)-ui.toInt(t<a+r+3)==0&&(n=-12,0<t&&i-s-2<=(t+=s/2+4)&&(t-=s+8)),t=ui.ensureRange(t,0,i-s-1),U.css({left:Math.floor(t)+"px",bottom:n+"px"})}function fe(){w=w||setInterval(de,50)}function de(){fullScreenVisualisationRunned||he()}function he(){var e,t=S.duration();0<t?e=100*S.position()/t:(e=J,100<(J+=.5)&&(J=0)),E.css("left",e+"%"),H.css("left",e+"%"),U.text(S.positionStr()),ce(),re(),!v&&ee()&&(p=!0)}function pe(e){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){function e(e){for(var t=[],n=0;n<e;n++)t.push((i.readNumber(6)-32)/31);return t}var t,n,i;t=a.response,"Media Engine Wavesurfer Cache\n"==(i=ui.BinaryReader(t)).readString(30)?(n=i.readNumber(32),t=i.readNumber(8),b={length:n,channelsCount:t,loData0:e(n),hiData0:e(n)},1<t&&(b.loData1=e(n),b.hiData1=e(n)),ae()):console.error("Invalid wavesurfer cache file")},a.send()}function _e(e,t,n,i,a){(!a||e<a)&&(a=e),(i=ui.toInt(i))<0&&(i=0),e<i+a&&(i-=e-a);for(var r=0==(n=ui.ensureRange(n,0,S.numberOfChannels()-1))?b.hiData0:b.hiData1,o=0==n?b.loData0:b.loData1,s=[],l=[],u=0,c=0;c<a;c++){for(var f=0,d=0,h=Math.floor((c+i)*b.length/e),p=0;p<t;p++){var _=Math.floor(u+(h-u)*p/t),v=r[_];d<v&&(d=v);_=o[_];_<f&&(f=_)}u=h,s.push(d),l.push(f)}return{length:e,hiData:s,loData:l}}function ve(){return c&&d!=h}function ge(){ui.setError(y.find(".ui-wavesurfer-error-placeholder"),"Please select some area inside wavesurfer first")}function me(){if(S.isStream()||S.isRadio())return!1;if(!c||d==h)return ge(),null;var e=S.getPCMFragment(d,h,!0);return mediaEngineWavEncoder(e.numberOfChannels,e.sampleRate,e.samples0,e.samples1)}function be(){if(S.isStream()||S.isRadio())return!1;var e=window.MediaEngineMp3Encoder;if(!c||d==h||!e)return ge(),null;var t=S.getPCMFragment(d,h,!0);return new e(t.numberOfChannels,t.sampleRate,128).encodeBuffer(t.samples0,t.samples1)}function we(t){if(S.isStream()||S.isRadio())return!1;if(!c||d==h)return ge(),!1;var n=S.paused();return S.pause(),ui.screenLocker.show("loading"),setTimeout(function(){var e=me();e&&ui.download(e,t,"audio/wav"),ui.screenLocker.hide(),n||S.play()},400),!0}function ye(t){if(S.isStream()||S.isRadio())return!1;if(!c||d==h)return ge(),!1;var n=S.paused();return S.pause(),ui.screenLocker.show(),setTimeout(function(){var e=be();e&&ui.download(e,t,"audio/mpeg3"),ui.screenLocker.hide(),n||S.play()},400),!0}y.find(".ui-wavesurfer-about").remove(),y.addClass("ui-wavesurfer-no-about"),te(e),S.requireWavePrint(!0),ui.addResizeHandler(y,ae),S.bindEvent(y,"onOpen",function(){S.isRadio()?y.attr("data-ui-source","radio"):S.isStream()?y.attr("data-ui-source","stream"):y.attr("data-ui-source","file"),ie(),i=h=d=0,ae(),m&&(b=null,ui.isString(m)?pe(m):pe(S.url()+".surf"),m=!1)}),S.bindEvent(y,"onLoad",function(){ae()}),S.bindEvent(y,"onWavePrintDataLoad",function(){b?b=null:ae()}),S.bindEvent(y,"onPause",function(){y.removeClass("ui-wavesurfer-playing"),he(),w&&(clearInterval(w),w=null)}),S.bindEvent(y,"onPlay",function(){y.addClass("ui-wavesurfer-playing"),fe()}),S.bindEvent(y,"onPlay",function(){y.addClass("ui-wavesurfer-playing"),fe()}),S.bindEvent(y,"onSeek",function(){he()}),y.on("mousedown touchstart",".ui-wavesurfer-content",function(e){var a,r,n,o,s,l,i;function u(e){var t;i?(n=ui.ensureRange((e.pageX-P.offset().left)/P.outerWidth()*a,0,a),h=0<l?(t=P.offset().top,e.pageY>=t&&e.pageY<t+P.outerHeight()?(d=ui.ensureRange(n-r,0,a-l))+l:d=0):(d=Math.min(r,n),Math.max(r,n)),ue(),re(),ui.isFunction(g)&&g({startTime:d,endTime:h})):(8<Math.abs(e.pageX-o)||8<Math.abs(e.pageY-s))&&(i=!0)}!c||0!=(a=S.duration())&&(l=0,i=!1,ui.dragAndDrop({event:e,owner:this,cursor:$(this).css("cursor"),startDragging:function(e){var t=d/a*P.outerWidth(),n=h/a*P.outerWidth(),i=e.pageX-P.offset().left;Math.abs(n-i)<=24?r=d:Math.abs(t-i)<=24?r=h:t<i&&i<n?(r=ui.ensureRange(i/P.outerWidth()*a,0,a)-d,l=h-d):r=ui.ensureRange(i/P.outerWidth()*a,0,a),o=e.pageX,s=e.pageY,u(e)},processDragging:u,stopDragging:function(){i||S.seek(o-P.offset().left,P.outerWidth())}}))}),y.on("mousemove",".ui-wavesurfer-content",function(e){var t,n;c&&d!=h&&(t=P.offset().left,n=e.pageX-t,t=(e=Y.offset().left-t)+Y.outerWidth(),n=Math.abs(e-n)<=24||Math.abs(t-n)<=24,P.css("cursor",n?"ew-resize":"default"))}),y.on("mousedown",".ui-wavesurfer-content",function(e){1!=e.which||c||0==S.duration()||S.seek(e.pageX-P.offset().left,P.outerWidth())}),y.on("click",".ui-wavesurfer-play-button",function(){S.play()}),y.on("click",".ui-wavesurfer-pause-button",function(){S.pause()}),y.on("click",".ui-wavesurfer-zoom-in-button",function(){$(this).hasClass("ui-disabled")||(i+=1,ae())}),y.on("click",".ui-wavesurfer-zoom-out-button",function(){$(this).hasClass("ui-disabled")||(--i,ae())}),y.on("click",".ui-wavesurfer-download-selection-button",function(){var e,t;ve()?(e=$(this),t=$('<div class="ui-wavesurfer-download-selection-dropdown ui-stuff" data-ui-dropdown="tooltip-generic box-generic arrow-on to-bottom-center width-full max-height-300 margin-2 anim-in-slide anim-out-slide">\t<div class="ui-wavesurfer-download-selection-dropdown-title">Download selection as:</div>\t<div class="ui-wavesurfer-download-selection-dropdown-list ui-non-selectable">\t\t<div class="ui-wavesurfer-download-selection-dropdown-list-item" data-tag="wav">WAV</div>\t\t<div class="ui-wavesurfer-download-selection-dropdown-list-item" data-tag="mp3">MP3</div>\t</div></div>'),ui.openDropdown(e,t,function(e){e.on("click",".ui-wavesurfer-download-selection-dropdown-list-item",function(){"wav"==$(this).attr("data-tag")?we("fragment.wav"):ye("fragment.mp3"),ui.closeDropdown(e)})})):ge()}),y.on("click",".ui-wavesurfer-scroll-left-button",function(){B.scrollLeft(B.scrollLeft()-y.width()),re()}),y.on("click",".ui-wavesurfer-scroll-right-button",function(){B.scrollLeft(B.scrollLeft()+y.width()),re()}),y.on("mousedown touchstart",".ui-wavesurfer-scroll-rail, .ui-wavesurfer-scroll-bar",function(e){var t,n,i=$(e.target);ui.dragAndDrop({event:e,owner:this,cursor:"pointer",startDragging:function(e){p=!(v=!0),i.hasClass("ui-wavesurfer-scroll-rail")&&(B.scrollLeft((e.pageX-O.outerWidth()/2-I.offset().left)/(I.outerWidth()-O.outerWidth())*(B[0].scrollWidth-B[0].clientWidth)),re()),t=B.scrollLeft(),n=e.pageX},processDragging:function(e){B.scrollLeft(t+(e.pageX-n)/(I.outerWidth()-O.outerWidth())*(B[0].scrollWidth-B[0].clientWidth)),re()},stopDragging:function(){v=!1,p=ee()}})}),y.on("click",".ui-wavesurfer-top-panel-selected-range-box-clear-button",function(){h=d=0,ue(),re()});e={update:te,hasSelection:ve,obtainSelectedAreaAsMP3:be,obtainSelectedAreaAsWAV:me,downloadSelectedAreaAsMP3:ye,downloadSelectedAreaAsWAV:we,destroy:function(){S.unbindEvents(y),ui.removeResizeHandler(y),y.off(),y.remove(),t.removeData("UIWaveSurfer"),delete t[0].uiInterface}};return y.data("UIWaveSurfer",e),t.data("UIWaveSurfer",e),t[0].uiInterface=e},ui.generateWaveSurferCacheForAudioFile=function(){ui.showFileDialog({accept:["audio/mp3","video/mp4"]},function(t){ui.screenLocker.show();var o=engine();o.requireWavePrint(!0),o.setAutoplay(!1),o.bindEvent(o,"onWavePrintDataLoad",function(){var e;ui.screenLocker.hide(),(e=function(){var e=Math.floor(2560*o.duration()/30),t=o.numberOfChannels(),n=o.getWavePrint(e,10,0),i=n.length;if(0==i)return null;var a=ui.BinaryWriter();a.writeString("Media Engine Wavesurfer Cache\n"),a.writeNumber(i,32),a.writeNumber(t,8),r(n.loData),r(n.hiData),1<t&&(r((e=o.getWavePrint(e,10,1)).loData),r(e.hiData));function r(e){for(var t=0;t<i;t++)a.writeNumber(31*e[t]+32,6)}return a.getData()}())&&ui.download(e,t.name+".surf","application/octet-stream"),setTimeout(function(){o.unbindEvents(jQ),o.destroy()},100)}),o.renderFileVariable(t)})},ui.obtainWaveSurferSelectedAreaAsWAV=function(){var e=$(".ui-wavesurfer").data("UIWaveSurfer");return!!e&&e.obtainSelectedAreaAsWAV()},ui.obtainWaveSurferSelectedAreaAsMP3=function(){var e=$(".ui-wavesurfer").data("UIWaveSurfer");return e?e.obtainSelectedAreaAsMP3():null},ui.downloadWaveSurferSelectedAreaAsWAV=function(e){var t=$(".ui-wavesurfer").data("UIWaveSurfer");return!!t&&t.downloadSelectedAreaAsWAV(e)},ui.downloadWaveSurferSelectedAreaAsMP3=function(e){var t=$(".ui-wavesurfer").data("UIWaveSurfer");return!!t&&t.downloadSelectedAreaAsMP3(e)},ui.fn.Waveform=ui.fn.UIWaveform=function(e){var t=$(this),n=t.data("UIWaveform");if(n)return n.update(e),n;sendUsages();var i=$('<div class="ui-waveform ui-stuff">\t<div class="ui-waveform-box">\t\t<canvas class="ui-waveform-canvas" width="0" height="64"></canvas>\t</div></div>');t.prepend(i);var a=e.player;a?(a.enableDSP(!0),a.requireWavePrint(!0),a.bindEvent(i,"onPlay",function(){p()}),a.bindEvent(i,"onPause",function(){c||_()})):(engine.bindEvent(i,"onGlobalPlay",function(){p()}),engine.bindEvent(i,"onGlobalPause",function(){c||_()}));var r=i.find(".ui-waveform-box"),o=i.find(".ui-waveform-canvas")[0],s=o.getContext("2d"),l=null,u="#000000",c=!1,f=!1,d=0,h=!0;function p(){l||(i.addClass("ui-waveform-playing"),v(),l=setInterval(v,20))}function _(){l&&(i.removeClass("ui-waveform-playing"),clearInterval(l),l=null)}function v(){if(!fullScreenVisualisationRunned&&ui.isVisible(o)){o.width=o.parentNode.offsetWidth;var e=engine.getVisualData(a,o.width,0,!1),t=Math.floor(o.height/2);s.clearRect(0,0,o.width,o.height),s.beginPath();for(var n=0;n<o.width;n++){var i=t+e[n]*t;0==n?s.moveTo(n,i):s.lineTo(n,i)}s.strokeStyle=u,s.stroke()}}function g(e){var t,n=!1;(e=ui.toObject(e)).hasOwnProperty("color")&&(u=ui.trim(e.color)),e.hasOwnProperty("opacity")&&i.css("opacity",ui.toFloat(e.opacity)),e.hasOwnProperty("height")&&(o.height=ui.toInt(e.height)),e.hasOwnProperty("ghostMode")&&(f=ui.toBoolean(e.ghostMode),n=!0),e.hasOwnProperty("ghostTop")&&(d=ui.toInt(e.ghostTop),n=!0),e.hasOwnProperty("forceDraw")&&(c=ui.toBoolean(e.forceDraw),i.toggleClass("ui-waveform-force-draw",c)),e.hasOwnProperty("visible")&&(t=ui.toBoolean(e.visible),h!=t&&(h=ui.toBoolean(e.visible),i.toggleClass("ui-waveform-invisible",!h),h&&!a.paused()?p():c||_())),n&&(i.toggleClass("ui-waveform-ghost-mode",f),r.css("padding-top",f?d+"px":""))}g(e),c&&p();e={update:g,destroy:function(){(a||engine).unbindEvents(i),_(),i.remove(),t.removeData("UIWaveform"),delete t[0].uiInterface}};return t.data("UIWaveform",e),t[0].uiInterface=e},ui.fn.CircularSpectrum=ui.fn.UICircularSpectrum=function(e){var t=$(this);if(0==t.length)return console.error("Circular spectrum component has invalid owner",this),{};var n=t.data("UICircularSpectrum");if(n)return n.update(e),n;sendUsages();var i=null,u=e.player||t.data("_uiMediaEnginePlayerInterface"),a=$('<div class="ui-circular-spectrum">\t<canvas class="ui-circular-spectrum-canvas"></canvas></div>');t.append(a);n=t.css("position");"absolute"!=n&&"fixed"!=n&&t.addClass("ui-circular-spectrum-relative-owner");var r=a.find(".ui-circular-spectrum-canvas")[0],c=r.getContext("2d"),f=150,d=110,h=64,p=.7,_=1,o="#9f9f9f",v=6,g=!1,m=.15,s="#e2e2e2",b=[],w=[];function l(){i||(A(),i=setInterval(k,20))}function y(){i&&(R(),clearInterval(i),i=null)}function M(e){var t=!1;(e=ui.toObject(e)).hasOwnProperty("outerSize")&&(f=ui.toInt(e.outerSize),t=!0),e.hasOwnProperty("innerSize")&&(d=ui.toInt(e.innerSize),t=!0),e.hasOwnProperty("barCount")&&(h=ui.toInt(e.barCount),t=!0),e.hasOwnProperty("barSize")&&(p=ui.toFloat(e.barSize),t=!0),e.hasOwnProperty("barSpeed")&&(_=ui.toFloat(e.barSpeed),t=!0),e.hasOwnProperty("barColor")&&(o=ui.toString(e.barColor),t=!0),e.hasOwnProperty("multiplier")&&(v=ui.toFloat(e.multiplier),t=!0),e.hasOwnProperty("showPeaks")&&(g=ui.toBoolean(e.showPeaks),t=!0),e.hasOwnProperty("peakSpeed")&&(m=ui.toFloat(e.peakSpeed),t=!0),e.hasOwnProperty("peakColor")&&(s=ui.toString(e.peakColor),t=!0),e.hasOwnProperty("opacity")&&a.css("opacity",ui.toFloat(e.opacity)),t&&(a.css({"margin-left":-f/2+"px","margin-top":-f/2+"px",width:f+"px",height:f+"px"}),r.width=f,r.height=f,i&&k())}function S(e,t){if(t>=e.length)for(var n=t-e.length,i=0;i<n;i++)e.push(0);else e.length=t}function x(e,t,n){for(var i=0;i<e.length;i++)e[i]-=n,t[i]>e[i]&&(e[i]=t[i]),e[i]<0&&(e[i]=0)}function k(){!fullScreenVisualisationRunned&&ui.isVisible(a)&&A()}function A(){var e,t=f/2,n=d/2,i=(f-d)/2*v,a=engine.getSpectrumData(u,h,0,!1);b.length!=a.length&&(e=a.length,S(b,e),S(w,e)),x(b,a,_),x(w,a,m),R();for(var r=0;r<h;r++){var o=r/h*2*Math.PI-Math.PI,s=o-Math.PI/h*p,l=o+Math.PI/h*p,o=n+Math.sqrt(b[r]*i);c.beginPath(),c.moveTo(t+n*Math.cos(s),t+n*Math.sin(s)),c.lineTo(t+o*Math.cos(s),t+o*Math.sin(s)),c.lineTo(t+o*Math.cos(l),t+o*Math.sin(l)),c.lineTo(t+n*Math.cos(l),t+n*Math.sin(l)),c.closePath(),c.fill(),g&&(o=n+Math.sqrt(w[r]*i),c.beginPath(),c.moveTo(t+o*Math.cos(s),t+o*Math.sin(s)),c.lineTo(t+o*Math.cos(l),t+o*Math.sin(l)),c.stroke())}}function R(){c.clearRect(0,0,r.width,r.height),c.strokeStyle=s,c.fillStyle=o}u?(u.enableDSP(!0),u.requireWavePrint(!0),u.bindEvent(a,"onPause",function(){y()}),u.bindEvent(a,"onPlay",function(){l()})):(engine.enableDSP(!0),engine.requireWavePrint(!0),engine.bindEvent(a,"onGlobalPause",function(){y()}),engine.bindEvent(a,"onGlobalPlay",function(){l()})),M(e);e={update:M,destroy:function(){(u||engine).unbindEvents(a),y(),a.remove(),t.removeClass("ui-circular-spectrum-relative-owner"),t.removeData("UICircularSpectrum"),delete t[0].uiInterface}};return t.data("UICircularSpectrum",e),t[0].uiInterface=e},ui.fn.PlayButton=ui.fn.UIPlayButton=function(e){var t=$(this),n=t.data("UIPlayButton");if(n)return n.update(e),n;sendUsages();var i=$('<div class="ui-play-button ui-stuff ui-non-selectable">\t<div class="ui-play-button-icon-area">\t\t<div class="ui-play-button-play-icon">\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.1,5.9v12.2c0,0.9,1,1.5,1.8,1l9.6-6.1c0.7-0.5,0.7-1.5,0-2L8.9,4.9C8.1,4.4,7.1,5,7.1,5.9z"/></svg>\t\t</div>\t\t<div class="ui-play-button-pause-icon">\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7,19h2c0.6,0,1-0.4,1-1V6c0-0.6-0.4-1-1-1H7C6.4,5,6,5.4,6,6v12C6,18.6,6.4,19,7,19z M14,6v12c0,0.6,0.4,1,1,1h2c0.6,0,1-0.4,1-1V6c0-0.6-0.4-1-1-1h-2C14.4,5,14,5.4,14,6z"/></svg>\t\t</div>\t</div></div>');t.append(i);var a=i.find(".ui-play-button-icon-area"),r=i.find(".ui-play-button-play-icon svg"),o=i.find(".ui-play-button-pause-icon svg"),s=24,l=24,u="#00000",c=u,f=e.player;function d(e){var t=!1;(e=ui.toObject(e)).hasOwnProperty("size")&&(s=ui.toInt(e.size),t=!0),e.hasOwnProperty("outerSize")&&(l=ui.toInt(e.outerSize),t=!0),e.hasOwnProperty("color")&&(u=ui.trim(e.color),c=u,a.css("color",u),r.attr("fill",u),o.attr("fill",u)),e.hasOwnProperty("hoverColor")&&(c=ui.trim(e.hoverColor)),e.hasOwnProperty("hoverDuration")&&a.css("transition","color "+ui.toInt(e.hoverDuration)+"ms linear"),e.hasOwnProperty("id")&&i.attr("id",ui.trim(e.id)),t&&((t=(l-s)/2)<0&&(t=0),i.css({width:l+"px",height:l+"px"}),a.css({left:t+"px",top:t+"px"}),r.attr("width",s),r.attr("height",s),o.attr("width",s),o.attr("height",s))}d(e),f.bindEvent(i,"onPause",function(){i.removeClass("ui-play-button-playing")}),f.bindEvent(i,"onPlay",function(){i.addClass("ui-play-button-playing")}),i.on("click",function(){f.paused()?f.play():f.pause()}),i.on("mouseenter",function(){c!=u&&a.css("color",c)}),i.on("mouseleave",function(){c!=u&&a.css("color",u)});e={update:d,destroy:function(){f.unbindEvents(i),i.remove(),t.removeData("UIPlayButton"),delete t[0].uiInterface}};return t.data("UIPlayButton",e),t[0].uiInterface=e,i.data("_uiMediaEnginePlayerInterface",f),e},lm={},pQ=lm,vQ=qQ("RJINFdJSLNSJdITRFNS"),wQ=qQ("RJINFdJSLNSJdPJ^"),xQ=location.hostname,yQ=qQ("fqj}2uqf~jw"),zQ=qQ("fqj}3uqf~jw3}653sfrj"),xQ==yQ?(window[vQ]=yQ,window[wQ]=qQ("U^ONI2:ZNHJ2MRMYX2INF^L")):xQ==zQ&&(window[vQ]=zQ,window[wQ]=qQ("U^ONQ2NZNHJ2MKLYX2IN[6L")),pQ.c=function(){var e,t,n=qQ("RJINFdJSLNSJdITRFNS"),i=qQ("RJINFdJSLNSJdPJ^"),a=window[n],r=window[i],o=qQ("mtxysfrj");location[o];if(a!=location[o])return!!pQ.lsed;for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZ123456",l=[],u=0;u<5;u++)l.push(extras._rand());for(u=0;u<100;u++){var c=l[0];l[0]=l[1]^c,l[1]=l[2]^extras._rand(),l[2]=l[3],l[3]=l[4]^c,l[4]=location[o].charCodeAt(u%location[o].length)}var f=ui.BinaryWriter();for(u=0;u<5;u++)f.writeNumber(l[u],31);e=f.getData();var d=[];for(u=0;u<s.length;u++)d[s[u]]=u;for(f=ui.BinaryWriter(),u=0;u<r.length;u++){var h=r[u];d.hasOwnProperty(h)&&f.writeNumber(d[h],5)}for(t=f.getData(),pQ.lsed=1,u=0;u<12;u++)pQ.lsed&=!(e[u]^t[u]);return delete window[n],delete window[i],pQ.lsed},-1!=location.href.indexOf(location.hostname)&&(ui.fn.Equalizer=ui.fn.UIEqualizer=function(e){var t=$(this),n=t.data("UIEqualizer");if(n)return ui.isObject(n)&&n.update(e),n;sendUsages();var r=(e=ui.toObject(e)).player;if(!r)return console.error("Equalizer should be connected to some player"),{};r.enableDSP(!0),r.requireWavePrint(!0);var o=$('<div class="ui-equalizer ui-stuff ui-non-selectable">\t<div class="ui-equalizer-main-panel">\t\t<div class="ui-equalizer-top-panel">\t\t\t<div class="ui-equalizer-visualization-panel"></div>\t\t\t<div class="ui-equalizer-vu-meters">\t\t\t\t<div class="ui-equalizer-vu-in"></div>\t\t\t\t<div class="ui-equalizer-vu-out"></div>\t\t\t</div>\t\t</div>\t\t<div class="ui-equalizer-geq-panel"></div>\t\t<div class="ui-equalizer-eq-graph-panel"></div>\t</div>\t<div class="ui-equalizer-params-panel">\t\t<div class="ui-equalizer-balance-slider"></div>\t\t<div class="ui-equalizer-lowpass-slider"></div>\t\t<div class="ui-equalizer-highpass-slider"></div>\t\t<div class="ui-equalizer-3d-slider"></div>\t</div></div>');t.append(o);var i=QQ(o.find(".ui-equalizer-vu-in"),{player:r,title:"IN",applyDSP:!1}),a=QQ(o.find(".ui-equalizer-vu-out"),{player:r,title:"OUT",applyDSP:!0}),s=UQ(o.find(".ui-equalizer-visualization-panel"),r),l=VQ(o.find(".ui-equalizer-balance-slider"),{player:r,label:"Balance",value:r.dsp.balance.getValue(),minValue:-1,maxValue:1,formatHandler:function(e){var t=e.toFixed(2);return"0.00"!=t&&0<e?"+"+t:t},onChange:function(e){r&&r.dsp.balance.setValue(e.value)}}),u=VQ(o.find(".ui-equalizer-lowpass-slider"),{player:r,label:"Lowpass",value:1-r.dsp.lowpass.getValue(),minValue:0,maxValue:1,onChange:function(e){r&&r.dsp.lowpass.setValue(1-e.value)}}),c=VQ(o.find(".ui-equalizer-highpass-slider"),{player:r,label:"Highpass",value:r.dsp.highpass.getValue(),minValue:0,maxValue:1,onChange:function(e){r&&r.dsp.highpass.setValue(e.value)}}),f=VQ(o.find(".ui-equalizer-3d-slider"),{player:r,label:"3D",value:r.dsp.sound3d.getValue(),minValue:0,maxValue:1,onChange:function(e){r&&r.dsp.sound3d.setValue(e.value)}}),d=XQ(o.find(".ui-equalizer-geq-panel"),r),h=YQ(o.find(".ui-equalizer-eq-graph-panel"),{player:r,onGetPoints:function(e,t){var n=[];n.push({x:0,y:t/2});for(var i=0;i<10;i++){var a=d.bandOffsX(i)-o.offset().left;n.push({x:a,y:t-(r.dsp.equalizer.getEQBand(i)+20)/40*(t-24)-12})}return n.push({x:e,y:t/2}),n}});v(e);var p,_=setInterval(function(){if(fullScreenVisualisationRunned||!ui.isVisible(o))return;i.drawFrame(),a.drawFrame()},20);function v(e){var t,n;(e=ui.toObject(e)).hasOwnProperty("color")&&(t=ui.trim(e.color),n={color:t},l.update(n),u.update(n),c.update(n),f.update(n),d.update({color:t})),e.hasOwnProperty("visType")&&s.setVisType(e.visType),e.hasOwnProperty("onSelectVis")&&s.setVisChangeHandler(e.onSelectVis),e.hasOwnProperty("cookieName")&&r.dsp.setCookieName(e.cookieName)}function g(){o.removeClass("ui-m1"),o.removeClass("ui-m2");var e=o.outerWidth();e<580&&o.addClass("ui-m1"),e<420&&o.addClass("ui-m2"),h.adjust()}function m(){var e,t=r.dsp.getCookieName();t&&(e=[r.dsp.equalizer.getPreamp().toFixed(3),r.dsp.equalizer.getEQBand(0).toFixed(3),r.dsp.equalizer.getEQBand(1).toFixed(3),r.dsp.equalizer.getEQBand(2).toFixed(3),r.dsp.equalizer.getEQBand(3).toFixed(3),r.dsp.equalizer.getEQBand(4).toFixed(3),r.dsp.equalizer.getEQBand(5).toFixed(3),r.dsp.equalizer.getEQBand(6).toFixed(3),r.dsp.equalizer.getEQBand(7).toFixed(3),r.dsp.equalizer.getEQBand(8).toFixed(3),r.dsp.equalizer.getEQBand(9).toFixed(3),r.dsp.balance.getValue().toFixed(3),r.dsp.lowpass.getValue().toFixed(3),r.dsp.highpass.getValue().toFixed(3),r.dsp.sound3d.getValue().toFixed(3)],ui.setCookie(t,e.join(",")))}g(),ui.addResizeHandler(o,g),r.bindEvent(o,"onPreampChanged",function(){d.preampChanged(),m()}),r.bindEvent(o,"onEQBandChanged",function(){d.eqBandChanged(),h.drawGraph(),m()}),r.bindEvent(o,"onBalanceChanged",function(){l.update({value:r.dsp.balance.getValue()}),m()}),r.bindEvent(o,"onLowpassChanged",function(){u.update({value:1-r.dsp.lowpass.getValue()}),m()}),r.bindEvent(o,"onHighpassChanged",function(){c.update({value:r.dsp.highpass.getValue()}),m()}),r.bindEvent(o,"onSound3DChanged",function(){f.update({value:r.dsp.sound3d.getValue()}),m()}),o.on("uiScroll",function(){h.drawGraph()}),lm.c()||(b=$('<div style="display: inline-block; position: absolute; left: 2px; bottom: 0; color: #8b8b8b; padding: 4px; font-size: 10px; line-height: 9px; cursor: pointer"><a style="diplay: block; position: absolute; left: 0; top: 0; right: 0; bottom: 0" href="http://alex.player.x10.name/" target="_blank"></a>Alex Player v'+engineVersion+"</div>"),(p=b).on("mouseenter",function(){_Q(p,1)}),p.on("mouseleave",function(){_Q(p,0)}),$.fn[Math.random()<.5?"append":"prepend"].call(o.find(Math.random()<.5?".ui-equalizer-eq-graph-panel":".ui-equalizer-graph"),b));var b={update:v,destroy:function(){clearInterval(_),s.destroy(),d.destroy(),h.destroy(),l.destroy(),u.destroy(),c.destroy(),f.destroy(),ui.removeResizeHandler(o),r.unbindEvents(o),o.remove(),t.removeData("UIEqualizer"),delete t[0].uiInterface}};return t.data("UIEqualizer",b),t[0].uiInterface=b},ui.runAudioScreensaver=function(i){var a,b=240,w=Math.floor(b/screen.height*screen.width),c=new Uint8Array(w*b*4),f=new Uint8Array(w*b*4),y=new Uint8Array(w*b),M=new Uint8Array(w*b),S=new Uint8Array(w*b),x=new Uint8Array(w*b),k=new Int32Array(w*b),A=Math.floor(w/2-1),R=Math.floor(b/2-1),d=0,r=null,o=null,s=null,l=null,u=null,h=null,p=null,_=null,v=null,g=0,m=0,E=0,B=1,P=0,T=1,C=[],I=!1;function O(){I||(T=q()%4+1,B=q()%9+1)}function V(){if(!I){if(B!=P){switch(B){case 1:!function(){var e,t,n,i,a,r,o,s,l,u,c,f;for(e=.007+q()%1e3*.001*.02,t=Math.cos(e),n=Math.sin(e),i=w*(b-3)-1,o=a=0;o<b;o++)for(r=0;r<w;r++)f=(u=(u=r-A)*t-(f=o-R)*n)*n+f*t,c=.9+28e-5*Math.sqrt(u*u+f*f),u=(r+(u=u*c+A))/2,f=(o+(f=f*c+R))/2,s=Math.floor(u),l=Math.floor(f),c=u-s,u=f-l,y[f=o*w+r]=Math.floor((1-c)*(1-u)*255),M[f]=Math.floor(c*(1-u)*255),S[f]=Math.floor((1-c)*u*255),x[f]=Math.floor(c*u*255),u=a,(a=l*w+s)<w&&(a=w),i<=a&&(a=i),k[f]=a-u<<2}();break;case 2:!function(){var e,t,n,i,a,r,o,s,l,u,c,f,d;for(e=.01+q()%1e3*.001*.01,t=Math.cos(e),n=Math.sin(e),i=2/w,a=.5*w,s=r=0;s<b;s++)for(o=0;o<w;o++)l=o-A,u=s-R,c=(c=(l*=i)*t-(u*=i)*n)*(f=.97-u*u*.4)*a+A,d=(d=l*n+u*t)*f*a+R,l=Math.floor(c),u=Math.floor(d),f=c-l,c=d-u,y[d=s*w+o]=Math.floor((1-f)*(1-c)*255),M[d]=Math.floor(f*(1-c)*255),S[d]=Math.floor((1-f)*c*255),x[d]=Math.floor(f*c*255),c=r,r=u*w+l,k[d]=r-c<<2}();break;case 3:!function(){var e,t,n,i,a,r,o,s,l,u,c,f,d,h,p,_,v,g,m;for(e=[],t=[],a=0;a<5;a++)e.push(q()%(10*w)*.1),t.push(q()%(10*b)*.1);for(i=w*(b-3)-1,o=n=0;o<b;o++)for(r=0;r<w;r++){for(a=s=f=c=0;a<5;a++)d=e[a]-r,h=t[a]-o,s+=l=1/(.1+(l=u=d*d+h*h)),u=Math.sqrt(u),c+=(l+=l)*h*(u=1/(u+.01)),f+=l*-d*u;for(1e-6<s?(c*=s=1.9/s,f*=s):f=c=0,d=r+c-.1,h=o+f+.6;d<0;)d+=w-1;for(;w-1<d;)d-=w-1;p=Math.floor(d),_=Math.floor(h),v=d-p,g=h-_,y[m=o*w+r]=Math.floor((1-v)*(1-g)*255),M[m]=Math.floor(v*(1-g)*255),S[m]=Math.floor((1-v)*g*255),x[m]=Math.floor(v*g*255),g=n,(n=_*w+p)<w&&(n=w),i<=n&&(n=i),k[m]=n-g<<2}}();break;case 4:!function(){var e,t,n,i,a,r,o,s,l,u;for(l=0,e=Math.cos(.05),t=Math.sin(.05),i=0;i<b;i++)for(n=0;n<w;n++)u=(s=(s=n-A)*e-(u=i-R)*t)*t+u*e,s=.96*s+A,u=.96*u+R,a=Math.floor(s),r=Math.floor(u),o=s-a,s=u-r,y[u=i*w+n]=Math.floor((1-o)*(1-s)*255),M[u]=Math.floor(o*(1-s)*255),S[u]=Math.floor((1-o)*s*255),x[u]=Math.floor(o*s*255),s=l,l=r*w+a,k[u]=l-s<<2}();break;case 5:!function(){var e,t,n,i,a,r,o,s,l,u,c,f;for(u=0,c=1+q()%1e3*.001*.02,e=.02+q()%1e3*.001*.07,t=Math.cos(e),n=Math.sin(e),a=0;a<b;a++)for(i=0;i<w;i++)f=(l=(l=i-A)*t-(f=a-R)*n)*n+f*t,l=l*c+A,f=f*c+R,r=Math.floor(l),o=Math.floor(f),s=l-r,l=f-o,y[f=a*w+i]=Math.floor((1-s)*(1-l)*255),M[f]=Math.floor(s*(1-l)*255),S[f]=Math.floor((1-s)*l*255),x[f]=Math.floor(s*l*255),l=u,u=o*w+r,k[f]=u-l<<2}();break;case 6:!function(){var e,t,n,i,a,r,o,s,l,u,c,f;for(e=0,t=.985-.12*Math.pow(q()%1e3*.001,2),n=.01+q()%1e3*.001*.01,i=Math.cos(n),a=Math.sin(n),o=0;o<b;o++)for(r=0;r<w;r++)f=(c=(c=r-A)*i-(f=o-R)*a)*a+f*i,c=c*t+A,f=f*t+R,s=Math.floor(c),l=Math.floor(f),u=c-s,c=f-l,y[f=o*w+r]=Math.floor((1-u)*(1-c)*255),M[f]=Math.floor(u*(1-c)*255),S[f]=Math.floor((1-u)*c*255),x[f]=Math.floor(u*c*255),c=e,e=l*w+s,k[f]=e-c<<2}();break;case 7:!function(){var e,t,n,i,a,r,o,s,l,u,c,f,d,h,p,_,v,g,m;for(e=.92+q()%1e3*.001*.01,t=6e-4+q()%1e3*.001*5e-4,n=640/w,i=0,a=1,r=.01+q()%1e3*.001*.01,o=Math.cos(r),s=Math.sin(r),u=[],c=l=0;c<2345;c++)u.push(q()%100*5e-4);for(d=0;d<b;d++)for(f=0;f<w;f++){for(h=f-A,m=d-R,g=Math.sqrt(h*h+m*m)*t,a=e-(g*=n),a+=u[l++],2345<=l&&(l=0),m=(h=h*o-m*s)*s+m*o,h=.625*f+.375*(h=h*a+A),m=.625*d+.375*(m=m*a+R);h<0;)h+=w-1;for(;w-1<h;)h-=w-1;p=Math.floor(h),_=Math.floor(m),v=h-p,g=m-_,y[m=d*w+f]=Math.floor((1-v)*(1-g)*255),M[m]=Math.floor(v*(1-g)*255),S[m]=Math.floor((1-v)*g*255),x[m]=Math.floor(v*g*255),g=i,i=_*w+p,k[m]=i-g<<2}}();break;case 8:!function(){var e,t,n,i,a,r,o,s,l,u,c,f,d,h;for(e=q()%1e3*.001,e*=e,e*=e,e*=8,e+=1.5,t=640/w,n=0,i=1,a=q()%1e3*.001*.05,r=Math.cos(a),o=Math.sin(a),l=0;l<b;l++)for(s=0;s<w;s++)d=s-A,h=l-R,f=Math.sqrt(d*d+h*h),f*=t,i=.85+.1*Math.sin(Math.sqrt(f)*e),h=(d=d*r-h*o)*o+h*r,d=d*i+A,h=h*i+R,u=Math.floor(d),c=Math.floor(h),f=d-u,d=h-c,y[h=l*w+s]=Math.floor((1-f)*(1-d)*255),M[h]=Math.floor(f*(1-d)*255),S[h]=Math.floor((1-f)*d*255),x[h]=Math.floor(f*d*255),d=n,n=c*w+u,k[h]=n-d<<2}();break;case 9:!function(){var e,t,n,i,a,r,o,s,l,u,c,f,d,h,p,_;for(d=0,h=1.008+q()%1e3*.001*.008,p=h,e=.12+q()%1e3*.001*.06,t=e,e*=-.6,t*=.1,h*=.99,p*=1.01,n=Math.cos(e),i=Math.sin(e),a=Math.cos(t),r=Math.sin(t),s=0;s<b;s++)for(o=0;o<w;o++)f=o-A,_=s-R,_=o%2==s%2?(_=(f=f*n-_*i)*i+_*n,f=f*h+A,_*h+R):(_=(f=f*a-_*r)*r+_*a,f=f*p+A,_*p+R),f=.625*o+.375*f,_=.625*s+.375*_,l=Math.floor(f),u=Math.floor(_),c=f-l,f=_-u,y[_=s*w+o]=Math.floor((1-c)*(1-f)*255),M[_]=Math.floor(c*(1-f)*255),S[_]=Math.floor((1-c)*f*255),x[_]=Math.floor(c*f*255),f=d,d=u*w+l,k[_]=d-f<<2}()}P=B}d++,function(){var e,t,n,i,a,r,o,s,l,u;for(t=w*b,n=4*w,e=r=i=0;e<t;e++)i+=k[e],a=i+n,o=y[e],s=M[e],l=S[e],u=x[e],f[r]=o*c[i]+s*c[i+4]+l*c[a]+u*c[a+4]>>8,f[r+1]=o*c[i+1]+s*c[i+5]+l*c[a+1]+u*c[a+5]>>8,f[r+2]=o*c[i+2]+s*c[i+6]+l*c[a+2]+u*c[a+6]>>8,r+=4}();for(var e=0,t=0;t<f.length;t++)h[e]=f[e],h[e+1]=f[e+1],h[e+2]=f[e+2],e+=4;l.putImageData(u,0,0),function(){var e=216.675,t=7*Math.sin(.006*d+59)+5*Math.cos(.0077*d+17),n=e*(1+.3*Math.sin(d*C[0]+10-t))*(1+.2*Math.cos(d*C[1]+37+t)),i=e*(1+.3*Math.sin(d*C[2]+32+t))*(1+.2*Math.cos(d*C[3]+16-t)),t=e*(1+.3*Math.sin(d*C[4]+87-t))*(1+.2*Math.cos(d*C[5]+25+t));switch(n<0&&(n=0),255<n&&(n=255),i<0&&(i=0),255<i&&(i=255),t<0&&(t=0),255<t&&(t=255),g=n,m=i,E=t,T){case 1:!function(){var e,t,n,i;for(e=engine.getVisualData(null,w,0),n=R+32*e[0],t=0;t<w;t++)n=.9*n+.1*(R+32*e[t]),i=Math.floor(n),E>f[i=w*i+t<<2]&&(f[i]=E),m>f[1+i]&&(f[1+i]=m),g>f[2+i]&&(f[2+i]=g)}();break;case 2:!function(){var e,t,n,i;for(e=engine.getVisualData(null,b,0),n=A+32*e[0],t=0;t<b;t++)n=.9*n+.1*(A+32*e[t]),i=Math.floor(n),E>f[i=w*t+i<<2]&&(f[i]=E),m>f[1+i]&&(f[1+i]=m),g>f[2+i]&&(f[2+i]=g)}();break;case 3:!function(){var e,t,n,i,a,r;for(e=engine.getVisualData(null,364,0),t=0;t<50;t++)e[t]=(t*e[t]+(50-t)*e[314+t])/50;for(n=w/640*60,i=Math.floor(n+63.5*e[0]),t=0;t<314;t++)i=.5*i+.5*(n+63.5*e[t]),r=Math.floor(A+i*Math.cos(.02*t)),a=Math.floor(R+i*Math.sin(.02*t)),E>f[r=w*a+r<<2]&&(f[r]=E),m>f[1+r]&&(f[1+r]=m),g>f[2+r]&&(f[2+r]=g)}();break;case 4:!function(){var e,t,n,i,a,r,o,s,l,u;for(l=engine.getVisualData(null,314,0),u=engine.getVisualData(null,314,1),s=Math.sin(.01*d),i=Math.cos(s),a=Math.sin(s),e=o=r=0;e<314;e++)r=.5*r+127*l[e]*.5,o=.5*o+127*u[e]*.5,n=Math.floor(r*i+o*a)+A,t=Math.floor(r*-a+o*i)+R,E>f[n=w*t+n<<2]&&(f[n]=E),m>f[1+n]&&(f[1+n]=m),g>f[2+n]&&(f[2+n]=g)}()}}();var n=c;c=f,f=n}}function q(){return Math.floor(32767*Math.random())}function z(){r&&(clearInterval(_),clearInterval(v),ui.removeResizeHandler(r),r.remove(),r=null,fullScreenVisualisationRunned=!1)}!function(){r=$('<div class="ui-audio-screensaver">\t<canvas class="ui-audio-screensaver-canvas"></canvas>\t<div class="ui-audio-screensaver-invisible-box"><input class="ui-audio-screensaver-invisible-input" type="text"/></div></div>'),$(document.body).append(r),a=r.find(".ui-audio-screensaver-invisible-input"),ui.fullScreenMode.enter(r,z),fullScreenVisualisationRunned=!0,o=r.find(".ui-audio-screensaver-canvas"),(s=o[0]).width=w,s.height=b,l=s.getContext("2d"),u=l.getImageData(0,0,s.width,s.height),h=u.data,p=new Int32Array(b);for(var e=0;e<b;e++)p[e]=e*w;for(var t=0;t<b;t++)for(var n=0;n<w;n++)h[3+(p[t]+n<<2)]=255;o.css({width:window.screen.width+"px",height:window.screen.height+"px"}),a.focus(),r.on("click",z),a.on("keydown",function(e){27==e.keyCode&&z()}),a.on("keypress",function(e){switch(String.fromCharCode(e.charCode)){case" ":i&&(I=i.paused()?(i.play(),!1):(i.pause(),!0));break;case"1":T=1;break;case"2":T=2;break;case"3":T=3;break;case"4":T=4;break;case"5":T=5;break;case"q":B=1;break;case"w":B=2;break;case"e":B=3;break;case"r":B=4;break;case"t":B=5;break;case"y":B=6;break;case"u":B=7;break;case"i":B=8;break;case"o":B=9}}),setTimeout(function(){_=setInterval(V,20),v=setInterval(O,1e4);for(var e=0,t=w*b;e<t;e++)c[e]=0,f[e]=0;for(e=0;e<6;e++)C.push(q()%1e3*.001*.01+.02);O()},50)}()},ui.runAudioScreensaverOld=function(){var le=600,ue=600,e=function(e,t){var a,n,r,o,i,s,l,u,c,f,d,h,p,_,v,g,m,b,w,y,M,S,x,k,A,R,E,B,P,T,C,I,O,V,q=$('<div class="ui-audio-screensaver">\t<canvas class="ui-audio-screensaver-canvas"></canvas></div>');$(document.body).append(q);var z=4096,D=1,H=1,F=Math.floor(6144*Math.random()),L=q.find(".ui-audio-screensaver-canvas"),N=L[0];N.width=le,N.height=ue;var Q=N.getContext("2d"),W=Q.getImageData(0,0,N.width,N.height),X=W.data;!function(){for(var e=0;e<ue;e++)for(var t=0;t<le;t++)X[3+(e*le+t<<2)]=255}();for(var j=new Uint8Array(z),Y=new Uint8Array(z),U=new Uint8Array(z),G=new Int32Array(36e4),K=new Int32Array(360001),Z=new Int32Array(36e4),J=new Int32Array(ue),ee=0;ee<ue;ee++)J[ee]=ee*le;L.css({width:window.screen.width+"px",height:window.screen.height+"px"});var te=36e4;oe();var ne=setInterval(function(){e()},100),ie=setInterval(function(){for(function(){for(o=0;o<ue;o++)for(r=0;r<le;r++)v=J[o]+r,G[v]*=H}(),function(){for(o=a=0;o<ue;o++)for(r=g=0;r<le;r++)K[a]=g,a++,g+=G[J[o]+r];m=le,b=0;for(;m<te;)K[m]+=K[b],m++,b++;for(w=599-D,o=a=0;o<ue;o++)for(d=(x=ue-D<=o?599-o:D)-(S=o<D?-o:-D-1),S*=le,x*=le,r=0;r<le;r++)k=((M=w<r?599-r:D+1)-(y=r<D?-r:-D))*d,y+=a,M+=a,G[J[o]+r]+=(K[y+S]+K[M+x]-K[y+x]-K[M+S])/k,a++}(),function(){for(o=0;o<ue;o++)for(r=0;r<le;r++)v=J[o]+r,K[v]=G[Z[v]];for(a=0;a<G.length;a++)G[a]=K[a]}(),a=n=0;a<G.length;a++)i=G[a],X[n]=j[i],X[n+1]=Y[i],X[n+2]=U[i],n+=4;Q.putImageData(W,0,0)},40),ae=setInterval(oe,100);function re(){q&&(t(),clearInterval(ne),clearInterval(ie),clearInterval(ae),ui.removeResizeHandler(q),q.remove(),q=null,fullScreenVisualisationRunned=!1)}function oe(){for(F%=6144,a=0;a<z;a++){var e=256*a/z,t=a*a*256/z/z,n=a*a*a*256/z/z/z,i=F%1024;F<1024?(j[a]=Math.floor(e+(t-e)*i/1024),Y[a]=Math.floor(t+(e-t)*i/1024),U[a]=Math.floor(n)):F<2048?(j[a]=Math.floor(t),Y[a]=Math.floor(e+(n-e)*i/1024),U[a]=Math.floor(n+(e-n)*i/1024)):F<3072?(j[a]=Math.floor(t+(e-t)*i/1024),Y[a]=Math.floor(n),U[a]=Math.floor(e+(t-e)*i/1024)):F<4096?(j[a]=Math.floor(e+(n-e)*i/1024),Y[a]=Math.floor(n+(e-n)*i/1024),U[a]=Math.floor(t)):F<5120?(j[a]=Math.floor(n),Y[a]=Math.floor(e+(t-e)*i/1024),U[a]=Math.floor(t+(e-t)*i/1024)):F<6144&&(j[a]=Math.floor(n+(e-n)*i/1024),Y[a]=Math.floor(t),U[a]=Math.floor(e+(n-e)*i/1024))}F+=5}function se(e,t,n,i){if(h=Math.abs(e-n),p=Math.abs(t-i),0!=(_=Math.max(h,p)))for(f=Math.floor((n-e<<16)/_),d=Math.floor((i-t<<16)/_),u=e<<16,c=t<<16;_;)l=c>>16,1<=(s=u>>16)&&s<le&&1<=l&&l<ue&&(G[J[l]+s]=4095),u+=f,c+=d,_--}return ui.fullScreenMode.enter(q,re),fullScreenVisualisationRunned=!0,q.on("click",re),{setBlur:function(e){D=e},setDarkness:function(e){H=e},setPolarMask:function(e,t,n,i){for(o=0;o<ue;o++)for(r=0;r<le;r++)A=r-e-.5,R=o-t-.5,E=Math.atan2(R,A),B=Math.hypot(A,R),B*=n,E+=i,P=Math.floor(B*Math.cos(E)+e),T=Math.floor(B*Math.sin(E)+t),Z[J[o]+r]=P<0||T<0||le<=P||ue<=T?K.length-1:T*le+P},drawLine:se,drawPixel:function(e,t,n){0<=e&&e<le&&0<=t&&t<ue&&(G[J[t]+e]+=n)},drawHorizontalWave:function(e){for(C=engine.getVisualData(null,le,0),r=V=0;r<C.length;r++)V+=.5*(C[r]-V),o=Math.floor(300-V*e),0<r&&se(I,O,r,o),I=r,O=o}}}(function(){e.drawHorizontalWave(60)},function(){});e.setPolarMask(300,300,.87,.04),e.setBlur(1),e.setDarkness(.47)},ui.fn.Playlist=ui.fn.UIPlaylist=function(e){var t=$(this),n=t.data("UIPlaylist");if(n)return ui.isObject(n)&&n.update(e),n;var s=$('<div class="ui-playlist ui-stuff ui-non-selectable">\t<div class="ui-playlist-items"></div>\t<div class="ui-playlist-bottom-panel">\t\t<div class="ui-playlist-bottom-left-panel">\t\t\t<div class="ui-playlist-add-button" data-ui-hint="Add more files">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 24V0h24v24H0z" fill="none"/><path d="M5 17h14v2H5zm7-12L5.33 15h13.34z"/></svg>\t\t\t</div>\t\t\t<div class="ui-playlist-prev-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>\t\t\t</div>\t\t\t<div class="ui-playlist-next-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>\t\t\t</div>\t\t</div>\t\t<div class="ui-playlist-bottom-right-panel">\t\t\t<div class="ui-playlist-time-bar"></div>\t\t\t<div class="ui-playlist-extra-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>\t\t\t</div>\t\t\t<div class="ui-playlist-visualization-box"><canvas width="64" height="20"></canvas></div>\t\t</div>\t</div></div>');t.append(s),e=ui.toObject(e);var l=s.find(".ui-playlist-items"),i=s.find(".ui-playlist-time-bar"),a=e.player,r=!0,u=null,o=null,c=null,f=!1,d="#727272",h=initSmallVisualizationBox(s.find(".ui-playlist-visualization-box canvas"),a,{visType:2,color:"#000000"}),p=ui(s).dropFilesArea({onDropFiles:function(e){for(var t=0;t<e.length;t++)m(e[t])}}),_=ui(s.find(".ui-playlist-items")).dragSort({dragPlaceholderSelector:".ui-playlist-item-title",dragSortHandler:function(){}});function v(e){(e=ui.toObject(e)).hasOwnProperty("mode")&&function e(t){switch(t){case"simple":case"extended":r="extended"==t,s.toggleClass("ui-playlist-mode-extended"),p.update({disabled:!r}),_.update({disabled:!r});break;default:e("simple")}}(e.mode),e.hasOwnProperty("items")&&function(e){for(var t=0;t<e.length;t++)g(e[t])}(e.items),e.hasOwnProperty("equalizerColor")&&(d=e.equalizerColor)}function g(e,t){var n=$('<div class="ui-playlist-item">\t<div class="ui-playlist-item-play-button">\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t</div>\t<div class="ui-playlist-item-pause-button">\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t</div>\t<div class="ui-playlist-item-title" data-ui-inplace-hint></div>\t<div class="ui-playlist-item-repeat-button">\t\t<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"/></svg>\t</div>\t<div class="ui-playlist-item-progress">\t\t<div class="ui-playlist-item-progress-line">\t\t\t<div class="ui-playlist-item-position"></div>\t\t</div>\t</div></div>');n.data("itemData",e),n.find(".ui-playlist-item-title").text(ui.trim(e.title)||"Unknown"),l.append(n),t&&n.fadeIn(500)}function m(e){var t=e.name;g({title:t=(t=t.replace(/_+/g," ")).replace(/[.][\w]+$/,""),fileVar:e},!0)}function b(e){o=(u=e).find(".ui-playlist-item-position"),s.findAll(".ui-playlist-item-active").each(function(){$(this).removeClass("ui-playlist-item-active")}),s.findAll(".ui-playlist-item-paused").each(function(){$(this).removeClass("ui-playlist-item-paused")}),e.addClass("ui-playlist-item-paused");var t=e.data("itemData");t.hasOwnProperty("fileVar")?a.renderFileVariable(t.fileVar,function(){t.url=a.url(),a.play()}):t.hasOwnProperty("url")&&a.renderFile(t.url,function(){a.play()})}function w(e){var t=s.find(".ui-playlist-item-paused");0==t.length&&(t=s.find(".ui-playlist-item-active")),0!=t.length?(e=(t.index()+e+(e=l.children().length))%e,b(l.findAll(".ui-playlist-item").eq(e))):b(t=s.find(".ui-playlist-item").eq(0))}function y(){var e,t;o&&(e=a.position(),t=a.duration()||1,o.css("width",100*e/t+"%"))}function M(){c&&(clearInterval(c),c=null)}function S(){var e=a.position(),t=a.duration();0<t?f?i.text("-"+ui.formatTime(t-e)+" / "+ui.formatTime(t)):i.text(ui.formatTime(e)+" / "+ui.formatTime(t)):i.text("")}e.hasOwnProperty("mode")||(e.mode=""),v(e),a.bindEvent(s,"onOpen",function(){s.addClass("ui-playlist-loading")}),a.bindEvent(s,"onLoad",function(){s.removeClass("ui-playlist-loading")}),a.bindEvent(s,"onPause",function(){s.findAll(".ui-playlist-item-active").each(function(){var e=$(this);e.removeClass("ui-playlist-item-active"),e.addClass("ui-playlist-item-paused")}),M(),h.stop()}),a.bindEvent(s,"onProgress",function(){S()}),a.bindEvent(s,"onPlay",function(){var n=a.url(),i=!1;s.findAll(".ui-playlist-item").each(function(){var e=$(this),t=e.data("itemData");t&&(t.url!=n?(e.removeClass("ui-playlist-item-paused"),e.removeClass("ui-playlist-item-repeat")):e.hasClass("ui-playlist-item-paused")&&(e.removeClass("ui-playlist-item-paused"),e.addClass("ui-playlist-item-active"),i=!0))}),i?(S(),M(),c=setInterval(y,200),y()):o=u=null,h.start()}),a.bindEvent(s,"onComplete",function(){u&&(u.hasClass("ui-playlist-item-repeat")?w(0):w(1))}),s.on("click",".ui-playlist-item-play-button",function(e){e.preventDefault();e=$(this).closest(".ui-playlist-item");e.hasClass("ui-playlist-item-paused")?a.play():b(e)}),s.on("click",".ui-playlist-item-pause-button",function(e){e.preventDefault(),a.pause()}),s.on("mousedown",".ui-playlist-item-progress",function(e){var t=$(this);a.seek(e.pageX-t.offset().left,t.outerWidth()),a.paused()&&y()}),s.on("click",".ui-playlist-item-repeat-button",function(){$(this).closest(".ui-playlist-item").removeClass("ui-playlist-item-repeat")}),s.on("click",".ui-playlist-add-button",function(){ui.showFileDialog({multiple:!0},function(e){for(var t=0;t<e.length;t++)m(e[t])})}),s.on("click",".ui-playlist-prev-button",function(){w(-1)}),s.on("click",".ui-playlist-next-button",function(){w(1)}),s.on("click",".ui-playlist-time-bar",function(){f=!f,S()}),s.on("click",".ui-playlist-extra-button",function(){s.find(".ui-playlist-bottom-panel").hasClass("ui-expanded")&&ui.closeAllPopups();var e=$('<div class="ui-playlist-extra-dropdown ui-stuff ui-non-selectable" data-ui-dropdown="tooltip-generic box-generic arrow-on to-bottom-center width-auto margin-1 anim-in-slide anim-out-slide">\t<div class="ui-playlist-extra-dropdown-buttons">\t\t<div class="ui-playlist-extra-dropdown-suffle-button">Shuffle</div>\t\t<div class="ui-playlist-extra-dropdown-repeat-current-button">Repeat current</div>\t</div></div>');ui.openDropdown(this,e,function(o){u||o.find(".ui-playlist-extra-dropdown-repeat-current-button").remove(),o.on("click",".ui-playlist-extra-dropdown-suffle-button",function(){for(var e=s.findAll(".ui-playlist-item"),t=e.length,n=u?u.index():-1,i=0;i<t;i++){var a=e.eq(i),r=e.eq(Math.floor(Math.random()*t));a.is(r)||a.detach().insertBefore(r)}u&&(u.detach(),n<(e=s.findAll(".ui-playlist-item")).length?u.insertBefore(s.findAll(".ui-playlist-item").eq(n)):l.append(u)),ui.closeDropdown(o)}),o.on("click",".ui-playlist-extra-dropdown-repeat-current-button",function(){u.toggleClass("ui-playlist-item-repeat"),ui.closeDropdown(o)})})}),s.on("click",".ui-playlist-visualization-box",function(){var e=$('<div class="ui-playlist-equalizer-dropdown ui-stuff" data-ui-dropdown="tooltip-generic box-generic arrow-off to-bottom-center width-612 margin-4 anim-in-slide anim-out-slide"></div>');ui.openDropdown(s.find(".ui-playlist-bottom-panel"),e,function(e,t){ui(e).Equalizer({player:a,color:d,visType:2,cookieName:a.dsp.getCookieName()}),t.onClose=function(){ui(e).destroy()}})});e={update:v,destroy:function(){p.destroy(),s.off(),s.remove(),t.removeData("UIPlaylist"),delete t[0].uiInterface}};return t.data("UIPlaylist",e),t[0].uiInterface=e},globals.openColorPicker=ui.openColorPicker=function(e,t){var n="tooltip-gray box-generic arrow-on to-bottom-right margin-2 anim-in-slide anim-out-slide";(t=ui.toObject(t)).hasOwnProperty("skin")&&(n=ui.toString(t.skin).replace(/[^-a-zA-Z0-9\s]/g,""));n=$('<div class="ui-stuff" data-ui-dropdown="'+n+'">\t<div class="ui-color-picker-element"></div></div>');ui.openDropdown(e,n,function(e){ui(e.find(".ui-color-picker-element")).colorPicker(t)})},ui.fn.colorPicker=function(e){var t=$(this),n=t.data("UIColorPicker");if(n)return n.update(e),n;var s=$('<div class="ui-color-picker ui-stuff">\t<div class="ui-color-picker-box">\t\t<div class="ui-color-picker-hues-panel">\t\t\t<canvas class="ui-color-picker-hues-canvas"></canvas>\t\t\t<div class="ui-color-picker-hues-panel-pointer"><div></div><div></div></div>\t\t</div>\t\t<div class="ui-color-picker-shades-panel" style="background-color: #ffffff">\t\t\t<canvas class="ui-color-picker-shades-canvas"></canvas>\t\t\t<div class="ui-color-picker-shades-panel-pointer"></div>\t\t</div>\t</div>\t<div class="ui-color-picker-hex-container">\t\t<div class="ui-color-picker-hex-field">\t\t\t<div class="ui-color-picker-hex-field-label">Hex:</div>\t\t\t<input class="ui-color-picker-hex-field-input-box" type="text"/>\t\t</div>\t</div>\t<div class="ui-color-picker-rgb-container">\t\t<div class="ui-color-picker-rgb-field">\t\t\t<div class="ui-color-picker-rgb-field-label">R:</div>\t\t\t<input class="ui-color-picker-rgb-field-input-box" data-tag="r" type="text"/>\t\t</div>\t\t<div class="ui-color-picker-rgb-field">\t\t\t<div class="ui-color-picker-rgb-field-label">G:</div>\t\t\t<input class="ui-color-picker-rgb-field-input-box" data-tag="g" type="text"/>\t\t</div>\t\t<div class="ui-color-picker-rgb-field">\t\t\t<div class="ui-color-picker-rgb-field-label">B:</div>\t\t\t<input class="ui-color-picker-rgb-field-input-box" data-tag="b" type="text"/>\t\t</div>\t</div>\t<div class="ui-color-picker-swatches">\t\t<div class="ui-color-picker-swatch ui-selected" style="background-color: #ffffff"></div>\t\t<div class="ui-color-picker-add-swatch-button"></div>\t</div></div>');t.append(s);var i=s.find(".ui-color-picker-hues-panel-pointer"),r=s.find(".ui-color-picker-shades-panel"),a=s.find(".ui-color-picker-shades-panel-pointer"),o=s.find(".ui-color-picker-hex-field-input-box"),p=s.find(".ui-color-picker-rgb-field-input-box[data-tag=r]"),_=s.find(".ui-color-picker-rgb-field-input-box[data-tag=g]"),v=s.find(".ui-color-picker-rgb-field-input-box[data-tag=b]"),l=(s.find(".ui-color-picker-hues-canvas")[0],156),u=l-1,c=0,f=0,d=0,g=ui.Color(),h=null,m=null,b=null,w=null;function y(e){w=e,g.setWebColor(o.val());e=g.getHSV();c=e.h,f=e.s,d=e.v,x(),w=null,k()}function M(e){w=e,g.r=ui.ensureRange(ui.toInt(p.val()),0,255),g.g=ui.ensureRange(ui.toInt(_.val()),0,255),g.b=ui.ensureRange(ui.toInt(v.val()),0,255);e=g.getHSV();c=e.h,f=e.s,d=e.v,x(),w=null,k()}function S(e){var t,n=!1;(e=ui.toObject(e)).hasOwnProperty("color")&&(t=e.color,t=(g=ui.Color(t)).getHSV(),c=t.h,f=t.s,d=t.v,n=!0),e.hasOwnProperty("onStartChanging")&&(h=e.onStartChanging?ui.toFunction(e.onStartChanging):null),e.hasOwnProperty("onChanging")&&(m=e.onChanging?ui.toFunction(e.onChanging):null),e.hasOwnProperty("onChange")&&(b=e.onChange?ui.toFunction(e.onChange):null),n&&x()}function x(){i.css("top",c*u/255+"px"),r.css("background-color","#"+ui.Color.getHueColorByIndex(c,255).getColorNumber()),a.css({left:u-f*u/255+"px",top:u-d*u/255+"px"}),g.setHSV({h:c,s:f,v:d}),"hex"!=w&&o.val("#"+g.getColorNumber()),"rgb"!=w&&(p.val(g.r),_.val(g.g),v.val(g.b))}function k(){m&&m({color:g})}function A(){b&&b({color:g})}!function(){for(var e=ui.initGraph(s.find(".ui-color-picker-hues-canvas"),16,l),t=0;t<e.height;t++)for(var n=0;n<e.width;n++){var i=ui.Color.getHueColorByIndex(t,e.height-1);e.putPixel(n,t,i)}e.redraw()}(),function(){for(var e=ui.initGraph(s.find(".ui-color-picker-shades-canvas"),l,l),t=ui.Color(0,0,0,0),n=ui.Color(255,255,255),i=ui.Color(0,0,0),a=0;a<e.height;a++)for(var r=0;r<e.width;r++){var o=ui.Color.mix(ui.Color.mix(t,n,r,e.width-1),i,a,e.height-1);e.putPixel(r,a,o)}e.redraw()}(),S(e),x(),s.on("mousedown touchstart",".ui-color-picker-hues-panel",function(e){var t;function n(e){e=ui.ensureRange(e.pageY-t,0,u);c=ui.ensureRange(255*e/u,0,255),x(),k()}ui.dragAndDrop({event:e,owner:this,cursor:"none",startDragging:function(e){h&&h(),t=r.offset().top,n(e)},processDragging:n,stopDragging:A})}),s.on("mousedown touchstart",".ui-color-picker-shades-panel",function(e){var n,i;function a(e){var t=ui.ensureRange(e.pageX-n,0,u),e=ui.ensureRange(e.pageY-i,0,u);f=ui.ensureRange(255*(u-t)/u,0,255),d=ui.ensureRange(255*(u-e)/u,0,255),x(),k()}ui.dragAndDrop({event:e,owner:this,cursor:"none",startDragging:function(e){h&&h();var t=r.offset();n=t.left,i=t.top,a(e)},processDragging:a,stopDragging:A})}),s.on("input",".ui-color-picker-hex-field-input-box",function(){y("hex")}),s.on("change",".ui-color-picker-hex-field-input-box",function(){y(null)}),s.on("input",".ui-color-picker-rgb-field-input-box",function(){M("rgb")}),s.on("change",".ui-color-picker-rgb-field-input-box",function(){M(null)}),s.on("change",".ui-color-picker-hex-field-input-box",function(){A()}),s.on("mousewheel",".ui-color-picker-rgb-field-input-box",function(e){var t=ui.getDeltaFromScrollEvent(e.originalEvent),n=$(this),e=ui.toInt(n.val()),t=0<t.y?e+1:e-1;(t=ui.ensureRange(t,0,255))!=e&&(n.val(t),M("rgb"))}),s.on("mousedown",".ui-color-picker-rgb-field-input-box",function(){var e=$(this),t="",h=e.attr("data-tag");switch(h){case"r":t="to-bottom-right";break;case"g":t="to-bottom-center";break;case"b":t="to-bottom-left"}var n=$('<div class="ui-color-component ui-stuff" data-ui-dropdown="tooltip-generic box-generic width-186 max-height-36 arrow-on '+t+' margin-2 anim-in-none anim-out-none">\t<div class="ui-color-component-box">\t\t<div class="ui-color-component-slider">\t\t\t<canvas class="ui-color-component-image"></canvas>\t\t\t<div class="ui-color-component-pointer"><div></div><div></div></div>\t\t</canvas>\t</div></div>');ui.openDropdown(e.closest(".ui-color-picker-rgb-field"),n,function(e){var t,n,i,a;switch(h){case"r":t=ui.Color(0,g.g,g.b),n=ui.Color(255,g.g,g.b),i=g.r,a=p;break;case"g":t=ui.Color(g.r,0,g.b),n=ui.Color(g.r,255,g.b),i=g.g,a=_;break;case"b":t=ui.Color(g.r,g.g,0),n=ui.Color(g.r,g.g,255),i=g.b,a=v}for(var r=ui.initGraph(e.find(".ui-color-component-image"),170,16),o=0;o<r.width;o++)for(var s=ui.Color.mix(t,n,o,r.width),l=0;l<r.height;l++)r.putPixel(o,l,s);r.redraw();var u=e.find(".ui-color-component-pointer");u.css("left",100*i/255+"%");var c=e.find(".ui-color-component-image"),f=c.offset().left,d=c.width()-1;e.on("mousedown touchstart",".ui-color-component-box",function(){function e(e){i=255*ui.ensureRange(e.pageX-f,0,d)/d,u.css("left",100*i/255+"%"),a.val(ui.toInt(i)),M("rgb")}ui.dragAndDrop({event:event,owner:this,cursor:"none",startDragging:e,processDragging:e,stopDragging:A})})})});e={update:S};return t.data("UIColorPicker",e),e},C4=window.jQuery,C4&&(C4.fn.UIMediaPlayer=ui.fn.MediaPlayer,C4.fn.UIWaveSurfer=ui.fn.WaveSurfer,C4.fn.UIWaveform=ui.fn.Waveform,C4.fn.UICircularSpectrum=ui.fn.CircularSpectrum,C4.fn.UIPlayButton=ui.fn.PlayButton,C4.fn.UIEqualizer=ui.fn.Equalizer,C4.fn.UIPlaylist=ui.fn.Playlist,C4.showFileDialog=ui.showFileDialog,C4.generateWaveSurferCacheForAudioFile=ui.generateWaveSurferCacheForAudioFile,C4.obtainWaveSurferSelectedAreaAsMP3=ui.obtainWaveSurferSelectedAreaAsMP3,C4.obtainWaveSurferSelectedAreaAsWAV=ui.obtainWaveSurferSelectedAreaAsWAV,C4.downloadWaveSurferSelectedAreaAsMP3=ui.downloadWaveSurferSelectedAreaAsMP3,C4.downloadWaveSurferSelectedAreaAsWAV=ui.downloadWaveSurferSelectedAreaAsWAV),globals.mediaEngineAbout=function(){alert("Media Engine "+engineVersion+"\nAuthor: Alex Zhyrytovskyi\n2019-2024")},globals.mediaEngineVersion=function(){return engineVersion},globals.mediaEngineError=function(e,t){ui.setError(e,t)}))}(window,window.jQuery),function(){function S(e){return new Int8Array(e)}function Pe(e){return new Int32Array(e)}function Te(e){return new Float32Array(e)}function Ce(e){if(1==e.length)return Te(e[0]);var t=e[0];e=e.slice(1);for(var n=[],i=0;i<t;i++)n.push(Ce(e));return n}function D(e){if(1==e.length)return Pe(e[0]);var t=e[0];e=e.slice(1);for(var n=[],i=0;i<t;i++)n.push(D(e));return n}function _(e){if(1==e.length)return t=e[0],new Int16Array(t);var t,n=e[0];e=e.slice(1);for(var i=[],a=0;a<n;a++)i.push(_(e));return i}function O(e){if(1==e.length)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var n=[],i=0;i<t;i++)n.push(O(e));return n}function Ie(e){this.ordinal=e}function Oe(e){this.ordinal=e}function Ve(e){var t=e;this.ordinal=function(){return t}}function y(){this.getLameVersion=function(){return"3.98.4"},this.getLameShortVersion=function(){return"3.98.4"},this.getLameVeryShortVersion=function(){return"LAME3.98r"},this.getPsyVersion=function(){return"0.93"},this.getLameUrl=function(){return"http://www.mp3dev.org/"},this.getLameOsBitness=function(){return"32bits"}}function H(){function _(e,t,n,i,a,r){for(;0!=a--;)n[i]=1e-10+e[t+0]*r[0]-n[i-1]*r[1]+e[t-1]*r[2]-n[i-2]*r[3]+e[t-2]*r[4]-n[i-3]*r[5]+e[t-3]*r[6]-n[i-4]*r[7]+e[t-4]*r[8]-n[i-5]*r[9]+e[t-5]*r[10]-n[i-6]*r[11]+e[t-6]*r[12]-n[i-7]*r[13]+e[t-7]*r[14]-n[i-8]*r[15]+e[t-8]*r[16]-n[i-9]*r[17]+e[t-9]*r[18]-n[i-10]*r[19]+e[t-10]*r[20],++i,++t}function v(e,t,n,i,a,r){for(;0!=a--;)n[i]=e[t+0]*r[0]-n[i-1]*r[1]+e[t-1]*r[2]-n[i-2]*r[3]+e[t-2]*r[4],++i,++t}function g(e){return e*e}var i=H.RMS_WINDOW_TIME_NUMERATOR,a=H.RMS_WINDOW_TIME_DENOMINATOR,m=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],b=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];this.InitGainAnalysis=function(e,t){return function(e,t){for(var n=0;n<MAX_ORDER;n++)e.linprebuf[n]=e.lstepbuf[n]=e.loutbuf[n]=e.rinprebuf[n]=e.rstepbuf[n]=e.routbuf[n]=0;switch(0|t){case 48e3:e.reqindex=0;break;case 44100:e.reqindex=1;break;case 32e3:e.reqindex=2;break;case 24e3:e.reqindex=3;break;case 22050:e.reqindex=4;break;case 16e3:e.reqindex=5;break;case 12e3:e.reqindex=6;break;case 11025:e.reqindex=7;break;case 8e3:e.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return e.sampleWindow=0|(t*i+a-1)/a,e.lsum=0,e.rsum=0,e.totsamp=0,ze.ill(e.A,0),INIT_GAIN_ANALYSIS_OK}(e,t)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(e.linpre=MAX_ORDER,e.rinpre=MAX_ORDER,e.lstep=MAX_ORDER,e.rstep=MAX_ORDER,e.lout=MAX_ORDER,e.rout=MAX_ORDER,ze.fill(e.B,0),INIT_GAIN_ANALYSIS_OK)},this.AnalyzeSamples=function(e,t,n,i,a,r,o){var s,l,u,c,f,d;if(0==r)return GAIN_ANALYSIS_OK;switch(d=0,f=r,o){case 1:i=t,a=n;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(r<MAX_ORDER?($.arraycopy(t,n,e.linprebuf,MAX_ORDER,r),$.arraycopy(i,a,e.rinprebuf,MAX_ORDER,r)):($.arraycopy(t,n,e.linprebuf,MAX_ORDER,MAX_ORDER),$.arraycopy(i,a,e.rinprebuf,MAX_ORDER,MAX_ORDER));0<f;){h=f>e.sampleWindow-e.totsamp?e.sampleWindow-e.totsamp:f,d<MAX_ORDER?(s=e.linpre+d,l=e.linprebuf,u=e.rinpre+d,c=e.rinprebuf,h>MAX_ORDER-d&&(h=MAX_ORDER-d)):(s=n+d,l=t,u=a+d,c=i),_(l,s,e.lstepbuf,e.lstep+e.totsamp,h,m[e.reqindex]),_(c,u,e.rstepbuf,e.rstep+e.totsamp,h,m[e.reqindex]),v(e.lstepbuf,e.lstep+e.totsamp,e.loutbuf,e.lout+e.totsamp,h,b[e.reqindex]),v(e.rstepbuf,e.rstep+e.totsamp,e.routbuf,e.rout+e.totsamp,h,b[e.reqindex]),s=e.lout+e.totsamp,l=e.loutbuf,u=e.rout+e.totsamp,c=e.routbuf;for(var h,p=h%8;0!=p--;)e.lsum+=g(l[s++]),e.rsum+=g(c[u++]);for(p=h/8;0!=p--;)e.lsum+=g(l[s+0])+g(l[s+1])+g(l[s+2])+g(l[s+3])+g(l[s+4])+g(l[s+5])+g(l[s+6])+g(l[s+7]),s+=8,e.rsum+=g(c[u+0])+g(c[u+1])+g(c[u+2])+g(c[u+3])+g(c[u+4])+g(c[u+5])+g(c[u+6])+g(c[u+7]),u+=8;if(f-=h,d+=h,e.totsamp+=h,e.totsamp==e.sampleWindow&&((h=(h=10*H.STEPS_per_dB*Math.log10((e.lsum+e.rsum)/e.totsamp*.5+1e-37))<=0?0:0|h)>=e.A.length&&(h=e.A.length-1),e.A[h]++,e.lsum=e.rsum=0,$.arraycopy(e.loutbuf,e.totsamp,e.loutbuf,0,MAX_ORDER),$.arraycopy(e.routbuf,e.totsamp,e.routbuf,0,MAX_ORDER),$.arraycopy(e.lstepbuf,e.totsamp,e.lstepbuf,0,MAX_ORDER),$.arraycopy(e.rstepbuf,e.totsamp,e.rstepbuf,0,MAX_ORDER),e.totsamp=0),e.totsamp>e.sampleWindow)return GAIN_ANALYSIS_ERROR}return r<MAX_ORDER?($.arraycopy(e.linprebuf,r,e.linprebuf,0,MAX_ORDER-r),$.arraycopy(e.rinprebuf,r,e.rinprebuf,0,MAX_ORDER-r),$.arraycopy(t,n,e.linprebuf,MAX_ORDER-r,r),$.arraycopy(i,a,e.rinprebuf,MAX_ORDER-r,r)):($.arraycopy(t,n+r-MAX_ORDER,e.linprebuf,0,MAX_ORDER),$.arraycopy(i,a+r-MAX_ORDER,e.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK},this.GetTitleGain=function(e){for(var t=function(e,t){for(var n=0,i=0;i<t;i++)n+=e[i];if(0==n)return GAIN_NOT_ENOUGH_SAMPLES;var a=0|Math.ceil(n*(1-.95));for(i=t;0<i--&&!((a-=e[i])<=0););return 64.82-i/H.STEPS_per_dB}(e.A,e.A.length),n=0;n<e.A.length;n++)e.B[n]+=e.A[n],e.A[n]=0;for(n=0;n<MAX_ORDER;n++)e.linprebuf[n]=e.lstepbuf[n]=e.loutbuf[n]=e.rinprebuf[n]=e.rstepbuf[n]=e.routbuf[n]=0;return e.totsamp=0,e.lsum=e.rsum=0,t}}function M(){function e(e,t,n,i,a,r,o,s,l,u,c,f,d,h,p){this.vbr_q=e,this.quant_comp=t,this.quant_comp_s=n,this.expY=i,this.st_lrm=a,this.st_s=r,this.masking_adj=o,this.masking_adj_short=s,this.ath_lower=l,this.ath_curve=u,this.ath_sensitivity=c,this.interch=f,this.safejoint=d,this.sfb21mod=h,this.msfix=p}function t(e,t,n,i,a,r,o,s,l,u,c,f,d,h){this.quant_comp=t,this.quant_comp_s=n,this.safejoint=i,this.nsmsfix=a,this.st_lrm=r,this.st_s=o,this.nsbass=s,this.scale=l,this.masking_adj=u,this.ath_lower=c,this.ath_curve=f,this.interch=d,this.sfscale=h}function i(e,t,n){var i=e.VBR==Oe.vbr_rh?s:l,a=e.VBR_q_frac,r=i[t],o=i[t+1],i=r;r.st_lrm=r.st_lrm+a*(o.st_lrm-r.st_lrm),r.st_s=r.st_s+a*(o.st_s-r.st_s),r.masking_adj=r.masking_adj+a*(o.masking_adj-r.masking_adj),r.masking_adj_short=r.masking_adj_short+a*(o.masking_adj_short-r.masking_adj_short),r.ath_lower=r.ath_lower+a*(o.ath_lower-r.ath_lower),r.ath_curve=r.ath_curve+a*(o.ath_curve-r.ath_curve),r.ath_sensitivity=r.ath_sensitivity+a*(o.ath_sensitivity-r.ath_sensitivity),r.interch=r.interch+a*(o.interch-r.interch),r.msfix=r.msfix+a*(o.msfix-r.msfix),o=e,(r=i.vbr_q)<0&&(r=0),9<r&&(r=9),o.VBR_q=r,(o.VBR_q_frac=0)==n&&0<Math.abs(e.quant_comp- -1)||(e.quant_comp=i.quant_comp),0==n&&0<Math.abs(e.quant_comp_short- -1)||(e.quant_comp_short=i.quant_comp_s),0!=i.expY&&(e.experimentalY=0!=i.expY),0==n&&0<Math.abs(e.internal_flags.nsPsy.attackthre- -1)||(e.internal_flags.nsPsy.attackthre=i.st_lrm),0==n&&0<Math.abs(e.internal_flags.nsPsy.attackthre_s- -1)||(e.internal_flags.nsPsy.attackthre_s=i.st_s),0==n&&0<Math.abs(+e.maskingadjust)||(e.maskingadjust=i.masking_adj),0==n&&0<Math.abs(+e.maskingadjust_short)||(e.maskingadjust_short=i.masking_adj_short),0==n&&0<Math.abs(10*-e.ATHlower)||(e.ATHlower=-i.ath_lower/10),0==n&&0<Math.abs(e.ATHcurve- -1)||(e.ATHcurve=i.ath_curve),0==n&&0<Math.abs(e.athaa_sensitivity- -1)||(e.athaa_sensitivity=i.ath_sensitivity),0<i.interch&&(0==n&&0<Math.abs(e.interChRatio- -1)||(e.interChRatio=i.interch)),0<i.safejoint&&(e.exp_nspsytune=e.exp_nspsytune|i.safejoint),0<i.sfb21mod&&(e.exp_nspsytune=e.exp_nspsytune|i.sfb21mod<<20),0==n&&0<Math.abs(e.msfix- -1)||(e.msfix=i.msfix),0==n&&(e.VBR_q=t,e.VBR_q_frac=a)}function a(e,t,n){var i=t,a=r.nearestBitrateFullIndex(t);return e.VBR=Oe.vbr_abr,e.VBR_mean_bitrate_kbps=i,e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,320),e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,8),e.brate=e.VBR_mean_bitrate_kbps,320<e.VBR_mean_bitrate_kbps&&(e.disable_reservoir=!0),0<o[a].safejoint&&(e.exp_nspsytune=2|e.exp_nspsytune),0<o[a].sfscale&&(e.internal_flags.noise_shaping=2),0<Math.abs(o[a].nsbass)&&((i=int(4*o[a].nsbass))<0&&(i+=64),e.exp_nspsytune=e.exp_nspsytune|i<<2),0==n&&0<Math.abs(e.quant_comp- -1)||(e.quant_comp=o[a].quant_comp),0==n&&0<Math.abs(e.quant_comp_short- -1)||(e.quant_comp_short=o[a].quant_comp_s),0==n&&0<Math.abs(e.msfix- -1)||(e.msfix=o[a].nsmsfix),0==n&&0<Math.abs(e.internal_flags.nsPsy.attackthre- -1)||(e.internal_flags.nsPsy.attackthre=o[a].st_lrm),0==n&&0<Math.abs(e.internal_flags.nsPsy.attackthre_s- -1)||(e.internal_flags.nsPsy.attackthre_s=o[a].st_s),0==n&&0<Math.abs(e.scale- -1)||(e.scale=o[a].scale),0==n&&0<Math.abs(+e.maskingadjust)||(e.maskingadjust=o[a].masking_adj),0<o[a].masking_adj?0==n&&0<Math.abs(+e.maskingadjust_short)||(e.maskingadjust_short=.9*o[a].masking_adj):0==n&&0<Math.abs(+e.maskingadjust_short)||(e.maskingadjust_short=1.1*o[a].masking_adj),0==n&&0<Math.abs(10*-e.ATHlower)||(e.ATHlower=-o[a].ath_lower/10),0==n&&0<Math.abs(e.ATHcurve- -1)||(e.ATHcurve=o[a].ath_curve),0==n&&0<Math.abs(e.interChRatio- -1)||(e.interChRatio=o[a].interch),t}var r;this.setModules=function(e){r=e};var s=[new e(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new e(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new e(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new e(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new e(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new e(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new e(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new e(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new e(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],l=[new e(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new e(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new e(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new e(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new e(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new e(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new e(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new e(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new e(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)],o=[new t(0,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new t(0,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new t(0,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new t(0,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new t(0,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(0,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(0,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new t(0,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new t(0,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new t(0,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new t(0,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new t(0,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new t(0,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new t(0,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new t(0,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new t(0,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new t(0,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];this.apply_preset=function(e,t,n){switch(t){case j.R3MIX:t=j.V3,e.VBR=Oe.vbr_mtrh;break;case j.MEDIUM:t=j.V4,e.VBR=Oe.vbr_rh;break;case j.MEDIUM_FAST:t=j.V4,e.VBR=Oe.vbr_mtrh;break;case j.STANDARD:t=j.V2,e.VBR=Oe.vbr_rh;break;case j.STANDARD_FAST:t=j.V2,e.VBR=Oe.vbr_mtrh;break;case j.EXTREME:t=j.V0,e.VBR=Oe.vbr_rh;break;case j.EXTREME_FAST:t=j.V0,e.VBR=Oe.vbr_mtrh;break;case j.INSANE:return t=320,e.preset=t,a(e,t,n),e.VBR=Oe.vbr_off,t}switch(e.preset=t){case j.V9:return i(e,9,n),t;case j.V8:return i(e,8,n),t;case j.V7:return i(e,7,n),t;case j.V6:return i(e,6,n),t;case j.V5:return i(e,5,n),t;case j.V4:return i(e,4,n),t;case j.V3:return i(e,3,n),t;case j.V2:return i(e,2,n),t;case j.V1:return i(e,1,n),t;case j.V0:return i(e,0,n),t}return 8<=t&&t<=320?a(e,t,n):(e.preset=0,t)}}function x(){function v(e){this.bits=0|e}function y(e,t,n,i,a,r){var o=.5946/t;for(e>>=1;0!=e--;)a[r++]=o>n[i++]?0:1,a[r++]=o>n[i++]?0:1}function M(e,t,n,i,a,r){var o,s,l,u,c,f,d,h,p=(e>>=1)%2;for(e>>=1;0!=e--;)c=n[i++]*t,f=n[i++]*t,d=0|c,o=n[i++]*t,h=0|f,s=n[i++]*t,l=0|o,c+=S.adj43[d],u=0|s,f+=S.adj43[h],a[r++]=0|c,o+=S.adj43[l],a[r++]=0|f,s+=S.adj43[u],a[r++]=0|o,a[r++]=0|s;0!=p&&(d=0|(c=n[i++]*t),h=0|(f=n[i++]*t),c+=S.adj43[d],f+=S.adj43[h],a[r++]=0|c,a[r++]=0|f)}function g(e,t,n,i){var a,r,o=function(e,t,n){var i=0,a=0;do{var r=e[t++],o=e[t++]}while(i<r&&(i=r),a<o&&(a=o),t<n);return i<a&&(i=a),i}(e,t,n);switch(o){case 0:return o;case 1:return function(e,t,n,i){var a=0,r=G.ht[1].hlen;do{var o=2*e[t+0]+e[t+1]}while(t+=2,a+=r[o],t<n);return i.bits+=a,1}(e,t,n,i);case 2:case 3:return function(e,t,n,i,a){var r,o=0,s=G.ht[i].xlen,l=2==i?G.table23:G.table56;do{var u=e[t+0]*s+e[t+1]}while(t+=2,o+=l[u],t<n);return(r=65535&o)<(o>>=16)&&(o=r,i++),a.bits+=o,i}(e,t,n,s[o-1],i);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return function(e,t,n,i,a){var r=0,o=0,s=0,l=G.ht[i].xlen,u=G.ht[i].hlen,c=G.ht[i+1].hlen,f=G.ht[i+2].hlen;do{var d=e[t+0]*l+e[t+1]}while(t+=2,r+=u[d],o+=c[d],s+=f[d],t<n);var h=i;return o<r&&(r=o,h++),s<r&&(r=s,h=i+2),a.bits+=r,h}(e,t,n,s[o-1],i);default:if(P.IXMAX_VAL<o)return i.bits=P.LARGE_BITS,-1;for(o-=15,a=24;a<32&&!(G.ht[a].linmax>=o);a++);for(r=a-8;r<24&&!(G.ht[r].linmax>=o);r++);return function(e,t,n,i,a,r){var o,s=65536*G.ht[i].xlen+G.ht[a].xlen,l=0;do{var u=e[t++],c=e[t++]}while(0!=u&&(14<u&&(u=15,l+=s),u*=16),0!=c&&(14<c&&(c=15,l+=s),u+=c),l+=G.largetbl[u],t<n);return(o=65535&l)<(l>>=16)&&(l=o,i=a),r.bits+=l,i}(e,t,n,r,a,i)}}function d(e,t,n,i,a,r,o,s){for(var l=t.big_values,u=2;u<qe.SBMAX_l+1;u++){var c=e.scalefac_band.l[u];if(l<=c)break;var f=a[u-2]+t.count1bits;if(n.part2_3_length<=f)break;var d=new v(f),c=g(i,c,l,d),f=d.bits;n.part2_3_length<=f||(n.assign(t),n.part2_3_length=f,n.region0_count=r[u-2],n.region1_count=u-2-r[u-2],n.table_select[0]=o[u-2],n.table_select[1]=s[u-2],n.table_select[2]=c)}}var S=null;this.qupvt=null,this.setModules=function(e){this.qupvt=e,S=e};var a=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]],s=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];this.noquant_count_bits=function(e,t,n){var i=t.l3_enc,a=Math.min(576,t.max_nonzero_coeff+2>>1<<1);for(null!=n&&(n.sfb_count1=0);1<a&&0==(i[a-1]|i[a-2]);a-=2);t.count1=a;for(var r,o=0,s=0;3<a;a-=4){if(1<(2147483647&(i[a-1]|i[a-2]|i[a-3]|i[a-4])))break;r=2*(2*(2*i[a-4]+i[a-3])+i[a-2])+i[a-1],o+=G.t32l[r],s+=G.t33l[r]}var l,u=o;if(t.count1table_select=0,s<o&&(u=s,t.count1table_select=1),t.count1bits=u,0==(t.big_values=a))return u;if(t.block_type==qe.SHORT_TYPE?((o=3*e.scalefac_band.s[3])>t.big_values&&(o=t.big_values),s=t.big_values):t.block_type==qe.NORM_TYPE?(o=t.region0_count=e.bv_scf[a-2],s=t.region1_count=e.bv_scf[a-1],s=e.scalefac_band.l[o+s+2],o=e.scalefac_band.l[o+1],s<a&&(l=new v(u),t.table_select[2]=g(i,s,a,l),u=l.bits)):(t.region0_count=7,t.region1_count=qe.SBMAX_l-1-7-1,(s=a)<(o=e.scalefac_band.l[8])&&(o=s)),o=Math.min(o,a),s=Math.min(s,a),0<o&&(l=new v(u),t.table_select[0]=g(i,0,o,l),u=l.bits),o<s&&(l=new v(u),t.table_select[1]=g(i,o,s,l),u=l.bits),2==e.use_best_huffman&&(t.part2_3_length=u,best_huffman_divide(e,t),u=t.part2_3_length),null!=n&&t.block_type==qe.NORM_TYPE){for(var c=0;e.scalefac_band.l[c]<t.big_values;)c++;n.sfb_count1=c}return u},this.count_bits=function(e,t,n,i){var a=n.l3_enc,r=P.IXMAX_VAL/S.IPOW20(n.global_gain);if(n.xrpow_max>r)return P.LARGE_BITS;if(function(e,t,n,i,a){for(var r=0,o=0,s=0,l=0,u=t,c=0,f=u,d=0,h=e,p=0,_=null!=a&&i.global_gain==a.global_gain,v=i.block_type==qe.SHORT_TYPE?38:21,g=0;g<=v;g++){var m=-1;if(!_&&i.block_type!=qe.NORM_TYPE||(m=i.global_gain-(i.scalefac[g]+(0!=i.preflag?S.pretab[g]:0)<<i.scalefac_scale+1)-8*i.subblock_gain[i.window[g]]),_&&a.step[g]==m)0!=o&&(M(o,n,h,p,f,d),o=0),0!=s&&(y(s,n,h,p,f,d),s=0);else{var b,w=i.width[g];if(r+i.width[g]>i.max_nonzero_coeff&&(b=i.max_nonzero_coeff-r+1,ze.fill(t,i.max_nonzero_coeff,576,0),(w=b)<0&&(w=0),g=1+v),0==o&&0==s&&(f=u,d=c,h=e,p=l),null!=a&&0<a.sfb_count1&&g>=a.sfb_count1&&0<a.step[g]&&m>=a.step[g]?(0!=o&&(M(o,n,h,p,f,d),o=0,f=u,d=c,h=e,p=l),s+=w):(0!=s&&(y(s,n,h,p,f,d),s=0,f=u,d=c,h=e,p=l),o+=w),w<=0){0!=s&&(y(s,n,h,p,f,d),s=0),0!=o&&(M(o,n,h,p,f,d),o=0);break}}g<=v&&(c+=i.width[g],l+=i.width[g],r+=i.width[g])}0!=o&&(M(o,n,h,p,f,d),o=0),0!=s&&(y(s,n,h,p,f,d),s=0)}(t,a,S.IPOW20(n.global_gain),n,i),0!=(2&e.substep_shaping))for(var o=0,r=n.global_gain+n.scalefac_scale,s=.634521682242439/S.IPOW20(r),l=0;l<n.sfbmax;l++){var u=n.width[l];if(0==e.pseudohalf[l])o+=u;else{var c=o;for(o+=u;c<o;++c)a[c]=t[c]>=s?a[c]:0}}return this.noquant_count_bits(e,n,i)},this.best_huffman_divide=function(e,_){var t=new T,n=_.l3_enc,i=Pe(23),a=Pe(23),r=Pe(23),o=Pe(23);if(_.block_type!=qe.SHORT_TYPE||1!=e.mode_gr){t.assign(_),_.block_type==qe.NORM_TYPE&&(function(e,t,n,i,a,r){for(var o=_.big_values,s=0;s<=22;s++)n[s]=P.LARGE_BITS;for(s=0;s<16;s++){var l=e.scalefac_band.l[s+1];if(o<=l)break;for(var u=g(t,0,l,h=new v(0)),c=h.bits,f=0;f<8;f++){var d=e.scalefac_band.l[s+f+2];if(o<=d)break;var h,d=g(t,l,d,h=new v(p=c)),p=h.bits;n[s+f]>p&&(n[s+f]=p,a[(i[s+f]=s)+f]=u,r[s+f]=d)}}}(e,n,i,a,r,o),d(e,t,_,n,i,a,r,o));var s=t.big_values;if(!(0==s||1<(n[s-2]|n[s-1])||576<(s=_.count1+2))){t.assign(_),t.count1=s;for(var l,u=0,c=0;s>t.big_values;s-=4){var f=2*(2*(2*n[s-4]+n[s-3])+n[s-2])+n[s-1];u+=G.t32l[f],c+=G.t33l[f]}t.big_values=s,t.count1table_select=0,c<u&&(u=c,t.count1table_select=1),t.count1bits=u,t.block_type==qe.NORM_TYPE?d(e,t,_,n,i,a,r,o):(t.part2_3_length=u,s<(u=e.scalefac_band.l[8])&&(u=s),0<u&&(l=new v(t.part2_3_length),t.table_select[0]=g(n,0,u,l),t.part2_3_length=l.bits),u<s&&(l=new v(t.part2_3_length),t.table_select[1]=g(n,u,s,l),t.part2_3_length=l.bits),_.part2_3_length>t.part2_3_length&&_.assign(t))}}};var h=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],p=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],_=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],m=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];x.slen1_tab=_,x.slen2_tab=m,this.best_scalefac_store=function(e,t,n,i){var a,r,o=i.tt[t][n],s=0,l=0;for(f=0;f<o.sfbmax;f++){var u=o.width[f];for(l+=u,r=-u;r<0&&0==o.l3_enc[r+l];r++);0==r&&(o.scalefac[f]=s=-2)}if(0==o.scalefac_scale&&0==o.preflag){for(var c=0,f=0;f<o.sfbmax;f++)0<o.scalefac[f]&&(c|=o.scalefac[f]);if(0==(1&c)&&0!=c){for(f=0;f<o.sfbmax;f++)0<o.scalefac[f]&&(o.scalefac[f]>>=1);o.scalefac_scale=s=1}}if(0==o.preflag&&o.block_type!=qe.SHORT_TYPE&&2==e.mode_gr){for(f=11;f<qe.SBPSY_l&&!(o.scalefac[f]<S.pretab[f]&&-2!=o.scalefac[f]);f++);if(f==qe.SBPSY_l){for(f=11;f<qe.SBPSY_l;f++)0<o.scalefac[f]&&(o.scalefac[f]-=S.pretab[f]);o.preflag=s=1}}for(a=0;a<4;a++)i.scfsi[n][a]=0;for(2==e.mode_gr&&1==t&&i.tt[0][n].block_type!=qe.SHORT_TYPE&&i.tt[1][n].block_type!=qe.SHORT_TYPE&&(function(e,t){for(var n=t.tt[1][e],i=t.tt[0][e],a=0;a<G.scfsi_band.length-1;a++){for(s=G.scfsi_band[a];s<G.scfsi_band[a+1]&&!(i.scalefac[s]!=n.scalefac[s]&&0<=n.scalefac[s]);s++);if(s==G.scfsi_band[a+1]){for(s=G.scfsi_band[a];s<G.scfsi_band[a+1];s++)n.scalefac[s]=-1;t.scfsi[e][a]=1}}for(var r=0,o=0,s=0;s<11;s++)-1!=n.scalefac[s]&&(o++,r<n.scalefac[s]&&(r=n.scalefac[s]));for(var l=0,u=0;s<qe.SBPSY_l;s++)-1!=n.scalefac[s]&&(u++,l<n.scalefac[s]&&(l=n.scalefac[s]));for(var c,a=0;a<16;a++)r<h[a]&&l<p[a]&&(c=_[a]*o+m[a]*u,n.part2_length>c&&(n.part2_length=c,n.scalefac_compress=a))}(n,i),s=0),f=0;f<o.sfbmax;f++)-2==o.scalefac[f]&&(o.scalefac[f]=0);0!=s&&(2==e.mode_gr?this.scale_bitcount(o):this.scale_bitcount_lsf(e,o))};var l=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],u=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],c=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(e){var t,n,i,a=0,r=0,o=e.scalefac;if(e.block_type==qe.SHORT_TYPE)i=l,0!=e.mixed_block_flag&&(i=u);else if(i=c,0==e.preflag){for(n=11;n<qe.SBPSY_l&&!(o[n]<S.pretab[n]);n++);if(n==qe.SBPSY_l)for(e.preflag=1,n=11;n<qe.SBPSY_l;n++)o[n]-=S.pretab[n]}for(n=0;n<e.sfbdivide;n++)a<o[n]&&(a=o[n]);for(;n<e.sfbmax;n++)r<o[n]&&(r=o[n]);for(e.part2_length=P.LARGE_BITS,t=0;t<16;t++)a<h[t]&&r<p[t]&&e.part2_length>i[t]&&(e.part2_length=i[t],e.scalefac_compress=t);return e.part2_length==P.LARGE_BITS};var b=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(e,t){for(var n,i,a,r,o,s,l,u,c=Pe(4),f=t.scalefac,d=0!=t.preflag?2:0,h=0;h<4;h++)c[h]=0;if(t.block_type==qe.SHORT_TYPE){n=1;for(var p=S.nr_of_sfb_block[d][n],_=0,v=0;v<4;v++)for(i=p[v]/3,h=0;h<i;h++,_++)for(a=0;a<3;a++)f[3*_+a]>c[v]&&(c[v]=f[3*_+a])}else{n=0;p=S.nr_of_sfb_block[d][n];for(v=_=0;v<4;v++)for(i=p[v],h=0;h<i;h++,_++)f[_]>c[v]&&(c[v]=f[_])}for(r=!1,v=0;v<4;v++)c[v]>b[d][v]&&(r=!0);if(!r){for(t.sfb_partition_table=S.nr_of_sfb_block[d][n],v=0;v<4;v++)t.slen[v]=w[c[v]];switch(o=t.slen[0],s=t.slen[1],l=t.slen[2],u=t.slen[3],d){case 0:t.scalefac_compress=(5*o+s<<4)+(l<<2)+u;break;case 1:t.scalefac_compress=400+(5*o+s<<2)+l;break;case 2:t.scalefac_compress=500+3*o+s;break;default:$.err.printf("intensity stereo not implemented yet\n")}}if(!r)for(v=t.part2_length=0;v<4;v++)t.part2_length+=t.slen[v]*t.sfb_partition_table[v];return r};var w=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(e){for(var t=2;t<=576;t+=2){for(var n,i=0;e.scalefac_band.l[++i]<t;);for(n=a[i][0];e.scalefac_band.l[n+1]>t;)n--;for(n<0&&(n=a[i][0]),e.bv_scf[t-2]=n,n=a[i][1];e.scalefac_band.l[n+e.bv_scf[t-2]+2]>t;)n--;n<0&&(n=a[i][1]),e.bv_scf[t-1]=n}}}function k(){var s;this.setModules=function(e){s=e},this.ResvFrameBegin=function(e,t){var n,i=e.internal_flags,a=i.l3_side,r=s.getframebits(e);t.bits=(r-8*i.sideinfo_len)/i.mode_gr;var o=2048*i.mode_gr-8;320<e.brate?n=8*int(1e3*e.brate/(e.out_samplerate/1152)/8+.5):(n=11520,e.strict_ISO&&(n=8*int(32e4/(e.out_samplerate/1152)/8+.5))),i.ResvMax=n-r,i.ResvMax>o&&(i.ResvMax=o),(i.ResvMax<0||e.disable_reservoir)&&(i.ResvMax=0);e=t.bits*i.mode_gr+Math.min(i.ResvSize,i.ResvMax);return n<e&&(e=n),a.resvDrain_pre=0,null!=i.pinfo&&(i.pinfo.mean_bits=t.bits/2,i.pinfo.resvsize=i.ResvSize),e},this.ResvMaxBits=function(e,t,n,i){var a,r=e.internal_flags,o=r.ResvSize,s=r.ResvMax;0!=i&&(o+=t),0!=(1&r.substep_shaping)&&(s*=.9),n.bits=t,9*s<10*o?(a=o-9*s/10,n.bits+=a,r.substep_shaping|=128):(a=0,r.substep_shaping&=127,e.disable_reservoir||0!=(1&r.substep_shaping)||(n.bits-=.1*t));r=o<6*r.ResvMax/10?o:6*r.ResvMax/10;return(r-=a)<0&&(r=0),r},this.ResvAdjust=function(e,t){e.ResvSize-=t.part2_3_length+t.part2_length},this.ResvFrameEnd=function(e,t){var n=e.l3_side;e.ResvSize+=t*e.mode_gr;var i=0;n.resvDrain_post=0,(n.resvDrain_pre=0)!=(t=e.ResvSize%8)&&(i+=t),0<(t=e.ResvSize-i-e.ResvMax)&&(i+=t);t=Math.min(8*n.main_data_begin,i)/8;n.resvDrain_pre+=8*t,i-=8*t,e.ResvSize-=8*t,n.main_data_begin-=t,n.resvDrain_post+=i,e.ResvSize-=i}}function F(){function v(e,t,n){for(;0<n;)0==M&&(M=8,y++,e.header[e.w_ptr].write_timing==w&&(i=e,$.arraycopy(i.header[i.w_ptr].buf,0,_,y,i.sideinfo_len),y+=i.sideinfo_len,w+=8*i.sideinfo_len,i.w_ptr=i.w_ptr+1&W.MAX_HEADER_BUF-1),_[y]=0),n-=i=Math.min(n,M),M-=i,_[y]|=t>>n<<M,w+=i;var i}function o(e,t){var n,i=e.internal_flags;if(8<=t&&(v(i,76,8),t-=8),8<=t&&(v(i,65,8),t-=8),8<=t&&(v(i,77,8),t-=8),8<=t&&(v(i,69,8),t-=8),32<=t){var a=r.getLameShortVersion();if(32<=t)for(n=0;n<a.length&&8<=t;++n)t-=8,v(i,a.charAt(n),8)}for(;1<=t;--t)v(i,i.ancillary_flag,1),i.ancillary_flag^=e.disable_reservoir?0:1}function l(e,t,n){for(var i=e.header[e.h_ptr].ptr;0<n;){var a=Math.min(n,8-(7&i));n-=a,e.header[e.h_ptr].buf[i>>3]|=t>>n<<8-(7&i)-a,i+=a}e.header[e.h_ptr].ptr=i}function a(e,t){e<<=8;for(var n=0;n<8;n++)0!=(65536&((t<<=1)^(e<<=1)))&&(t^=32773);return t}function g(e,t){for(var n=G.ht[t.count1table_select+32],i=0,a=t.big_values,r=t.big_values,o=(t.count1-t.big_values)/4;0<o;--o){var s=0,l=0,u=t.l3_enc[a+0];0!=u&&(l+=8,t.xr[r+0]<0&&s++),0!=t.l3_enc[a+1]&&(l+=4,s*=2,t.xr[r+1]<0&&s++),0!=t.l3_enc[a+2]&&(l+=2,s*=2,t.xr[r+2]<0&&s++),0!=t.l3_enc[a+3]&&(l++,s*=2,t.xr[r+3]<0&&s++),a+=4,r+=4,v(e,s+n.table[l],n.hlen[l]),i+=n.hlen[l]}return i}function s(e,t,n,i,a){var r=G.ht[t],o=0;if(0==t)return o;for(var s=n;s<i;s+=2){var l=0,u=0,c=r.xlen,f=r.xlen,d=0,h=a.l3_enc[s],p=a.l3_enc[s+1];0!=h&&(a.xr[s]<0&&d++,l--),15<t&&(14<h&&(d|=h-15<<1,u=c,h=15),14<p&&(d<<=c,d|=p-15,u+=c,p=15),f=16),0!=p&&(d<<=1,a.xr[s+1]<0&&d++,l--),h=h*f+p,u-=l,l+=r.hlen[h],v(e,r.table[h],l),v(e,d,u),o+=l+u}return o}function m(e,t){var n=3*e.scalefac_band.s[3];return n>t.big_values&&(n=t.big_values),s(e,t.table_select[0],0,n,t)+s(e,t.table_select[1],n,t.big_values,t)}function b(e,t){var n,i=t.big_values,a=t.region0_count+1,r=e.scalefac_band.l[a];return a+=t.region1_count+1,i<r&&(r=i),i<(n=e.scalefac_band.l[a])&&(n=i),a=s(e,t.table_select[0],0,r,t),(a+=s(e,t.table_select[1],r,n,t))+s(e,t.table_select[2],n,i,t)}function u(){this.total=0}function c(e,t){var n,i=e.internal_flags,a=i.w_ptr,r=i.h_ptr-1;return-1==r&&(r=W.MAX_HEADER_BUF-1),n=i.header[r].write_timing-w,0<=(t.total=n)&&(n-=8*(r<a?1+r-a+W.MAX_HEADER_BUF:1+r-a)*i.sideinfo_len),n+=e=f.getframebits(e),t.total+=e,t.total%8!=0?t.total=1+t.total/8:t.total=t.total/8,t.total+=y+1,n<0&&$.err.println("strange error flushing buffer ... \n"),n}var f=this,d=null,h=null,r=null,p=null;this.setModules=function(e,t,n,i){d=e,h=t,r=n,p=i};var _=null,w=0,y=0,M=0;this.getframebits=function(e){var t=e.internal_flags,n=0!=t.bitrate_index?G.bitrate_table[e.version][t.bitrate_index]:e.brate;return 8*(0|72e3*(e.version+1)*n/e.out_samplerate+t.padding)},this.CRC_writeheader=function(e,t){var n=65535,n=a(255&t[2],n);n=a(255&t[3],n);for(var i=6;i<e.sideinfo_len;i++)n=a(255&t[i],n);t[4]=byte(n>>8),t[5]=byte(255&n)},this.flush_bitstream=function(e){var t,n,i=e.internal_flags;i.h_ptr,n=i.l3_side,(t=c(e,new u))<0||(o(e,t),i.ResvSize=0,n.main_data_begin=0,i.findReplayGain&&(n=d.GetTitleGain(i.rgdata),i.RadioGain=0|Math.floor(10*n+.5)),i.findPeakSample&&(i.noclipGainChange=0|Math.ceil(20*Math.log10(i.PeakSample/32767)*10),0<i.noclipGainChange&&(EQ(e.scale,1)||EQ(e.scale,0))?i.noclipScale=Math.floor(32767/i.PeakSample*100)/100:i.noclipScale=-1))},this.add_dummy_byte=function(e,t,n){for(var i,a=e.internal_flags;0<n--;)for(function(e,t){for(;0<t;){var n;0==M&&(M=8,_[++y]=0),t-=n=Math.min(t,M),M-=n,_[y]|=e>>t<<M,w+=n}}(t,8),i=0;i<W.MAX_HEADER_BUF;++i)a.header[i].write_timing+=8},this.format_bitstream=function(e){var t=e.internal_flags,n=t.l3_side,i=this.getframebits(e);o(e,n.resvDrain_pre),function(e,t){var n,i,a,r=e.internal_flags,o=r.l3_side;if(r.header[r.h_ptr].ptr=0,ze.fill(r.header[r.h_ptr].buf,0,r.sideinfo_len,0),e.out_samplerate<16e3?l(r,4094,12):l(r,4095,12),l(r,e.version,1),l(r,1,2),l(r,e.error_protection?0:1,1),l(r,r.bitrate_index,4),l(r,r.samplerate_index,2),l(r,r.padding,1),l(r,e.extension,1),l(r,e.mode.ordinal(),2),l(r,r.mode_ext,2),l(r,e.copyright,1),l(r,e.original,1),l(r,e.emphasis,2),e.error_protection&&l(r,0,16),1==e.version){for(l(r,o.main_data_begin,9),2==r.channels_out?l(r,o.private_bits,3):l(r,o.private_bits,5),i=0;i<r.channels_out;i++)for(var s=0;s<4;s++)l(r,o.scfsi[i][s],1);for(n=0;n<2;n++)for(i=0;i<r.channels_out;i++)l(r,(a=o.tt[n][i]).part2_3_length+a.part2_length,12),l(r,a.big_values/2,9),l(r,a.global_gain,8),l(r,a.scalefac_compress,4),a.block_type!=qe.NORM_TYPE?(l(r,1,1),l(r,a.block_type,2),l(r,a.mixed_block_flag,1),14==a.table_select[0]&&(a.table_select[0]=16),l(r,a.table_select[0],5),14==a.table_select[1]&&(a.table_select[1]=16),l(r,a.table_select[1],5),l(r,a.subblock_gain[0],3),l(r,a.subblock_gain[1],3),l(r,a.subblock_gain[2],3)):(l(r,0,1),14==a.table_select[0]&&(a.table_select[0]=16),l(r,a.table_select[0],5),14==a.table_select[1]&&(a.table_select[1]=16),l(r,a.table_select[1],5),14==a.table_select[2]&&(a.table_select[2]=16),l(r,a.table_select[2],5),l(r,a.region0_count,4),l(r,a.region1_count,3)),l(r,a.preflag,1),l(r,a.scalefac_scale,1),l(r,a.count1table_select,1)}else for(l(r,o.main_data_begin,8),l(r,o.private_bits,r.channels_out),i=n=0;i<r.channels_out;i++)l(r,(a=o.tt[n][i]).part2_3_length+a.part2_length,12),l(r,a.big_values/2,9),l(r,a.global_gain,8),l(r,a.scalefac_compress,9),a.block_type!=qe.NORM_TYPE?(l(r,1,1),l(r,a.block_type,2),l(r,a.mixed_block_flag,1),14==a.table_select[0]&&(a.table_select[0]=16),l(r,a.table_select[0],5),14==a.table_select[1]&&(a.table_select[1]=16),l(r,a.table_select[1],5),l(r,a.subblock_gain[0],3),l(r,a.subblock_gain[1],3),l(r,a.subblock_gain[2],3)):(l(r,0,1),14==a.table_select[0]&&(a.table_select[0]=16),l(r,a.table_select[0],5),14==a.table_select[1]&&(a.table_select[1]=16),l(r,a.table_select[1],5),14==a.table_select[2]&&(a.table_select[2]=16),l(r,a.table_select[2],5),l(r,a.region0_count,4),l(r,a.region1_count,3)),l(r,a.scalefac_scale,1),l(r,a.count1table_select,1);e.error_protection&&CRC_writeheader(r,r.header[r.h_ptr].buf),e=r.h_ptr,r.h_ptr=e+1&W.MAX_HEADER_BUF-1,r.header[r.h_ptr].write_timing=r.header[e].write_timing+t,r.h_ptr==r.w_ptr&&$.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n")}(e,i);var a=8*t.sideinfo_len;if(a+=function(e){var t,n,i=0,a=e.internal_flags,r=a.l3_side;if(1==e.version)for(t=0;t<2;t++)for(n=0;n<a.channels_out;n++){for(var o=r.tt[t][n],s=x.slen1_tab[o.scalefac_compress],l=x.slen2_tab[o.scalefac_compress],u=0,c=0;c<o.sfbdivide;c++)-1!=o.scalefac[c]&&(v(a,o.scalefac[c],s),u+=s);for(;c<o.sfbmax;c++)-1!=o.scalefac[c]&&(v(a,o.scalefac[c],l),u+=l);u+=(o.block_type==qe.SHORT_TYPE?m:b)(a,o),i+=u+=g(a,o)}else for(n=t=0;n<a.channels_out;n++){var f=0,d=c=u=0;if((o=r.tt[t][n]).block_type==qe.SHORT_TYPE){for(;d<4;d++)for(var h=o.sfb_partition_table[d]/3,p=o.slen[d],_=0;_<h;_++,c++)v(a,Math.max(o.scalefac[3*c+0],0),p),v(a,Math.max(o.scalefac[3*c+1],0),p),v(a,Math.max(o.scalefac[3*c+2],0),p),f+=3*p;u+=m(a,o)}else{for(;d<4;d++){h=o.sfb_partition_table[d],p=o.slen[d];for(_=0;_<h;_++,c++)v(a,Math.max(o.scalefac[c],0),p),f+=p}u+=b(a,o)}i+=f+(u+=g(a,o))}return i}(e),o(e,n.resvDrain_post),a+=n.resvDrain_post,n.main_data_begin+=(i-a)/8,c(e,new u)!=t.ResvSize&&$.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),8*n.main_data_begin!=t.ResvSize&&($.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",8*n.main_data_begin,t.ResvSize,n.resvDrain_post,n.resvDrain_pre,8*t.sideinfo_len,a-n.resvDrain_post-8*t.sideinfo_len,a,a%8,i),$.err.println("This is a fatal error.  It has several possible causes:"),$.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),$.err.println(" 9%%  Your system is overclocked"),$.err.println(" 1%%  bug in LAME encoding library"),t.ResvSize=8*n.main_data_begin),1e9<w){for(var r=0;r<W.MAX_HEADER_BUF;++r)t.header[r].write_timing-=w;w=0}return 0},this.copy_buffer=function(e,t,n,i,a){var r=y+1;if(r<=0)return 0;if(0!=i&&i<r)return-1;if($.arraycopy(_,0,t,n,r),y=-1,(M=0)!=a){a=Pe(1);if(a[0]=e.nMusicCRC,p.updateMusicCRC(a,t,n,r),e.nMusicCRC=a[0],0<r&&(e.VBR_seek_table.nBytesWritten+=r),e.decode_on_the_fly)for(var o,s=Ce([2,1152]),l=r,u=-1;0!=u;)if(-1==(u=h.hip_decode1_unclipped(e.hip,t,n,l,s[0],s[1]))&&(u=0),(l=0)<u){if(e.findPeakSample){for(o=0;o<u;o++)s[0][o]>e.PeakSample?e.PeakSample=s[0][o]:-s[0][o]>e.PeakSample&&(e.PeakSample=-s[0][o]);if(1<e.channels_out)for(o=0;o<u;o++)s[1][o]>e.PeakSample?e.PeakSample=s[1][o]:-s[1][o]>e.PeakSample&&(e.PeakSample=-s[1][o])}if(e.findReplayGain&&d.AnalyzeSamples(e.rgdata,s[0],0,s[1],0,u,e.channels_out)==H.GAIN_ANALYSIS_ERROR)return-6}}return r},this.init_bit_stream_w=function(e){_=S(j.LAME_MAXMP3BUFFER),e.h_ptr=e.w_ptr=0,e.header[e.h_ptr].write_timing=0,y=-1,w=M=0}}function A(){function l(e,t){var n=255&e[t+0];return n<<=8,n|=255&e[t+1],n<<=8,n|=255&e[t+2],(n<<=8)|255&e[t+3]}function E(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function B(e,t,n){e[t+0]=n>>8&255,e[t+1]=255&n}function a(e,t,n){return 255&(e<<t|n&~(-1<<t))}function u(e,t){var n=e.internal_flags;t[0]=a(t[0],8,255),t[1]=a(t[1],3,7),t[1]=a(t[1],1,e.out_samplerate<16e3?0:1),t[1]=a(t[1],1,e.version),t[1]=a(t[1],2,1),t[1]=a(t[1],1,e.error_protection?0:1),t[2]=a(t[2],4,n.bitrate_index),t[2]=a(t[2],2,n.samplerate_index),t[2]=a(t[2],1,0),t[2]=a(t[2],1,e.extension),t[3]=a(t[3],2,e.mode.ordinal()),t[3]=a(t[3],2,n.mode_ext),t[3]=a(t[3],1,e.copyright),t[3]=a(t[3],1,e.original),t[3]=a(t[3],2,e.emphasis),t[0]=255;var i=241&t[1],n=1==e.version?128:e.out_samplerate<16e3?32:64;e.VBR==Oe.vbr_off&&(n=e.brate),n=e.free_format?0:255&16*r.BitrateIndex(n,e.version,e.out_samplerate),i=(1==e.version?t[1]=255&(10|i):t[1]=255&(2|i),13&t[2]),t[2]=255&(n|i)}function P(e,t){return t>>8^n[255&(t^e)]}var r,c,T;this.setModules=function(e,t,n){r=e,c=t,T=n};var f=A.NUMTOCENTRIES,s=A.MAXFRAMESIZE,d=f+4+4+4+4+4+9+1+1+8+1+1+3+1+1+2+4+2+2,h=null,p="Xing",_="Info",n=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];this.addVbrFrame=function(e){var t=e.internal_flags,e=G.bitrate_table[e.version][t.bitrate_index];!function(e,t){if(e.nVbrNumFrames++,e.sum+=t,e.seen++,!(e.seen<e.want)&&(e.pos<e.size&&(e.bag[e.pos]=e.sum,e.pos++,e.seen=0),e.pos==e.size)){for(var n=1;n<e.size;n+=2)e.bag[n/2]=e.bag[n];e.want*=2,e.pos/=2}}(t.VBR_seek_table,e)},this.getVbrTag=function(e){var t=new VBRTagData,n=0;t.flags=0;var i=e[n+1]>>3&1,a=e[n+2]>>2&3,r=e[n+3]>>6&3,o=e[n+2]>>4&15,o=G.bitrate_table[i][o];if(e[n+1]>>4==14?t.samprate=G.samplerate_table[2][a]:t.samprate=G.samplerate_table[i][a],a=e,r=n+=0!=i?3!=r?36:21:3!=r?21:13,!new String(a,r,p.length(),h).equals(p)&&!new String(a,r,_.length(),h).equals(_))return null;n+=4,t.hId=i;r=t.flags=l(e,n);if(n+=4,0!=(1&r)&&(t.frames=l(e,n),n+=4),0!=(2&r)&&(t.bytes=l(e,n),n+=4),0!=(4&r)){if(null!=t.toc)for(var s=0;s<f;s++)t.toc[s]=e[n+s];n+=f}t.vbrScale=-1,0!=(8&r)&&(t.vbrScale=l(e,n),n+=4),t.headersize=72e3*(1+i)*o/t.samprate;i=e[(n+=21)+0]<<4;i+=e[n+1]>>4;o=(15&e[n+1])<<8;return(i<0||3e3<i)&&(i=-1),((o+=255&e[n+2])<0||3e3<o)&&(o=-1),t.encDelay=i,t.encPadding=o,t},this.InitVbrTag=function(e){var t=e.internal_flags,n=1==e.version?128:e.out_samplerate<16e3?32:64;e.VBR==Oe.vbr_off&&(n=e.brate);var i=72e3*(e.version+1)*n/e.out_samplerate,n=t.sideinfo_len+d;if((t.VBR_seek_table.TotalFrameSize=i)<n||s<i)e.bWriteVbrTag=!1;else{t.VBR_seek_table.nVbrNumFrames=0,t.VBR_seek_table.nBytesWritten=0,t.VBR_seek_table.sum=0,t.VBR_seek_table.seen=0,t.VBR_seek_table.want=1,t.VBR_seek_table.pos=0,null==t.VBR_seek_table.bag&&(t.VBR_seek_table.bag=new int[400],t.VBR_seek_table.size=400);var a=S(s);u(e,a);for(var r=t.VBR_seek_table.TotalFrameSize,o=0;o<r;++o)c.add_dummy_byte(e,255&a[o],1)}},this.updateMusicCRC=function(e,t,n,i){for(var a=0;a<i;++a)e[0]=P(t[n+a],e[0])},this.getLameTagFrame=function(e,t){var n=e.internal_flags;if(!e.bWriteVbrTag)return 0;if(n.Class_ID!=j.LAME_ID)return 0;if(n.VBR_seek_table.pos<=0)return 0;if(t.length<n.VBR_seek_table.TotalFrameSize)return n.VBR_seek_table.TotalFrameSize;ze.fill(t,0,n.VBR_seek_table.TotalFrameSize,0),u(e,t);var i=S(f);if(e.free_format)for(var a=1;a<f;++a)i[a]=255&255*a/100;else!function(e,t){if(!(e.pos<=0))for(var n=1;n<f;++n){var i=n/f,i=0|Math.floor(i*e.pos);i>e.pos-1&&(i=e.pos-1);i=0|256*e.bag[i]/e.sum;255<i&&(i=255),t[n]=255&i}}(n.VBR_seek_table,i);var r=n.sideinfo_len;e.error_protection&&(r-=2),e.VBR==Oe.vbr_off?(t[r++]=255&_.charAt(0),t[r++]=255&_.charAt(1),t[r++]=255&_.charAt(2),t[r++]=255&_.charAt(3)):(t[r++]=255&p.charAt(0),t[r++]=255&p.charAt(1),t[r++]=255&p.charAt(2),t[r++]=255&p.charAt(3)),E(t,r,15),E(t,r+=4,n.VBR_seek_table.nVbrNumFrames),r+=4;var o=n.VBR_seek_table.nBytesWritten+n.VBR_seek_table.TotalFrameSize;E(t,r,0|o),r+=4,$.arraycopy(i,0,t,r,i.length),r+=i.length,e.error_protection&&c.CRC_writeheader(n,t);for(var s=0,a=0;a<r;a++)s=P(t[a],s);return r+=function(e,t,n,i,a){var r,o=e.internal_flags,s=0,l=e.encoder_delay,u=e.encoder_padding,c=100-10*e.VBR_q-e.quality,f=T.getLameVeryShortVersion(),d=[1,5,3,2,4,0,3],h=0|(255<e.lowpassfreq/100+.5?255:e.lowpassfreq/100+.5),p=0,_=0,v=e.internal_flags.noise_shaping,g=0,m=0,b=0!=(1&e.exp_nspsytune),w=0!=(2&e.exp_nspsytune),y=!1,M=!1,S=e.internal_flags.nogap_total,x=e.internal_flags.nogap_current,k=e.ATHtype;switch(e.VBR){case vbr_abr:r=e.VBR_mean_bitrate_kbps;break;case vbr_off:r=e.brate;break;default:r=e.VBR_min_bitrate_kbps}switch(d=0+(e.VBR.ordinal()<d.length?d[e.VBR.ordinal()]:0),o.findReplayGain&&(510<o.RadioGain&&(o.RadioGain=510),o.RadioGain<-510&&(o.RadioGain=-510),_=8192,_|=3072,0<=o.RadioGain?_|=o.RadioGain:(_|=512,_|=-o.RadioGain)),o.findPeakSample&&(p=Math.abs(0|o.PeakSample/32767*Math.pow(2,23)+.5)),-1!=S&&(0<x&&(M=!0),x<S-1&&(y=!0)),y=k+((b?1:0)<<4)+((w?1:0)<<5)+((y?1:0)<<6)+((M?1:0)<<7),c<0&&(c=0),e.mode){case MONO:g=0;break;case STEREO:g=1;break;case DUAL_CHANNEL:g=2;break;case JOINT_STEREO:g=e.force_ms?4:3;break;case NOT_SET:default:g=7}M=e.in_samplerate<=32e3?0:48e3==e.in_samplerate?2:48e3<e.in_samplerate?3:1,(e.short_blocks==Ie.short_block_forced||e.short_blocks==Ie.short_block_dispensed||-1==e.lowpassfreq&&-1==e.highpassfreq||e.scale_left<e.scale_right||e.scale_left>e.scale_right||e.disable_reservoir&&e.brate<320||e.noATH||e.ATHonly||0==k||e.in_samplerate<=32e3)&&(m=1),M=v+(g<<2)+(m<<5)+(M<<6),o=o.nMusicCRC,E(n,i+s,c),s+=4;for(var A=0;A<9;A++)n[i+s+A]=255&f.charAt(A);n[i+(s+=9)]=255&d,n[i+ ++s]=255&h,E(n,i+ ++s,p),B(n,i+(s+=4),_),B(n,i+(s+=2),0),n[i+(s+=2)]=255&y,n[i+ ++s]=255<=r?255:255&r,n[i+ ++s]=255&l>>4,n[i+s+1]=255&(l<<4)+(u>>8),n[i+s+2]=255&u,n[i+(s+=3)]=255&M,s++,n[i+s++]=0,B(n,i+s,e.preset),E(n,i+(s+=2),t),B(n,i+(s+=4),o),s+=2;for(var R=0;R<s;R++)a=P(n[i+R],a);return B(n,i+s,a),s+2}(e,o,t,r,s),n.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(e,t){if(e.internal_flags.VBR_seek_table.pos<=0)return-1;if(t.seek(t.length()),0==t.length())return-1;var n=function(e){e.seek(0);var t=S(10);return e.readFully(t),new String(t,"ISO-8859-1").startsWith("ID3")?0:((127&t[6])<<21|(127&t[7])<<14|(127&t[8])<<7|127&t[9])+t.length}(t);t.seek(n);n=S(s),e=getLameTagFrame(e,n);return e>n.length?-1:(e<1||t.write(n,0,e),0)}}function e(e,t,n,i){this.xlen=e,this.linmax=t,this.table=n,this.hlen=i}function R(e){this.bits=e}function t(){this.setModules=function(e,t){0}}function B(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}function a(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=Ve.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}function L(){this.linprebuf=Te(2*H.MAX_ORDER),this.linpre=0,this.lstepbuf=Te(H.MAX_SAMPLES_PER_WINDOW+H.MAX_ORDER),this.lstep=0,this.loutbuf=Te(H.MAX_SAMPLES_PER_WINDOW+H.MAX_ORDER),this.lout=0,this.rinprebuf=Te(2*H.MAX_ORDER),this.rinpre=0,this.rstepbuf=Te(H.MAX_SAMPLES_PER_WINDOW+H.MAX_ORDER),this.rstep=0,this.routbuf=Te(H.MAX_SAMPLES_PER_WINDOW+H.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=Pe(0|H.STEPS_per_dB*H.MAX_dB),this.B=Pe(0|H.STEPS_per_dB*H.MAX_dB)}function N(e){this.quantize=e,this.iteration_loop=function(e,t,n,i){var a,r,o=e.internal_flags,s=Te(K.SFBMAX),l=Te(576),u=Pe(2),c=o.l3_side,f=new R(0);this.quantize.rv.ResvFrameBegin(e,f),r=f.bits;for(var d=0;d<o.mode_gr;d++){a=this.quantize.qupvt.on_pe(e,t,u,r,d,d),o.mode_ext==qe.MPG_MD_MS_LR&&(this.quantize.ms_convert(o.l3_side,d),this.quantize.qupvt.reduce_side(u,n[d],r,a));for(var h=0;h<o.channels_out;h++){var p,_=c.tt[d][h],v=_.block_type!=qe.SHORT_TYPE?(p=0,o.PSY.mask_adjust-p):(p=0,o.PSY.mask_adjust_short-p);o.masking_lower=Math.pow(10,.1*v),this.quantize.init_outer_loop(o,_),this.quantize.init_xrpow(o,_,l)&&(this.quantize.qupvt.calc_xmin(e,i[d][h],_,s),this.quantize.outer_loop(e,_,s,l,h,u[h])),this.quantize.iteration_finish_one(o,d,h)}}this.quantize.rv.ResvFrameEnd(o,r)}}function Q(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=Te(qe.SBMAX_l),this.s=Te(qe.SBMAX_s),this.psfb21=Te(qe.PSFB21),this.psfb12=Te(qe.PSFB12),this.cb_l=Te(qe.CBANDS),this.cb_s=Te(qe.CBANDS),this.eql_w=Te(qe.BLKSIZE/2)}function r(e,t,n,i){this.l=Pe(1+qe.SBMAX_l),this.s=Pe(1+qe.SBMAX_s),this.psfb21=Pe(1+qe.PSFB21),this.psfb12=Pe(1+qe.PSFB12);var a=this.l,r=this.s;4==arguments.length&&(this.arrL=e,this.arrS=t,this.arr21=n,this.arr12=i,$.arraycopy(this.arrL,0,a,0,Math.min(this.arrL.length,this.l.length)),$.arraycopy(this.arrS,0,r,0,Math.min(this.arrS.length,this.s.length)),$.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),$.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}function P(){function d(e,t){t=i.ATHformula(t,e);return t-=n,Math.pow(10,t/10+e.ATHlower)}function w(e){this.s=e}var u=null,h=null,i=null;this.setModules=function(e,t,n){u=e,h=t,i=n},this.IPOW20=function(e){return _[e]};var E=2220446049250313e-31,c=P.IXMAX_VAL+2,f=P.Q_MAX,p=P.Q_MAX2,n=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var y=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=y,this.sfBandIndex=[new r([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new r([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new r([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new r([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new r([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new r([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new r([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new r([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new r([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var M=Te(f+p+1),_=Te(f),v=Te(c),g=Te(c);this.adj43=g,this.iteration_init=function(e){var t,n,i,a,r,o,s=e.internal_flags,l=s.l3_side;if(0==s.iteration_init_init){for(s.iteration_init_init=1,l.main_data_begin=0,function(e){for(var t=e.internal_flags.ATH.l,n=e.internal_flags.ATH.psfb21,i=e.internal_flags.ATH.s,a=e.internal_flags.ATH.psfb12,r=e.internal_flags,o=e.out_samplerate,s=0;s<qe.SBMAX_l;s++){var l=r.scalefac_band.l[s],u=r.scalefac_band.l[s+1];t[s]=U.MAX_VALUE;for(var c=l;c<u;c++){var f=d(e,c*o/1152);t[s]=Math.min(t[s],f)}}for(s=0;s<qe.PSFB21;s++){l=r.scalefac_band.psfb21[s],u=r.scalefac_band.psfb21[s+1];n[s]=U.MAX_VALUE;for(c=l;c<u;c++){f=d(e,c*o/1152);n[s]=Math.min(n[s],f)}}for(s=0;s<qe.SBMAX_s;s++){l=r.scalefac_band.s[s],u=r.scalefac_band.s[s+1];i[s]=U.MAX_VALUE;for(c=l;c<u;c++){f=d(e,c*o/384);i[s]=Math.min(i[s],f)}i[s]*=r.scalefac_band.s[s+1]-r.scalefac_band.s[s]}for(s=0;s<qe.PSFB12;s++){l=r.scalefac_band.psfb12[s],u=r.scalefac_band.psfb12[s+1];a[s]=U.MAX_VALUE;for(c=l;c<u;c++){f=d(e,c*o/384);a[s]=Math.min(a[s],f)}a[s]*=r.scalefac_band.s[13]-r.scalefac_band.s[12]}if(e.noATH){for(s=0;s<qe.SBMAX_l;s++)t[s]=1e-20;for(s=0;s<qe.PSFB21;s++)n[s]=1e-20;for(s=0;s<qe.SBMAX_s;s++)i[s]=1e-20;for(s=0;s<qe.PSFB12;s++)a[s]=1e-20}r.ATH.floor=10*Math.log10(d(e,-1))}(e),v[0]=0,t=1;t<c;t++)v[t]=Math.pow(t,4/3);for(t=0;t<c-1;t++)g[t]=t+1-Math.pow(.5*(v[t]+v[t+1]),.75);for(g[t]=.5,t=0;t<f;t++)_[t]=Math.pow(2,-.1875*(t-210));for(t=0;t<=f+p;t++)M[t]=Math.pow(2,.25*(t-210-p));for(u.huffman_init(s),32<=(t=e.exp_nspsytune>>2&63)&&(t-=64),n=Math.pow(10,t/4/10),32<=(t=e.exp_nspsytune>>8&63)&&(t-=64),i=Math.pow(10,t/4/10),32<=(t=e.exp_nspsytune>>14&63)&&(t-=64),a=Math.pow(10,t/4/10),32<=(t=e.exp_nspsytune>>20&63)&&(t-=64),r=a*Math.pow(10,t/4/10),t=0;t<qe.SBMAX_l;t++)o=t<=6?n:t<=13?i:t<=20?a:r,s.nsPsy.longfact[t]=o;for(t=0;t<qe.SBMAX_s;t++)o=t<=5?n:t<=10?i:t<=11?a:r,s.nsPsy.shortfact[t]=o}},this.on_pe=function(e,t,n,i,a,r){var o,s=e.internal_flags,l=0,u=Pe(2),c=new R(0),f=h.ResvMaxBits(e,i,c,r),c=(l=c.bits)+f;for(W.MAX_BITS_PER_GRANULE<c&&(c=W.MAX_BITS_PER_GRANULE),d=o=0;d<s.channels_out;++d)n[d]=Math.min(W.MAX_BITS_PER_CHANNEL,l/s.channels_out),u[d]=0|n[d]*t[a][d]/700-n[d],u[d]>3*i/4&&(u[d]=3*i/4),u[d]<0&&(u[d]=0),u[d]+n[d]>W.MAX_BITS_PER_CHANNEL&&(u[d]=Math.max(0,W.MAX_BITS_PER_CHANNEL-n[d])),o+=u[d];if(f<o)for(d=0;d<s.channels_out;++d)u[d]=f*u[d]/o;for(d=0;d<s.channels_out;++d)n[d]+=u[d],f-=u[d];for(d=o=0;d<s.channels_out;++d)o+=n[d];if(W.MAX_BITS_PER_GRANULE<o)for(var d=0;d<s.channels_out;++d)n[d]*=W.MAX_BITS_PER_GRANULE,n[d]/=o,n[d];return c},this.reduce_side=function(e,t,n,i){t=.33*(.5-t)/.5;t<0&&(t=0),.5<t&&(t=.5);t=0|.5*t*(e[0]+e[1]);t>W.MAX_BITS_PER_CHANNEL-e[0]&&(t=W.MAX_BITS_PER_CHANNEL-e[0]),t<0&&(t=0),125<=e[1]&&(125<e[1]-t?(e[0]<n&&(e[0]+=t),e[1]-=t):(e[0]+=e[1]-125,e[1]=125)),i<(t=e[0]+e[1])&&(e[0]=i*e[0]/t,e[1]=i*e[1]/t)},this.athAdjust=function(e,t,n){var i=De.FAST_LOG10_X(t,10),t=e*e,e=0;return i-=n,1e-20<t&&(e=1+De.FAST_LOG10_X(t,10/90.30873362)),e<0&&(e=0),i*=e,i+=n+90.30873362-94.82444863,Math.pow(10,.1*i)},this.calc_xmin=function(e,t,n,i){var a,r=0,o=e.internal_flags,s=0,l=0,u=o.ATH,c=n.xr,f=e.VBR==Oe.vbr_mtrh?1:0,d=o.masking_lower;for(e.VBR!=Oe.vbr_mtrh&&e.VBR!=Oe.vbr_mt||(d=1),a=0;a<n.psy_lmax;a++){w=(b=e.VBR==Oe.vbr_rh||e.VBR==Oe.vbr_mtrh?athAdjust(u.adjust,u.l[a],u.floor):u.adjust*u.l[a])/(v=n.width[a]),y=E,R=v>>1,A=0;do{}while(A+=M=c[s]*c[s],y+=M<w?M:w,A+=S=c[++s]*c[s],y+=S<w?S:w,s++,0<--R);b<A&&l++,a!=qe.SBPSY_l||y<(k=b*o.nsPsy.longfact[a])&&(y=k),0!=f&&(b=y),e.ATHonly||0<(x=t.en.l[a])&&(k=A*t.thm.l[a]*d/x,0!=f&&(k*=o.nsPsy.longfact[a]),b<k&&(b=k)),i[r++]=0!=f?b:b*o.nsPsy.longfact[a]}var h=575;if(n.block_type!=qe.SHORT_TYPE)for(var p=576;0!=p--&&F.EQ(c[p],0);)h=p;n.max_nonzero_coeff=h;for(var _=n.sfb_smin;a<n.psymax;_++,a+=3){var v,g,m=e.VBR==Oe.vbr_rh||e.VBR==Oe.vbr_mtrh?athAdjust(u.adjust,u.s[_],u.floor):u.adjust*u.s[_];for(v=n.width[a],g=0;g<3;g++){var b,w,y,M,S,x,k,A=0,R=v>>1;w=m/v,y=E;do{}while(A+=M=c[s]*c[s],y+=M<w?M:w,A+=S=c[++s]*c[s],y+=S<w?S:w,s++,0<--R);m<A&&l++,_!=qe.SBPSY_s||y<(k=m*o.nsPsy.shortfact[_])&&(y=k),b=0!=f?y:m,e.ATHonly||e.ATHshort||0<(x=t.en.s[_][g])&&(k=A*t.thm.s[_][g]*d/x,0!=f&&(k*=o.nsPsy.shortfact[_]),b<k&&(b=k)),i[r++]=0!=f?b:b*o.nsPsy.shortfact[_]}e.useTemporal&&(i[r-3]>i[r-3+1]&&(i[r-3+1]+=(i[r-3]-i[r-3+1])*o.decay),i[r-3+1]>i[r-3+2]&&(i[r-3+2]+=(i[r-3+1]-i[r-3+2])*o.decay))}return l},this.calc_noise_core=function(e,t,n,i){var a=0,r=t.s,o=e.l3_enc;if(r>e.count1)for(;0!=n--;)s=e.xr[r],r++,a+=s*s,s=e.xr[r],r++,a+=s*s;else if(r>e.big_values){var s,l=Te(2);for(l[0]=0,l[1]=i;0!=n--;)s=Math.abs(e.xr[r])-l[o[r]],r++,a+=s*s,s=Math.abs(e.xr[r])-l[o[r]],r++,a+=s*s}else for(;0!=n--;)s=Math.abs(e.xr[r])-v[o[r]]*i,r++,a+=s*s,s=Math.abs(e.xr[r])-v[o[r]]*i,r++,a+=s*s;return t.s=r,a},this.calc_noise=function(e,t,n,i,a){for(var r=0,o=0,s=0,l=0,u=0,c=-20,f=0,d=e.scalefac,h=0,p=i.over_SSD=0;p<e.psymax;p++){var _,v,g,m=e.global_gain-(d[h++]+(0!=e.preflag?y[p]:0)<<e.scalefac_scale+1)-8*e.subblock_gain[e.window[p]],b=0;null!=a&&a.step[p]==m?(b=a.noise[p],f+=e.width[p],n[r++]=b/t[o++],b=a.noise_log[p]):(_=M[m+P.Q_MAX2],v=e.width[p]>>1,f+e.width[p]>e.max_nonzero_coeff&&(v=0<(g=e.max_nonzero_coeff-f+1)?g>>1:0),g=new w(f),b=this.calc_noise_core(e,g,v,_),f=g.s,null!=a&&(a.step[p]=m,a.noise[p]=b),b=n[r++]=b/t[o++],b=De.FAST_LOG10(Math.max(b,1e-20)),null!=a&&(a.noise_log[p]=b)),null!=a&&(a.global_gain=e.global_gain),u+=b,0<b&&(m=Math.max(0|10*b+.5,1),i.over_SSD+=m*m,s++,l+=b),c=Math.max(c,b)}return i.over_count=s,i.tot_noise=u,i.over_noise=l,i.max_noise=c,s},this.set_pinfo=function(e,t,n,i,a){var r,o,s,l=e.internal_flags,u=0==t.scalefac_scale?.5:1,c=t.scalefac,f=Te(K.SFBMAX),d=Te(K.SFBMAX),h=new B;calc_xmin(e,n,t,f),calc_noise(t,f,d,h,null);var p=0,_=t.sfb_lmax;for(t.block_type!=qe.SHORT_TYPE&&0==t.mixed_block_flag&&(_=22),r=0;r<_;r++){for(var v=l.scalefac_band.l[r],g=(b=l.scalefac_band.l[r+1])-v,m=0;p<b;p++)m+=t.xr[p]*t.xr[p];m/=g,s=1e15,l.pinfo.en[i][a][r]=s*m,l.pinfo.xfsf[i][a][r]=s*f[r]*d[r]/g,0<n.en.l[r]&&!e.ATHonly?m/=n.en.l[r]:m=0,l.pinfo.thr[i][a][r]=s*Math.max(m*n.thm.l[r],l.ATH.l[r]),(l.pinfo.LAMEsfb[i][a][r]=0)!=t.preflag&&11<=r&&(l.pinfo.LAMEsfb[i][a][r]=-u*y[r]),r<qe.SBPSY_l&&(l.pinfo.LAMEsfb[i][a][r]-=u*c[r])}if(t.block_type==qe.SHORT_TYPE)for(_=r,r=t.sfb_smin;r<qe.SBMAX_s;r++)for(var b,v=l.scalefac_band.s[r],g=(b=l.scalefac_band.s[r+1])-v,w=0;w<3;w++){for(m=0,o=v;o<b;o++)m+=t.xr[p]*t.xr[p],p++;m=Math.max(m/g,1e-20),s=1e15,l.pinfo.en_s[i][a][3*r+w]=s*m,l.pinfo.xfsf_s[i][a][3*r+w]=s*f[_]*d[_]/g,0<n.en.s[r][w]?m/=n.en.s[r][w]:m=0,(e.ATHonly||e.ATHshort)&&(m=0),l.pinfo.thr_s[i][a][3*r+w]=s*Math.max(m*n.thm.s[r][w],l.ATH.s[r]),l.pinfo.LAMEsfb_s[i][a][3*r+w]=-2*t.subblock_gain[w],r<qe.SBPSY_s&&(l.pinfo.LAMEsfb_s[i][a][3*r+w]-=u*c[_]),_++}l.pinfo.LAMEqss[i][a]=t.global_gain,l.pinfo.LAMEmainbits[i][a]=t.part2_3_length+t.part2_length,l.pinfo.LAMEsfbits[i][a]=t.part2_length,l.pinfo.over[i][a]=h.over_count,l.pinfo.max_noise[i][a]=10*h.max_noise,l.pinfo.over_noise[i][a]=10*h.over_noise,l.pinfo.tot_noise[i][a]=10*h.tot_noise,l.pinfo.over_SSD[i][a]=h.over_SSD}}function E(){this.global_gain=0,this.sfb_count1=0,this.step=Pe(39),this.noise=Te(39),this.noise_log=Te(39)}function T(){function n(e){return new Int32Array(e)}this.xr=Te(576),this.l3_enc=Pe(576),this.scalefac=Pe(K.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=Pe(3),this.subblock_gain=Pe(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=Pe(K.SFBMAX),this.window=Pe(K.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=Pe(4),this.max_nonzero_coeff=0;var i=this;this.assign=function(e){var t;i.xr=(t=e.xr,new Float32Array(t)),i.l3_enc=n(e.l3_enc),i.scalefac=n(e.scalefac),i.xrpow_max=e.xrpow_max,i.part2_3_length=e.part2_3_length,i.big_values=e.big_values,i.count1=e.count1,i.global_gain=e.global_gain,i.scalefac_compress=e.scalefac_compress,i.block_type=e.block_type,i.mixed_block_flag=e.mixed_block_flag,i.table_select=n(e.table_select),i.subblock_gain=n(e.subblock_gain),i.region0_count=e.region0_count,i.region1_count=e.region1_count,i.preflag=e.preflag,i.scalefac_scale=e.scalefac_scale,i.count1table_select=e.count1table_select,i.part2_length=e.part2_length,i.sfb_lmax=e.sfb_lmax,i.sfb_smin=e.sfb_smin,i.psy_lmax=e.psy_lmax,i.sfbmax=e.sfbmax,i.psymax=e.psymax,i.sfbdivide=e.sfbdivide,i.width=n(e.width),i.window=n(e.window),i.count1bits=e.count1bits,i.sfb_partition_table=e.sfb_partition_table.slice(0),i.slen=n(e.slen),i.max_nonzero_coeff=e.max_nonzero_coeff}}function C(){function y(e){this.ordinal=e}function o(e){for(var t=0;t<e.sfbmax;t++)if(e.scalefac[t]+e.subblock_gain[e.window[t]]==0)return!1;return!0}function M(e,t){for(var n,i=1e-37,a=0;a<t.psymax;a++)i+=(n=e[a],De.FAST_LOG10(.368+.632*n*n*n));return Math.max(1e-20,i)}function S(e,t,n,i,a){var r=e.internal_flags;!function(e,t,n,i,a){for(var r=e.internal_flags,o=0==t.scalefac_scale?1.2968395546510096:1.6817928305074292,s=0,l=0;l<t.sfbmax;l++)s<n[l]&&(s=n[l]);switch(3==(e=r.noise_shaping_amp)&&(e=a?2:1),e){case 2:break;case 1:1<s?s=Math.pow(s,.5):s*=.95;break;case 0:default:1<s?s=1:s*=.95}for(var u=0,l=0;l<t.sfbmax;l++){var c,f=t.width[l];if(u+=f,!(n[l]<s)){if(0!=(2&r.substep_shaping)&&(r.pseudohalf[l]=0==r.pseudohalf[l]?1:0,0==r.pseudohalf[l]&&2==r.noise_shaping_amp))return;for(t.scalefac[l]++,c=-f;c<0;c++)i[u+c]*=o,i[u+c]>t.xrpow_max&&(t.xrpow_max=i[u+c]);if(2==r.noise_shaping_amp)return}}}(e,t,n,i,a);a=o(t);return!a&&(!(a=2==r.mode_gr?k.scale_bitcount(t):k.scale_bitcount_lsf(r,t))||(1<r.noise_shaping&&(ze.fill(r.pseudohalf,0),0==t.scalefac_scale?(function(e,t){for(var n=0,i=0;i<e.sfbmax;i++){var a=e.width[i],r=e.scalefac[i];if(0!=e.preflag&&(r+=x.pretab[i]),n+=a,0!=(1&r)){r++;for(var o=-a;o<0;o++)t[n+o]*=1.2968395546510096,t[n+o]>e.xrpow_max&&(e.xrpow_max=t[n+o])}e.scalefac[i]=r>>1}e.preflag=0,e.scalefac_scale=1}(t,i),a=!1):t.block_type==qe.SHORT_TYPE&&0<r.subblock_gain&&(a=function(e,t,n){var i=t.scalefac;for(l=0;l<t.sfb_lmax;l++)if(16<=i[l])return!0;for(var a=0;a<3;a++){var r=0,o=0;for(l=t.sfb_lmax+a;l<t.sfbdivide;l+=3)r<i[l]&&(r=i[l]);for(;l<t.sfbmax;l+=3)o<i[l]&&(o=i[l]);if(!(r<16&&o<8)){if(7<=t.subblock_gain[a])return!0;t.subblock_gain[a]++;for(var s=e.scalefac_band.l[t.sfb_lmax],l=t.sfb_lmax+a;l<t.sfbmax;l+=3){var u=t.width[l],c=i[l];if(0<=(c-=4>>t.scalefac_scale))i[l]=c,s+=3*u;else{i[l]=0;c=210+(c<<t.scalefac_scale+1);d=x.IPOW20(c),s+=u*(a+1);for(var f=-u;f<0;f++)n[s+f]*=d,n[s+f]>t.xrpow_max&&(t.xrpow_max=n[s+f]);s+=u*(3-a-1)}}var d=x.IPOW20(202);s+=t.width[l]*(a+1);for(f=-t.width[l];f<0;f++)n[s+f]*=d,n[s+f]>t.xrpow_max&&(t.xrpow_max=n[s+f])}}return!1}(r,t,i)||o(t))),!(a=a||(2==r.mode_gr?k.scale_bitcount(t):k.scale_bitcount_lsf(r,t)))))}var g,b;this.rv=null,this.qupvt=null;var x,k,a=new t;this.setModules=function(e,t,n,i){g=e,b=t,this.rv=t,x=n,this.qupvt=n,k=i,a.setModules(x,k)},this.ms_convert=function(e,t){for(var n=0;n<576;++n){var i=e.tt[t][0].xr[n],a=e.tt[t][1].xr[n];e.tt[t][0].xr[n]=(i+a)*(.5*De.SQRT2),e.tt[t][1].xr[n]=(i-a)*(.5*De.SQRT2)}},this.init_xrpow=function(e,t,n){var i=0|t.max_nonzero_coeff;if(t.xrpow_max=0,ze.fill(n,i,576,0),1e-20<function(e,t,n,i){for(var a=i=0;a<=n;++a){var r=Math.abs(e.xr[a]);i+=r,t[a]=Math.sqrt(r*Math.sqrt(r)),t[a]>e.xrpow_max&&(e.xrpow_max=t[a])}return i}(t,n,i,0)){var a=0;0!=(2&e.substep_shaping)&&(a=1);for(var r=0;r<t.psymax;r++)e.pseudohalf[r]=a;return!0}return ze.fill(t.l3_enc,0,576,0),!1},this.init_outer_loop=function(e,f){f.part2_3_length=0,f.big_values=0,f.count1=0,f.global_gain=210,f.scalefac_compress=0,f.table_select[0]=0,f.table_select[1]=0,f.table_select[2]=0,f.subblock_gain[0]=0,f.subblock_gain[1]=0,f.subblock_gain[2]=0,f.subblock_gain[3]=0,f.region0_count=0,f.region1_count=0,f.preflag=0,f.scalefac_scale=0,f.count1table_select=0,f.part2_length=0,f.sfb_lmax=qe.SBPSY_l,f.sfb_smin=qe.SBPSY_s,f.psy_lmax=e.sfb21_extra?qe.SBMAX_l:qe.SBPSY_l,f.psymax=f.psy_lmax,f.sfbmax=f.sfb_lmax,f.sfbdivide=11;for(var t=0;t<qe.SBMAX_l;t++)f.width[t]=e.scalefac_band.l[t+1]-e.scalefac_band.l[t],f.window[t]=3;if(f.block_type==qe.SHORT_TYPE){var n=Te(576);f.sfb_smin=0,(f.sfb_lmax=0)!=f.mixed_block_flag&&(f.sfb_smin=3,f.sfb_lmax=2*e.mode_gr+4),f.psymax=f.sfb_lmax+3*((e.sfb21_extra?qe.SBMAX_s:qe.SBPSY_s)-f.sfb_smin),f.sfbmax=f.sfb_lmax+3*(qe.SBPSY_s-f.sfb_smin),f.sfbdivide=f.sfbmax-18,f.psy_lmax=f.sfb_lmax;var i=e.scalefac_band.l[f.sfb_lmax];$.arraycopy(f.xr,0,n,0,576);for(t=f.sfb_smin;t<qe.SBMAX_s;t++)for(var a=e.scalefac_band.s[t],r=e.scalefac_band.s[t+1],o=0;o<3;o++)for(var s=a;s<r;s++)f.xr[i++]=n[3*s+o];for(var l=f.sfb_lmax,t=f.sfb_smin;t<qe.SBMAX_s;t++)f.width[l]=f.width[l+1]=f.width[l+2]=e.scalefac_band.s[t+1]-e.scalefac_band.s[t],f.window[l]=0,f.window[l+1]=1,f.window[l+2]=2,l+=3}f.count1bits=0,f.sfb_partition_table=x.nr_of_sfb_block[0][0],f.slen[0]=0,f.slen[1]=0,f.slen[2]=0,f.slen[3]=0,f.max_nonzero_coeff=575,ze.fill(f.scalefac,0),function(e){var t=e.ATH,n=f.xr;if(f.block_type!=qe.SHORT_TYPE)for(var i=!1,a=qe.PSFB21-1;0<=a&&!i;a--){var r=e.scalefac_band.psfb21[a],o=e.scalefac_band.psfb21[a+1],s=x.athAdjust(t.adjust,t.psfb21[a],t.floor);1e-12<e.nsPsy.longfact[21]&&(s*=e.nsPsy.longfact[21]);for(var l=o-1;r<=l;l--){if(!(Math.abs(n[l])<s)){i=!0;break}n[l]=0}}else for(var u=0;u<3;u++)for(i=!1,a=qe.PSFB12-1;0<=a&&!i;a--){var o=(r=3*e.scalefac_band.s[12]+(e.scalefac_band.s[13]-e.scalefac_band.s[12])*u+(e.scalefac_band.psfb12[a]-e.scalefac_band.psfb12[0]))+(e.scalefac_band.psfb12[a+1]-e.scalefac_band.psfb12[a]),c=x.athAdjust(t.adjust,t.psfb12[a],t.floor);1e-12<e.nsPsy.shortfact[12]&&(c*=e.nsPsy.shortfact[12]);for(l=o-1;r<=l;l--){if(!(Math.abs(n[l])<c)){i=!0;break}n[l]=0}}}(e)},y.BINSEARCH_NONE=new y(0),y.BINSEARCH_UP=new y(1),y.BINSEARCH_DOWN=new y(2),this.trancate_smallspectrums=function(e,t,n,i){var a=Te(K.SFBMAX);if((0!=(4&e.substep_shaping)||t.block_type!=qe.SHORT_TYPE)&&0==(128&e.substep_shaping)){x.calc_noise(t,n,a,new B,null);for(var r=0;r<576;r++){var o=0;0!=t.l3_enc[r]&&(o=Math.abs(t.xr[r])),i[r]=o}var r=0,s=8;t.block_type==qe.SHORT_TYPE&&(s=6);do{var l,u,c,f=t.width[s];if(r+=f,!(1<=a[s]||(ze.sort(i,r-f,f),F.EQ(i[r-1],0)))){l=(1-a[s])*n[s],c=u=0;do{for(var d,h=1;c+h<f&&!F.NEQ(i[c+r-f],i[c+r+h-f]);h++);if(l<(d=i[c+r-f]*i[c+r-f]*h)){0!=c&&(u=i[c+r-f-1]);break}}while(l-=d,(c+=h)<f);if(!F.EQ(u,0))for(;Math.abs(t.xr[r-f])<=u&&(t.l3_enc[r-f]=0),0<--f;);}}while(++s<t.psymax);t.part2_3_length=k.noquant_count_bits(e,t,null)}},this.outer_loop=function(e,t,n,i,a,r){var o=e.internal_flags,s=new T,l=Te(576),u=Te(K.SFBMAX),c=new B,f=new E,d=9999999,h=!1,p=!1,_=0;if(function(e,t,n,i,a){var r=e.CurrentStep[i],o=!1,s=e.OldValue[i],l=y.BINSEARCH_NONE;for(t.global_gain=s,n-=t.part2_length;;){var u,c=k.count_bits(e,a,t,null);if(1==r||c==n)break;u=n<c?(l==y.BINSEARCH_DOWN&&(o=!0),o&&(r/=2),l=y.BINSEARCH_UP,r):(l==y.BINSEARCH_UP&&(o=!0),o&&(r/=2),l=y.BINSEARCH_DOWN,-r),t.global_gain+=u,t.global_gain<0&&(o=!(t.global_gain=0)),255<t.global_gain&&(t.global_gain=255,o=!0)}for(;n<c&&t.global_gain<255;)t.global_gain++,c=k.count_bits(e,a,t,null);e.CurrentStep[i]=4<=s-t.global_gain?4:2,e.OldValue[i]=t.global_gain,t.part2_3_length=c}(o,t,r,a,i),0==o.noise_shaping)return 100;x.calc_noise(t,n,u,c,f),c.bits=t.part2_3_length,s.assign(t);var v=0;for($.arraycopy(i,0,l,0,576);!h;){do{var g=new B,m=255,b=0!=(2&o.substep_shaping)?20:3;if(o.sfb21_extra){if(1<u[s.sfbmax])break;if(s.block_type==qe.SHORT_TYPE&&(1<u[s.sfbmax+1]||1<u[s.sfbmax+2]))break}if(!S(e,s,u,i,p))break;0!=s.scalefac_scale&&(m=254);var w=r-s.part2_length;if(w<=0)break;for(;(s.part2_3_length=k.count_bits(o,i,s,f))>w&&s.global_gain<=m;)s.global_gain++;if(s.global_gain>m)break;if(0==c.over_count){for(;(s.part2_3_length=k.count_bits(o,i,s,f))>d&&s.global_gain<=m;)s.global_gain++;if(s.global_gain>m)break}if(x.calc_noise(s,n,u,g,f),g.bits=s.part2_3_length,0!=(function(e,t,n,i,a){var r;switch(e){default:case 9:0<t.over_count?(r=n.over_SSD<=t.over_SSD,n.over_SSD==t.over_SSD&&(r=n.bits<t.bits)):r=n.max_noise<0&&10*n.max_noise+n.bits<=10*t.max_noise+t.bits;break;case 0:r=n.over_count<t.over_count||n.over_count==t.over_count&&n.over_noise<t.over_noise||n.over_count==t.over_count&&F.EQ(n.over_noise,t.over_noise)&&n.tot_noise<t.tot_noise;break;case 8:n.max_noise=M(a,i);case 1:r=n.max_noise<t.max_noise;break;case 2:r=n.tot_noise<t.tot_noise;break;case 3:r=n.tot_noise<t.tot_noise&&n.max_noise<t.max_noise;break;case 4:r=n.max_noise<=0&&.2<t.max_noise||n.max_noise<=0&&t.max_noise<0&&t.max_noise>n.max_noise-.2&&n.tot_noise<t.tot_noise||n.max_noise<=0&&0<t.max_noise&&t.max_noise>n.max_noise-.2&&n.tot_noise<t.tot_noise+t.over_noise||0<n.max_noise&&-.05<t.max_noise&&t.max_noise>n.max_noise-.1&&n.tot_noise+n.over_noise<t.tot_noise+t.over_noise||0<n.max_noise&&-.1<t.max_noise&&t.max_noise>n.max_noise-.15&&n.tot_noise+n.over_noise+n.over_noise<t.tot_noise+t.over_noise+t.over_noise;break;case 5:r=n.over_noise<t.over_noise||F.EQ(n.over_noise,t.over_noise)&&n.tot_noise<t.tot_noise;break;case 6:r=n.over_noise<t.over_noise||F.EQ(n.over_noise,t.over_noise)&&(n.max_noise<t.max_noise||F.EQ(n.max_noise,t.max_noise)&&n.tot_noise<=t.tot_noise);break;case 7:r=n.over_count<t.over_count||n.over_noise<t.over_noise}return 0==t.over_count&&(r=r&&n.bits<t.bits),r}(t.block_type!=qe.SHORT_TYPE?e.quant_comp:e.quant_comp_short,c,g,s,u)?1:0))d=t.part2_3_length,c=g,t.assign(s),v=0,$.arraycopy(i,0,l,0,576);else if(0==o.full_outer_loop){if(++v>b&&0==c.over_count)break;if(3==o.noise_shaping_amp&&p&&30<v)break;if(3==o.noise_shaping_amp&&p&&15<s.global_gain-_)break}}while(s.global_gain+s.scalefac_scale<255);3!=o.noise_shaping_amp||p?h=!0:(s.assign(t),$.arraycopy(l,0,i,0,576),v=0,_=s.global_gain,p=!0)}return e.VBR==Oe.vbr_rh||e.VBR==Oe.vbr_mtrh?$.arraycopy(l,0,i,0,576):0!=(1&o.substep_shaping)&&trancate_smallspectrums(o,t,n,i),c.over_count},this.iteration_finish_one=function(e,t,n){var i=e.l3_side,a=i.tt[t][n];k.best_scalefac_store(e,t,n,i),1==e.use_best_huffman&&k.best_huffman_divide(e,a),b.ResvAdjust(e,a)},this.VBR_encode_granule=function(e,t,n,i,a,r,o){var s,l,u,c=e.internal_flags,f=new T,d=Te(576),h=o,p=(o+r)/2,_=0,v=c.sfb21_extra;for(ze.fill(f.l3_enc,0);c.sfb21_extra=!(h-42<p)&&v,l=outer_loop(e,t,n,i,a,p),l<=0?(_=1,u=t.part2_3_length,f.assign(t),$.arraycopy(i,0,d,0,576),o=u-32,s=o-r,p=(o+r)/2):(r=p+32,s=o-r,p=(o+r)/2,0!=_&&(_=2,t.assign(f),$.arraycopy(d,0,i,0,576))),12<s;);c.sfb21_extra=v,2==_&&$.arraycopy(f.l3_enc,0,t.l3_enc,0,576)},this.get_framebits=function(e,t){var n=e.internal_flags;n.bitrate_index=n.VBR_min_bitrate;var i=g.getframebits(e);n.bitrate_index=1,i=g.getframebits(e);for(var a=1;a<=n.VBR_max_bitrate;a++){n.bitrate_index=a;var r=new R(i);t[a]=b.ResvFrameBegin(e,r),i=r.bits}},this.VBR_old_prepare=function(e,t,n,i,a,r,o,s,l){var u=e.internal_flags,c=0,f=1,d=0;u.bitrate_index=u.VBR_max_bitrate;var h=b.ResvFrameBegin(e,new R(0))/u.mode_gr;get_framebits(e,r);for(var p=0;p<u.mode_gr;p++){var _=x.on_pe(e,t,s[p],h,p,0);u.mode_ext==qe.MPG_MD_MS_LR&&(ms_convert(u.l3_side,p),x.reduce_side(s[p],n[p],h,_));for(var v=0;v<u.channels_out;++v){var g=u.l3_side.tt[p][v],m=g.block_type!=qe.SHORT_TYPE?(c=1.28/(1+Math.exp(3.5-t[p][v]/300))-.05,u.PSY.mask_adjust-c):(c=2.56/(1+Math.exp(3.5-t[p][v]/300))-.14,u.PSY.mask_adjust_short-c);u.masking_lower=Math.pow(10,.1*m),init_outer_loop(u,g),l[p][v]=x.calc_xmin(e,i[p][v],g,a[p][v]),0!=l[p][v]&&(f=0),o[p][v]=126,d+=s[p][v]}}for(p=0;p<u.mode_gr;p++)for(v=0;v<u.channels_out;v++)d>r[u.VBR_max_bitrate]&&(s[p][v]*=r[u.VBR_max_bitrate],s[p][v]/=d),o[p][v]>s[p][v]&&(o[p][v]=s[p][v]);return f},this.bitpressure_strategy=function(e,t,n,i){for(var a=0;a<e.mode_gr;a++)for(var r=0;r<e.channels_out;r++){for(var o=e.l3_side.tt[a][r],s=t[a][r],l=0,u=0;u<o.psy_lmax;u++)s[l++]*=1+.029*u*u/qe.SBMAX_l/qe.SBMAX_l;if(o.block_type==qe.SHORT_TYPE)for(u=o.sfb_smin;u<qe.SBMAX_s;u++)s[l++]*=1+.029*u*u/qe.SBMAX_s/qe.SBMAX_s,s[l++]*=1+.029*u*u/qe.SBMAX_s/qe.SBMAX_s,s[l++]*=1+.029*u*u/qe.SBMAX_s/qe.SBMAX_s;i[a][r]=0|Math.max(n[a][r],.9*i[a][r])}},this.VBR_new_prepare=function(e,t,n,i,a,r){var o,s,l=e.internal_flags,u=1,c=0,f=0;e.free_format?(l.bitrate_index=0,s=new R(c),o=b.ResvFrameBegin(e,s),c=s.bits,a[0]=o):(l.bitrate_index=l.VBR_max_bitrate,s=new R(c),b.ResvFrameBegin(e,s),c=s.bits,get_framebits(e,a),o=a[l.VBR_max_bitrate]);for(var d=0;d<l.mode_gr;d++){x.on_pe(e,t,r[d],c,d,0),l.mode_ext==qe.MPG_MD_MS_LR&&ms_convert(l.l3_side,d);for(var h=0;h<l.channels_out;++h){var p=l.l3_side.tt[d][h];l.masking_lower=Math.pow(10,.1*l.PSY.mask_adjust),init_outer_loop(l,p),0!=x.calc_xmin(e,n[d][h],p,i[d][h])&&(u=0),f+=r[d][h]}}for(d=0;d<l.mode_gr;d++)for(h=0;h<l.channels_out;h++)o<f&&(r[d][h]*=o,r[d][h]/=f);return u},this.calc_target_bits=function(e,t,n,i,a,r){var o,s,l,u=e.internal_flags,c=u.l3_side,f=0;u.bitrate_index=u.VBR_max_bitrate;var d=new R(f);for(r[0]=b.ResvFrameBegin(e,d),f=d.bits,u.bitrate_index=1,f=g.getframebits(e)-8*u.sideinfo_len,a[0]=f/(u.mode_gr*u.channels_out),f=e.VBR_mean_bitrate_kbps*e.framesize*1e3,0!=(1&u.substep_shaping)&&(f*=1.09),f/=e.out_samplerate,f-=8*u.sideinfo_len,f/=u.mode_gr*u.channels_out,(o=.93+.07*(11-e.compression_ratio)/5.5)<.9&&(o=.9),1<o&&(o=1),s=0;s<u.mode_gr;s++){for(var h,p,_=0,v=0;v<u.channels_out;v++)i[s][v]=int(o*f),700<t[s][v]&&(h=int((t[s][v]-700)/1.4),p=c.tt[s][v],i[s][v]=int(o*f),p.block_type==qe.SHORT_TYPE&&h<f/2&&(h=f/2),3*f/2<h?h=3*f/2:h<0&&(h=0),i[s][v]+=h),i[s][v]>W.MAX_BITS_PER_CHANNEL&&(i[s][v]=W.MAX_BITS_PER_CHANNEL),_+=i[s][v];if(W.MAX_BITS_PER_GRANULE<_)for(v=0;v<u.channels_out;++v)i[s][v]*=W.MAX_BITS_PER_GRANULE,i[s][v]/=_}if(u.mode_ext==qe.MPG_MD_MS_LR)for(s=0;s<u.mode_gr;s++)x.reduce_side(i[s],n[s],f*u.channels_out,W.MAX_BITS_PER_GRANULE);for(s=l=0;s<u.mode_gr;s++)for(v=0;v<u.channels_out;v++)i[s][v]>W.MAX_BITS_PER_CHANNEL&&(i[s][v]=W.MAX_BITS_PER_CHANNEL),l+=i[s][v];if(l>r[0])for(s=0;s<u.mode_gr;s++)for(v=0;v<u.channels_out;v++)i[s][v]*=r[0],i[s][v]/=l}}function n(){function z(e,t,n){for(var i,a,r=10,o=t+238-14-286,s=-15;s<0;s++){var l,u,c=f[r+-10];l=e[o+-224]*c,u=e[t+224]*c,c=f[r+-9],l+=e[o+-160]*c,u+=e[t+160]*c,c=f[r+-8],l+=e[o+-96]*c,u+=e[t+96]*c,c=f[r+-7],l+=e[o+-32]*c,u+=e[t+32]*c,c=f[r+-6],l+=e[o+32]*c,u+=e[t+-32]*c,c=f[r+-5],l+=e[o+96]*c,u+=e[t+-96]*c,c=f[r+-4],l+=e[o+160]*c,u+=e[t+-160]*c,c=f[r+-3],l+=e[o+224]*c,u+=e[t+-224]*c,c=f[r+-2],l+=e[t+-256]*c,u-=e[o+256]*c,c=f[r+-1],l+=e[t+-192]*c,u-=e[o+192]*c,c=f[r+0],l+=e[t+-128]*c,u-=e[o+128]*c,c=f[r+1],l+=e[t+-64]*c,u-=e[o+64]*c,c=f[r+2],l+=e[t+0]*c,u-=e[o+0]*c,c=f[r+3],l+=e[t+64]*c,u-=e[o+-64]*c,c=f[r+4],l+=e[t+128]*c,u-=e[o+-128]*c,c=f[r+5],l+=e[t+192]*c,c=(u-=e[o+-192]*c)-(l*=f[r+6]),n[30+2*s]=u+l,n[31+2*s]=f[r+7]*c,r+=18,t--,o++}u=e[t+-16]*f[r+-10],l=e[t+-32]*f[r+-2],u+=(e[t+-48]-e[t+16])*f[r+-9],l+=e[t+-96]*f[r+-1],u+=(e[t+-80]+e[t+48])*f[r+-8],l+=e[t+-160]*f[r+0],u+=(e[t+-112]-e[t+80])*f[r+-7],l+=e[t+-224]*f[r+1],u+=(e[t+-144]+e[t+112])*f[r+-6],l-=e[t+32]*f[r+2],u+=(e[t+-176]-e[t+144])*f[r+-5],l-=e[t+96]*f[r+3],u+=(e[t+-208]+e[t+176])*f[r+-4],l-=e[t+160]*f[r+4],u+=(e[t+-240]-e[t+208])*f[r+-3],i=(l-=e[t+224])-u,a=l+u,u=n[14],l=n[15]-u,n[31]=a+u,n[30]=i+l,n[15]=i-l,n[14]=a-u,a=n[28]-n[0],n[0]+=n[28],n[28]=a*f[r+-36+7],a=n[29]-n[1],n[1]+=n[29],n[29]=a*f[r+-36+7],a=n[26]-n[2],n[2]+=n[26],n[26]=a*f[r+-72+7],a=n[27]-n[3],n[3]+=n[27],n[27]=a*f[r+-72+7],a=n[24]-n[4],n[4]+=n[24],n[24]=a*f[r+-108+7],a=n[25]-n[5],n[5]+=n[25],n[25]=a*f[r+-108+7],a=n[22]-n[6],n[6]+=n[22],n[22]=a*De.SQRT2,a=n[23]-n[7],n[7]+=n[23],n[23]=a*De.SQRT2-n[7],n[7]-=n[6],n[22]-=n[7],n[23]-=n[22],a=n[6],n[6]=n[31]-a,n[31]=n[31]+a,a=n[7],n[7]=n[30]-a,n[30]=n[30]+a,a=n[22],n[22]=n[15]-a,n[15]=n[15]+a,a=n[23],n[23]=n[14]-a,n[14]=n[14]+a,a=n[20]-n[8],n[8]+=n[20],n[20]=a*f[r+-180+7],a=n[21]-n[9],n[9]+=n[21],n[21]=a*f[r+-180+7],a=n[18]-n[10],n[10]+=n[18],n[18]=a*f[r+-216+7],a=n[19]-n[11],n[11]+=n[19],n[19]=a*f[r+-216+7],a=n[16]-n[12],n[12]+=n[16],n[16]=a*f[r+-252+7],a=n[17]-n[13],n[13]+=n[17],n[17]=a*f[r+-252+7],a=-n[20]+n[24],n[20]+=n[24],n[24]=a*f[r+-216+7],a=-n[21]+n[25],n[21]+=n[25],n[25]=a*f[r+-216+7],a=n[4]-n[8],n[4]+=n[8],n[8]=a*f[r+-216+7],a=n[5]-n[9],n[5]+=n[9],n[9]=a*f[r+-216+7],a=n[0]-n[12],n[0]+=n[12],n[12]=a*f[r+-72+7],a=n[1]-n[13],n[1]+=n[13],n[13]=a*f[r+-72+7],a=n[16]-n[28],n[16]+=n[28],n[28]=a*f[r+-72+7],a=-n[17]+n[29],n[17]+=n[29],n[29]=a*f[r+-72+7],a=De.SQRT2*(n[2]-n[10]),n[2]+=n[10],n[10]=a,a=De.SQRT2*(n[3]-n[11]),n[3]+=n[11],n[11]=a,a=De.SQRT2*(-n[18]+n[26]),n[18]+=n[26],n[26]=a-n[18],a=De.SQRT2*(-n[19]+n[27]),n[19]+=n[27],n[27]=a-n[19],a=n[2],n[19]-=n[3],n[3]-=a,n[2]=n[31]-a,n[31]+=a,a=n[3],n[11]-=n[19],n[18]-=a,n[3]=n[30]-a,n[30]+=a,a=n[18],n[27]-=n[11],n[19]-=a,n[18]=n[15]-a,n[15]+=a,a=n[19],n[10]-=a,n[19]=n[14]-a,n[14]+=a,a=n[10],n[11]-=a,n[10]=n[23]-a,n[23]+=a,a=n[11],n[26]-=a,n[11]=n[22]-a,n[22]+=a,a=n[26],n[27]-=a,n[26]=n[7]-a,n[7]+=a,a=n[27],n[27]=n[6]-a,n[6]+=a,a=De.SQRT2*(n[0]-n[4]),n[0]+=n[4],n[4]=a,a=De.SQRT2*(n[1]-n[5]),n[1]+=n[5],n[5]=a,a=De.SQRT2*(n[16]-n[20]),n[16]+=n[20],n[20]=a,a=De.SQRT2*(n[17]-n[21]),n[17]+=n[21],n[21]=a,a=-De.SQRT2*(n[8]-n[12]),n[8]+=n[12],n[12]=a-n[8],a=-De.SQRT2*(n[9]-n[13]),n[9]+=n[13],n[13]=a-n[9],a=-De.SQRT2*(n[25]-n[29]),n[25]+=n[29],n[29]=a-n[25],a=-De.SQRT2*(n[24]+n[28]),n[24]-=n[28],n[28]=a-n[24],a=n[24]-n[16],n[24]=a,a=n[20]-a,n[20]=a,a=n[28]-a,n[28]=a,a=n[25]-n[17],n[25]=a,a=n[21]-a,n[21]=a,a=n[29]-a,n[29]=a,a=n[17]-n[1],n[17]=a,a=n[9]-a,n[9]=a,a=n[25]-a,n[25]=a,a=n[5]-a,n[5]=a,a=n[21]-a,n[21]=a,a=n[13]-a,n[13]=a,a=n[29]-a,n[29]=a,a=n[1]-n[0],n[1]=a,a=n[16]-a,n[16]=a,a=n[17]-a,n[17]=a,a=n[8]-a,n[8]=a,a=n[9]-a,n[9]=a,a=n[24]-a,n[24]=a,a=n[25]-a,n[25]=a,a=n[4]-a,n[4]=a,a=n[5]-a,n[5]=a,a=n[20]-a,n[20]=a,a=n[21]-a,n[21]=a,a=n[12]-a,n[12]=a,a=n[13]-a,n[13]=a,a=n[28]-a,n[28]=a,a=n[29]-a,n[29]=a,a=n[0],n[0]+=n[31],n[31]-=a,a=n[1],n[1]+=n[30],n[30]-=a,a=n[16],n[16]+=n[15],n[15]-=a,a=n[17],n[17]+=n[14],n[14]-=a,a=n[8],n[8]+=n[23],n[23]-=a,a=n[9],n[9]+=n[22],n[22]-=a,a=n[24],n[24]+=n[7],n[7]-=a,a=n[25],n[25]+=n[6],n[6]-=a,a=n[4],n[4]+=n[27],n[27]-=a,a=n[5],n[5]+=n[26],n[26]-=a,a=n[20],n[20]+=n[11],n[11]-=a,a=n[21],n[21]+=n[10],n[10]-=a,a=n[12],n[12]+=n[19],n[19]-=a,a=n[13],n[13]+=n[18],n[18]-=a,a=n[28],n[28]+=n[3],n[3]-=a,a=n[29],n[29]+=n[2],n[2]-=a}var f=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*De.SQRT2*.5/2384e-9,.017876148*De.SQRT2*.5/2384e-9,.003134727*De.SQRT2*.5/2384e-9,.002457142*De.SQRT2*.5/2384e-9,971317e-9*De.SQRT2*.5/2384e-9,218868e-9*De.SQRT2*.5/2384e-9,101566e-9*De.SQRT2*.5/2384e-9,13828e-9*De.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,49591e-9/2384e-9,1995.1556208053692,21458e-9/2384e-9,-69618e-9/2384e-9],D=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],H=D[qe.SHORT_TYPE],F=D[qe.SHORT_TYPE],L=D[qe.SHORT_TYPE],N=D[qe.SHORT_TYPE],Q=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];this.mdct_sub48=function(e,t,n){for(var i,a,r,o,s,l,u,c,f,d,h,p,_,v=t,g=286,m=0;m<e.channels_out;m++){for(var b=0;b<e.mode_gr;b++){for(var w,y=e.l3_side.tt[b][m],M=y.xr,S=0,x=e.sb_sample[m][1-b],k=0,A=0;A<9;A++)for(z(v,g,x[k]),z(v,g+32,x[k+1]),k+=2,g+=64,w=1;w<32;w+=2)x[k-1][w]*=-1;for(w=0;w<32;w++,S+=18){var R=y.block_type,E=e.sb_sample[m][b],B=e.sb_sample[m][1-b];if(0!=y.mixed_block_flag&&w<2&&(R=0),e.amp_filter[w]<1e-12)ze.fill(M,S+0,S+18,0);else{if(e.amp_filter[w]<1)for(A=0;A<18;A++)B[A][Q[w]]*=e.amp_filter[w];if(R==qe.SHORT_TYPE){for(A=-3;A<0;A++){var P=D[qe.SHORT_TYPE][A+3];M[S+3*A+9]=E[9+A][Q[w]]*P-E[8-A][Q[w]],M[S+3*A+18]=E[14-A][Q[w]]*P+E[15+A][Q[w]],M[S+3*A+10]=E[15+A][Q[w]]*P-E[14-A][Q[w]],M[S+3*A+19]=B[2-A][Q[w]]*P+B[3+A][Q[w]],M[S+3*A+11]=B[3+A][Q[w]]*P-B[2-A][Q[w]],M[S+3*A+20]=B[8-A][Q[w]]*P+B[9+A][Q[w]]}!function(e,t){for(var n=0;n<3;n++){var i=e[t+6]*D[qe.SHORT_TYPE][0]-e[t+15],a=e[t+0]*D[qe.SHORT_TYPE][2]-e[t+9],r=i+a,o=i-a,s=(i=e[t+15]*D[qe.SHORT_TYPE][0]+e[t+6])+(a=e[t+9]*D[qe.SHORT_TYPE][2]+e[t+0]),l=-i+a;a=2069978111953089e-26*(e[t+3]*D[qe.SHORT_TYPE][1]-e[t+12]),i=2069978111953089e-26*(e[t+12]*D[qe.SHORT_TYPE][1]+e[t+3]),e[t+0]=190752519173728e-25*r+a,e[t+15]=190752519173728e-25*-s+i,o=.8660254037844387*o*1907525191737281e-26,s=.5*s*1907525191737281e-26+i,e[t+3]=o-s,e[t+6]=o+s,r=.5*r*1907525191737281e-26-a,l=.8660254037844387*l*1907525191737281e-26,e[t+9]=r+l,e[t+12]=r-l,t++}}(M,S)}else{for(var T=Te(18),A=-9;A<0;A++){var C=D[R][A+27]*B[A+9][Q[w]]+D[R][A+36]*B[8-A][Q[w]],I=D[R][A+9]*E[A+9][Q[w]]-D[R][A+18]*E[8-A][Q[w]];T[A+9]=C-I*H[3+A+9],T[A+18]=C*H[3+A+9]+I}i=M,a=S,_=p=h=d=f=c=u=l=s=o=void 0,u=(r=T)[17]-r[9],c=r[15]-r[11],f=r[14]-r[12],d=r[0]+r[8],h=r[1]+r[7],p=r[2]+r[6],_=r[3]+r[5],i[a+17]=d+p-_-(h-r[4]),s=(d+p-_)*F[19]+(h-r[4]),o=(u-c-f)*F[18],i[a+5]=o+s,i[a+6]=o-s,l=(r[16]-r[10])*F[18],h=h*F[19]+r[4],o=u*F[12]+l+c*F[13]+f*F[14],s=-d*F[16]+h-p*F[17]+_*F[15],i[a+1]=o+s,i[a+2]=o-s,o=u*F[13]-l-c*F[14]+f*F[12],s=-d*F[17]+h-p*F[15]+_*F[16],i[a+9]=o+s,i[a+10]=o-s,o=u*F[14]-l+c*F[12]-f*F[13],s=d*F[15]-h+p*F[16]-_*F[17],i[a+13]=o+s,i[a+14]=o-s,u=r[8]-r[0],l=r[6]-r[2],c=r[5]-r[3],f=r[17]+r[9],d=r[16]+r[10],h=r[15]+r[11],p=r[14]+r[12],i[a+0]=f+h+p+(d+r[13]),o=(f+h+p)*F[19]-(d+r[13]),s=(u-l+c)*F[18],i[a+11]=o+s,i[a+12]=o-s,_=(r[7]-r[1])*F[18],d=r[13]-d*F[19],o=f*F[15]-d+h*F[16]+p*F[17],s=u*F[14]+_+l*F[12]+c*F[13],i[a+3]=o+s,i[a+4]=o-s,o=-f*F[17]+d-h*F[15]-p*F[16],s=u*F[13]+_-l*F[14]-c*F[12],i[a+7]=o+s,i[a+8]=o-s,o=-f*F[16]+d-h*F[17]-p*F[15],s=u*F[12]-_+l*F[13]-c*F[14],i[a+15]=o+s,i[a+16]=o-s}}if(R!=qe.SHORT_TYPE&&0!=w)for(A=7;0<=A;--A){var O=M[S+A]*L[20+A]+M[S+-1-A]*N[28+A],V=M[S+A]*N[28+A]-M[S+-1-A]*L[20+A];M[S+-1-A]=O,M[S+A]=V}}}if(v=n,g=286,1==e.mode_gr)for(var q=0;q<18;q++)$.arraycopy(e.sb_sample[m][1][q],0,e.sb_sample[m][0][q],0,32)}}}function V(){this.thm=new l,this.en=new l}function qe(){var R=qe.FFTOFFSET,E=qe.MPG_MD_MS_LR,B=null,P=this.psy=null,T=null,C=null;this.setModules=function(e,t,n,i){B=e,this.psy=t,P=t,T=i,C=n};var I=new n;this.lame_encode_mp3_frame=function(e,t,n,i,a,r){var o=O([2,2]);o[0][0]=new V,o[0][1]=new V,o[1][0]=new V,o[1][1]=new V;var s=O([2,2]);s[0][0]=new V,s[0][1]=new V,s[1][0]=new V,s[1][1]=new V;var l,u,c,f=[null,null],d=e.internal_flags,h=Ce([2,4]),p=[.5,.5],_=[[0,0],[0,0]],v=[[0,0],[0,0]];if(f[0]=t,f[1]=n,0==d.lame_encode_frame_init&&function(e,t){var n,i,a=e.internal_flags;if(0==a.lame_encode_frame_init){var r,o,s=Te(2014),l=Te(2014);for(a.lame_encode_frame_init=1,o=r=0;r<286+576*(1+a.mode_gr);++r)r<576*a.mode_gr?(s[r]=0,2==a.channels_out&&(l[r]=0)):(s[r]=t[0][o],2==a.channels_out&&(l[r]=t[1][o]),++o);for(i=0;i<a.mode_gr;i++)for(n=0;n<a.channels_out;n++)a.l3_side.tt[i][n].block_type=qe.SHORT_TYPE;I.mdct_sub48(a,s,l)}}(e,f),d.padding=0,(d.slot_lag-=d.frac_SpF)<0&&(d.slot_lag+=e.out_samplerate,d.padding=1),0!=d.psymodel)for(var g=[null,null],m=0,b=Pe(2),w=0;w<d.mode_gr;w++){for(c=0;c<d.channels_out;c++)g[c]=f[c],m=576+576*w-qe.FFTOFFSET;if(0!=(e.VBR==Oe.vbr_mtrh||e.VBR==Oe.vbr_mt?P.L3psycho_anal_vbr(e,g,m,w,o,s,_[w],v[w],h[w],b):P.L3psycho_anal_ns(e,g,m,w,o,s,_[w],v[w],h[w],b)))return-4;for(e.mode==Ve.JOINT_STEREO&&(p[w]=h[w][2]+h[w][3],0<p[w]&&(p[w]=h[w][3]/p[w])),c=0;c<d.channels_out;c++){var y=d.l3_side.tt[w][c];y.block_type=b[c],y.mixed_block_flag=0}}else for(w=0;w<d.mode_gr;w++)for(c=0;c<d.channels_out;c++)d.l3_side.tt[w][c].block_type=qe.NORM_TYPE,d.l3_side.tt[w][c].mixed_block_flag=0,v[w][c]=_[w][c]=700;if(function(e){var t,n;if(0==e.ATH.useAdjust)return e.ATH.adjust=1;n=e.loudness_sq[0][0],t=e.loudness_sq[1][0],2==e.channels_out?(n+=e.loudness_sq[0][1],t+=e.loudness_sq[1][1]):(n+=n,t+=t),2==e.mode_gr&&(n=Math.max(n,t)),n*=.5,.03125<(n*=e.ATH.aaSensitivityP)?(1<=e.ATH.adjust?e.ATH.adjust=1:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=1):(n=31.98*n+625e-6,e.ATH.adjust>=n?(e.ATH.adjust*=.075*n+.925,e.ATH.adjust<n&&(e.ATH.adjust=n)):e.ATH.adjustLimit>=n?e.ATH.adjust=n:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=n)}(d),I.mdct_sub48(d,f[0],f[1]),d.mode_ext=qe.MPG_MD_LR_LR,e.force_ms)d.mode_ext=qe.MPG_MD_MS_LR;else if(e.mode==Ve.JOINT_STEREO){var M=0,S=0;for(w=0;w<d.mode_gr;w++)for(c=0;c<d.channels_out;c++)M+=v[w][c],S+=_[w][c];M<=+S&&(t=d.l3_side.tt[0],n=d.l3_side.tt[d.mode_gr-1],t[0].block_type==t[1].block_type&&n[0].block_type==n[1].block_type&&(d.mode_ext=qe.MPG_MD_MS_LR))}if(u=d.mode_ext==E?(l=s,v):(l=o,_),e.analysis&&null!=d.pinfo)for(w=0;w<d.mode_gr;w++)for(c=0;c<d.channels_out;c++)d.pinfo.ms_ratio[w]=d.ms_ratio[w],d.pinfo.ms_ener_ratio[w]=p[w],d.pinfo.blocktype[w][c]=d.l3_side.tt[w][c].block_type,d.pinfo.pe[w][c]=u[w][c],$.arraycopy(d.l3_side.tt[w][c].xr,0,d.pinfo.xr[w][c],0,576),d.mode_ext==E&&(d.pinfo.ers[w][c]=d.pinfo.ers[w][c+2],$.arraycopy(d.pinfo.energy[w][c+2],0,d.pinfo.energy[w][c],0,d.pinfo.energy[w][c].length));if(e.VBR==Oe.vbr_off||e.VBR==Oe.vbr_abr){for(var x,k=0;k<18;k++)d.nsPsy.pefirbuf[k]=d.nsPsy.pefirbuf[k+1];for(w=x=0;w<d.mode_gr;w++)for(c=0;c<d.channels_out;c++)x+=u[w][c];for(d.nsPsy.pefirbuf[18]=x,x=d.nsPsy.pefirbuf[9],k=0;k<9;k++)x+=(d.nsPsy.pefirbuf[k]+d.nsPsy.pefirbuf[18-k])*qe.fircoef[k];for(x=3350*d.mode_gr*d.channels_out/x,w=0;w<d.mode_gr;w++)for(c=0;c<d.channels_out;c++)u[w][c]*=x}if(d.iteration_loop.iteration_loop(e,u,p,l),B.format_bitstream(e),r=B.copy_buffer(d,i,a,r,1),e.bWriteVbrTag&&T.addVbrFrame(e),e.analysis&&null!=d.pinfo){for(c=0;c<d.channels_out;c++){for(var A=0;A<R;A++)d.pinfo.pcmdata[c][A]=d.pinfo.pcmdata[c][A+e.framesize];for(A=R;A<1600;A++)d.pinfo.pcmdata[c][A]=f[c][A-R]}C.set_frame_pinfo(e,l)}return function(e){var t,n;for(e.bitrate_stereoMode_Hist[e.bitrate_index][4]++,e.bitrate_stereoMode_Hist[15][4]++,2==e.channels_out&&(e.bitrate_stereoMode_Hist[e.bitrate_index][e.mode_ext]++,e.bitrate_stereoMode_Hist[15][e.mode_ext]++),t=0;t<e.mode_gr;++t)for(n=0;n<e.channels_out;++n){var i=0|e.l3_side.tt[t][n].block_type;0!=e.l3_side.tt[t][n].mixed_block_flag&&(i=4),e.bitrate_blockType_Hist[e.bitrate_index][i]++,e.bitrate_blockType_Hist[e.bitrate_index][5]++,e.bitrate_blockType_Hist[15][i]++,e.bitrate_blockType_Hist[15][5]++}}(d),r}}function i(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}function o(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[Pe(4),Pe(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new T}function s(){this.last_en_subshort=Ce([4,9]),this.lastAttacks=Pe(4),this.pefirbuf=Te(19),this.longfact=Te(qe.SBMAX_l),this.shortfact=Te(qe.SBMAX_s),this.attackthre=0,this.attackthre_s=0}function l(){this.l=Te(qe.SBMAX_l),this.s=Ce([qe.SBMAX_s,3]);var i=this;this.assign=function(e){$.arraycopy(e.l,0,i.l,0,qe.SBMAX_l);for(var t=0;t<qe.SBMAX_s;t++)for(var n=0;n<3;n++)i.s[t][n]=e.s[t][n]}}function W(){function e(){this.write_timing=0,this.ptr=0,this.buf=S(t)}var t=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Ce([2,W.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new o,this.ms_ratio=Te(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=Pe(2),this.CurrentStep=Pe(2),this.masking_lower=0,this.bv_scf=Pe(576),this.pseudohalf=Pe(K.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*W.BPC+1),this.itime=new Float64Array(2),this.sideinfo_len=0,this.sb_sample=Ce([2,2,18,qe.SBLIMIT]),this.amp_filter=Te(32),this.header=new Array(W.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new r,this.minval_l=Te(qe.CBANDS),this.minval_s=Te(qe.CBANDS),this.nb_1=Ce([4,qe.CBANDS]),this.nb_2=Ce([4,qe.CBANDS]),this.nb_s1=Ce([4,qe.CBANDS]),this.nb_s2=Ce([4,qe.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=Te(4),this.loudness_sq=Ce([2,2]),this.loudness_sq_save=Te(2),this.mld_l=Te(qe.SBMAX_l),this.mld_s=Te(qe.SBMAX_s),this.bm_l=Pe(qe.SBMAX_l),this.bo_l=Pe(qe.SBMAX_l),this.bm_s=Pe(qe.SBMAX_s),this.bo_s=Pe(qe.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=D([qe.CBANDS,2]),this.s3ind_s=D([qe.CBANDS,2]),this.numlines_s=Pe(qe.CBANDS),this.numlines_l=Pe(qe.CBANDS),this.rnumlines_l=Te(qe.CBANDS),this.mld_cb_l=Te(qe.CBANDS),this.mld_cb_s=Te(qe.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=Te(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=Pe(2),this.nsPsy=new s,this.VBR_seek_table=new i,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=D([16,5]),this.bitrate_blockType_Hist=D([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var n=0;n<this.en.length;n++)this.en[n]=new l;for(n=0;n<this.thm.length;n++)this.thm[n]=new l;for(n=0;n<this.header.length;n++)this.header[n]=new e}function u(){function _(e,t,n){var i=0,a=t+(n<<=1);d=4;do{var r,o,s,l=d>>1,u=d,c=d<<1,f=c+u,d=c<<1;v=(_=t)+l;do{}while(b=e[_+0]-e[_+u],m=e[_+0]+e[_+u],S=e[_+c]-e[_+f],y=e[_+c]+e[_+f],e[_+c]=m-y,e[_+0]=m+y,e[_+f]=b-S,e[_+u]=b+S,b=e[v+0]-e[v+u],m=e[v+0]+e[v+u],S=De.SQRT2*e[v+f],y=De.SQRT2*e[v+c],e[v+c]=m-y,e[v+0]=m+y,e[v+f]=b-S,e[v+u]=b+S,v+=d,(_+=d)<a);for(o=R[i+0],r=R[i+1],s=1;s<l;s++){var h=1-2*r*r,p=2*r*o,_=t+s,v=t+u-s;do{var g,m,b,w,y,M,S,x,k=p*e[_+u]-h*e[v+u],A=h*e[_+u]+p*e[v+u]}while(b=e[_+0]-A,m=e[_+0]+A,w=e[v+0]-k,g=e[v+0]+k,k=p*e[_+f]-h*e[v+f],A=h*e[_+f]+p*e[v+f],S=e[_+c]-A,y=e[_+c]+A,x=e[v+c]-k,M=e[v+c]+k,k=r*y-o*x,A=o*y+r*x,e[_+c]=m-A,e[_+0]=m+A,e[v+f]=w-k,e[v+u]=w+k,k=o*M-r*S,A=r*M+o*S,e[v+c]=g-A,e[v+0]=g+A,e[_+f]=b-k,e[_+u]=b+k,v+=d,(_+=d)<a);o=(h=o)*R[i+0]-r*R[i+1],r=h*R[i+1]+r*R[i+0]}}while(i+=2,d<n)}var h=Te(qe.BLKSIZE),v=Te(qe.BLKSIZE_s/2),R=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475],g=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(e,t,n,i,a){for(var r=0;r<3;r++){var o=qe.BLKSIZE_s/2,s=65535&192*(r+1),l=qe.BLKSIZE_s/8-1;do{var u,c,f=255&g[l<<2],d=v[f]*i[n][a+f+s],h=v[127-f]*i[n][a+f+s+128],p=d-h}while(d+=h,c=(u=v[64+f]*i[n][a+f+s+64])-(h=v[63-f]*i[n][a+f+s+192]),u+=h,o-=4,t[r][o+0]=d+u,t[r][o+2]=d-u,t[r][o+1]=p+c,t[r][o+3]=p-c,p=(d=v[1+f]*i[n][a+f+s+1])-(h=v[126-f]*i[n][a+f+s+129]),d+=h,c=(u=v[65+f]*i[n][a+f+s+65])-(h=v[62-f]*i[n][a+f+s+193]),u+=h,t[r][o+qe.BLKSIZE_s/2+0]=d+u,t[r][o+qe.BLKSIZE_s/2+2]=d-u,t[r][o+qe.BLKSIZE_s/2+1]=p+c,t[r][o+qe.BLKSIZE_s/2+3]=p-c,0<=--l);_(t[r],o,qe.BLKSIZE_s/2)}},this.fft_long=function(e,t,n,i,a){var r=qe.BLKSIZE/8-1,o=qe.BLKSIZE/2;do{var s,l,u=255&g[r],c=h[u]*i[n][a+u],f=h[512+u]*i[n][a+u+512],d=c-f}while(c+=f,l=(s=h[256+u]*i[n][a+u+256])-(f=h[768+u]*i[n][a+u+768]),s+=f,t[(o-=4)+0]=c+s,t[o+2]=c-s,t[o+1]=d+l,t[o+3]=d-l,d=(c=h[1+u]*i[n][a+u+1])-(f=h[513+u]*i[n][a+u+513]),c+=f,l=(s=h[257+u]*i[n][a+u+257])-(f=h[769+u]*i[n][a+u+769]),s+=f,t[o+qe.BLKSIZE/2+0]=c+s,t[o+qe.BLKSIZE/2+2]=c-s,t[o+qe.BLKSIZE/2+1]=d+l,t[o+qe.BLKSIZE/2+3]=d-l,0<=--r);_(t,o,qe.BLKSIZE/2)},this.init_fft=function(e){for(var t=0;t<qe.BLKSIZE;t++)h[t]=.42-.5*Math.cos(2*Math.PI*(t+.5)/qe.BLKSIZE)+.08*Math.cos(4*Math.PI*(t+.5)/qe.BLKSIZE);for(t=0;t<qe.BLKSIZE_s/2;t++)v[t]=.5*(1-Math.cos(2*Math.PI*(t+.5)/qe.BLKSIZE_s))}}function X(){function se(e,t){for(var n=0,i=0;i<qe.BLKSIZE/2;++i)n+=e[i]*t.ATH.eql_w[i];return n*a}function D(e,t,n){var i;if(e<0&&(e=0),t<0&&(t=0),e<=0)return t;if(t<=0)return e;if(i=e<t?t/e:e/t,-2<=n&&n<=2){if(_e<=i)return e+t;n=0|De.FAST_LOG10_X(i,16);return(e+t)*r[n]}return i<ve?e+t:(e<t&&(e=t),e)}function le(e,t,n,i,a){for(var r,o=0,s=0,l=r=0;l<qe.SBMAX_s;++r,++l){for(var u=e.bo_s[l],c=e.npart_s,f=u<c?u:c;r<f;)o+=t[r],s+=n[r],r++;if(e.en[i].s[l][a]=o,e.thm[i].s[l][a]=s,c<=r){++l;break}u=e.PSY.bo_s_weight[l],c=1-u,o=u*t[r],s=u*n[r];e.en[i].s[l][a]+=o,e.thm[i].s[l][a]+=s,o=c*t[r],s=c*n[r]}for(;l<qe.SBMAX_s;++l)e.en[i].s[l][a]=0,e.thm[i].s[l][a]=0}function ue(e,t,n,i){for(var a,r=0,o=0,s=a=0;s<qe.SBMAX_l;++a,++s){for(var l=e.bo_l[s],u=e.npart_l,c=l<u?l:u;a<c;)r+=t[a],o+=n[a],a++;if(e.en[i].l[s]=r,e.thm[i].l[s]=o,u<=a){++s;break}l=e.PSY.bo_l_weight[s],u=1-l,r=l*t[a],o=l*n[a];e.en[i].l[s]+=r,e.thm[i].l[s]+=o,r=u*t[a],o=u*n[a]}for(;s<qe.SBMAX_l;++s)e.en[i].l[s]=0,e.thm[i].l[s]=0}function ce(e,t,n){return 1<=n?e:n<=0?t:0<t?Math.pow(e/t,n)*t:0}function fe(e,t){for(var n=309.07,i=0;i<qe.SBMAX_s-1;i++)for(var a=0;a<3;a++){var r,o=e.thm.s[i][a];0<o&&((r=o*t)<(o=e.en.s[i][a])&&(n+=1e10*r<o?s[i]*(10*A):s[i]*De.FAST_LOG10(o/r)))}return n}function de(e,t){for(var n=281.0575,i=0;i<qe.SBMAX_l-1;i++){var a,r=e.thm.l[i];0<r&&((a=r*t)<(r=e.en.l[i])&&(n+=1e10*a<r?o[i]*(10*A):o[i]*De.FAST_LOG10(r/a)))}return n}function he(e,t,n,i,a){for(var r,o=r=0;o<e.npart_l;++o){for(var s=0,l=0,u=0;u<e.numlines_l[o];++u,++r){var c=t[r];s+=c,l<c&&(l=c)}n[o]=s,i[o]=l,a[o]=s*e.rnumlines_l[o]}}function pe(e,t,n,i){var a,r,o=ke.length-1,s=0,l=n[s]+n[s+1];for(0<l?((a=t[s])<t[s+1]&&(a=t[s+1]),o<(r=0|(l=20*(2*a-l)/(l*(e.numlines_l[s]+e.numlines_l[s+1]-1))))&&(r=o),i[s]=r):i[s]=0,s=1;s<e.npart_l-1;s++)0<(l=n[s-1]+n[s]+n[s+1])?((a=t[s-1])<t[s]&&(a=t[s]),a<t[s+1]&&(a=t[s+1]),o<(r=0|(l=20*(3*a-l)/(l*(e.numlines_l[s-1]+e.numlines_l[s]+e.numlines_l[s+1]-1))))&&(r=o),i[s]=r):i[s]=0;0<(l=n[s-1]+n[s])?((a=t[s-1])<t[s]&&(a=t[s]),o<(r=0|(l=20*(2*a-l)/(l*(e.numlines_l[s-1]+e.numlines_l[s]-1))))&&(r=o),i[s]=r):i[s]=0}function H(e,t,n,i,a,r){for(var o,s=e.internal_flags,l=new float[qe.CBANDS],u=Te(qe.CBANDS),c=new int[qe.CBANDS],f=o=0;f<s.npart_s;++f){for(var d=0,h=0,p=s.numlines_s[f],_=0;_<p;++_,++o){var v=t[r][o];d+=v,h<v&&(h=v)}n[f]=d,l[f]=h,u[f]=d/p}for(;f<qe.CBANDS;++f)l[f]=0,u[f]=0;for(function(e,t,n,i){var a,r,o=ke.length-1,s=0,l=n[s]+n[s+1];for(0<l?((a=t[s])<t[s+1]&&(a=t[s+1]),o<(r=0|(l=20*(2*a-l)/(l*(e.numlines_s[s]+e.numlines_s[s+1]-1))))&&(r=o),i[s]=r):i[s]=0,s=1;s<e.npart_s-1;s++)0<(l=n[s-1]+n[s]+n[s+1])?((a=t[s-1])<t[s]&&(a=t[s]),a<t[s+1]&&(a=t[s+1]),o<(r=0|(l=20*(3*a-l)/(l*(e.numlines_s[s-1]+e.numlines_s[s]+e.numlines_s[s+1]-1))))&&(r=o),i[s]=r):i[s]=0;0<(l=n[s-1]+n[s])?((a=t[s-1])<t[s]&&(a=t[s]),o<(r=0|(l=20*(2*a-l)/(l*(e.numlines_s[s-1]+e.numlines_s[s]-1))))&&(r=o),i[s]=r):i[s]=0}(s,l,u,c),o=f=0;f<s.npart_s;f++){var g,m,b=s.s3ind_s[f][0],w=s.s3ind_s[f][1],y=c[b],M=1,S=s.s3_ss[o]*n[b]*ke[c[b]];for(++o,++b;b<=w;)y+=c[b],M+=1,S=D(S,g=s.s3_ss[o]*n[b]*ke[c[b]],b-f),++o,++b;S*=m=.5*ke[y=(1+2*y)/(2*M)],i[f]=S,s.nb_s2[a][f]=s.nb_s1[a][f],s.nb_s1[a][f]=S,g=l[f],g*=s.minval_s[f],g*=m,i[f]>g&&(i[f]=g),1<s.masking_lower&&(i[f]*=s.masking_lower),i[f]>n[f]&&(i[f]=n[f]),s.masking_lower<1&&(i[f]*=s.masking_lower)}for(;f<qe.CBANDS;++f)n[f]=0,i[f]=0}function F(e,t,n,i,a,r,o){for(var s=2*r,l=0<r?Math.pow(10,a):1,u=0;u<o;++u){var c,f,d,h=e[2][u],p=e[3][u],_=t[0][u],v=t[1][u],g=t[2][u],m=t[3][u];f=_<=1.58*v&&v<=1.58*_?(f=n[u]*p,d=n[u]*h,c=Math.max(g,Math.min(m,f)),Math.max(m,Math.min(g,d))):(c=g,m),0<r&&(d=i[u]*l,v=Math.min(Math.max(_,d),Math.max(v,d)),0<(d=(g=Math.max(c,d))+(m=Math.max(f,d)))&&v*s<d&&(g*=d=v*s/d,m*=d),c=Math.min(g,c),f=Math.min(m,f)),h<c&&(c=h),p<f&&(f=p),t[2][u]=c,t[3][u]=f}}function m(e,t){t=0<=e?27*-e:e*t;return t<=-72?0:Math.exp(t*b)}function R(e){return e<0&&(e=0),e*=.001,13*Math.atan(.76*e)+3.5*Math.atan(e*e/56.25)}function S(e,t,n,i,a,r,o,s,l,u,c,f){var d=Te(qe.CBANDS+1),h=s/(15<f?1152:384),p=Pe(qe.HBLKSIZE);s/=l;for(var _,v=0,g=0,m=0;m<qe.CBANDS;m++){for(x=R(s*v),d[m]=s*v,_=v;R(s*_)-x<E&&_<=l/2;_++);for(e[m]=_-v,g=m+1;v<_;)p[v++]=m;if(l/2<v){v=l/2,++m;break}}d[m]=s*v;for(var b=0;b<f;b++){var w=u[b],y=u[b+1],M=0|Math.floor(.5+c*(w-.5));M<0&&(M=0),l/2<(w=0|Math.floor(.5+c*(y-.5)))&&(w=l/2),n[b]=(p[M]+p[w])/2,t[b]=p[w];var y=h*y;o[b]=(y-d[t[b]])/(d[t[b]+1]-d[t[b]]),o[b]<0?o[b]=0:1<o[b]&&(o[b]=1),y=R(s*u[b]*c),y=Math.min(y,15.5)/15.5,r[b]=Math.pow(10,1.25*(1-Math.cos(Math.PI*y))-2.5)}for(var S=v=0;S<g;S++){var x,k,A=e[S];x=R(s*v),k=R(s*(v+A-1)),i[S]=.5*(x+k),x=R(s*(v-.5)),k=R(s*(v+A-.5)),a[S]=k-x,v+=A}return g}function x(e,t,n,i,a,r){var o,s,l,u,c=Ce([qe.CBANDS,qe.CBANDS]),f=0;if(r)for(var d=0;d<t;d++)for(o=0;o<t;o++){var h=(s=n[d]-n[o],u=l=void 0,u=s,s=.5<=(u*=0<=u?3:1.5)&&u<=2.5?8*((l=u-.5)*l-2*l):0,((l=15.811389+7.5*(u+=.474)-17.5*Math.sqrt(1+u*u))<=-60?0:(u=Math.exp((s+l)*b),u/=.6609193))*i[o]);c[d][o]=h*a[d]}else for(o=0;o<t;o++)for(var p=15+Math.min(21/n[o],12),_=function(e){var t,n,i=0;for(i=0;1e-20<m(i,e);--i);for(a=i,r=0;1e-12<Math.abs(r-a);)0<m(i=(r+a)/2,e)?r=i:a=i;t=a;var a,r,i=0;for(i=0;1e-20<m(i,e);i+=1);for(a=0,r=i;1e-12<Math.abs(r-a);)0<m(i=(r+a)/2,e)?a=i:r=i;n=r;for(var o=0,s=0;s<=1e3;++s)o+=m(i=t+s*(n-t)/1e3,e);return 1001/(o*(n-t))}(p),d=0;d<t;d++){h=_*m(n[d]-n[o],p)*i[o];c[d][o]=h*a[d]}for(d=0;d<t;d++){for(o=0;o<t&&!(0<c[d][o]);o++);for(e[d][0]=o,o=t-1;0<o&&!(0<c[d][o]);o--);e[d][1]=o,f+=e[d][1]-e[d][0]+1}for(var v=Te(f),g=0,d=0;d<t;d++)for(o=e[d][0];o<=e[d][1];o++)v[g++]=c[d][o];return v}function k(e){e=R(e),e=Math.min(e,15.5)/15.5;return Math.pow(10,1.25*(1-Math.cos(Math.PI*e))-2.5)}function i(e,t){return e<-.3&&(e=3410),e/=1e3,e=Math.max(.1,e),3.64*Math.pow(e,-.8)-6.8*Math.exp(-.6*Math.pow(e-3.4,2))+6*Math.exp(-.15*Math.pow(e-8.7,2))+.001*(.6+.04*t)*Math.pow(e,4)}var _e,ve,ge,me=new u,A=2.302585092994046,be=2,we=16,ye=2,Me=16,E=.34,a=1/217621504/(qe.BLKSIZE/2),Se=.3,xe=21,b=.2302585093,B=8,P=23,T=15,ke=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],Ae=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],Re=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],Ee=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276],r=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],s=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130],o=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1],Be=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];this.L3psycho_anal_ns=function(o,e,t,n,i,a,r,s,l,u){var c,f,d,h,p,_,v,g=o.internal_flags,m=Ce([2,qe.BLKSIZE]),b=Ce([2,3,qe.BLKSIZE_s]),w=Te(qe.CBANDS+1),y=Te(qe.CBANDS+1),M=Te(qe.CBANDS+2),S=Pe(2),x=Pe(2),k=Ce([2,576]),A=Pe(qe.CBANDS+2),R=Pe(qe.CBANDS+2);for(ze.fill(R,0),c=g.channels_out,o.mode==Ve.JOINT_STEREO&&(c=4),v=o.VBR==Oe.vbr_off?0==g.ResvMax?0:g.ResvSize/g.ResvMax*.5:o.VBR==Oe.vbr_rh||o.VBR==Oe.vbr_mtrh||o.VBR==Oe.vbr_mt?.6:1,f=0;f<g.channels_out;f++){for(var E=e[f],B=t+576-350-xe+192,P=0;P<576;P++){for(var T=E[B+P+10],C=0,I=0;I<(xe-1)/2-1;I+=2)T+=Be[I]*(E[B+P+I]+E[B+P+xe-I]),C+=Be[I+1]*(E[B+P+I+1]+E[B+P+xe-I-1]);k[f][P]=T+C}i[n][f].en.assign(g.en[f]),i[n][f].thm.assign(g.thm[f]),2<c&&(a[n][f].en.assign(g.en[f+2]),a[n][f].thm.assign(g.thm[f+2]))}for(f=0;f<c;f++){var O,V=Te(12),q=[0,0,0,0],z=Te(12),D=1,H=Te(qe.CBANDS),F=Te(qe.CBANDS),L=[0,0,0,0],N=Te(qe.HBLKSIZE),Q=Ce([3,qe.HBLKSIZE_s]);for(P=0;P<3;P++)V[P]=g.nsPsy.last_en_subshort[f][P+6],z[P]=V[P]/g.nsPsy.last_en_subshort[f][P+4],q[0]+=V[P];if(2==f)for(P=0;P<576;P++){var W=k[0][P],X=k[1][P];k[0][P]=W+X,k[1][P]=W-X}var j,Y,$,U=k[1&f],G=0;for(P=0;P<9;P++){for(var K=G+64,Z=1;G<K;G++)Z<Math.abs(U[G])&&(Z=Math.abs(U[G]));g.nsPsy.last_en_subshort[f][P]=V[P+3]=Z,q[1+P/3]+=Z,Z>V[P+3-2]?Z/=V[P+3-2]:Z=V[P+3-2]>10*Z?V[P+3-2]/(10*Z):0,z[P+3]=Z}if(o.analysis){var J=z[0];for(P=1;P<12;P++)J<z[P]&&(J=z[P]);g.pinfo.ers[n][f]=g.pinfo.ers_save[f],g.pinfo.ers_save[f]=J}for(O=3==f?g.nsPsy.attackthre_s:g.nsPsy.attackthre,P=0;P<12;P++)0==L[P/3]&&z[P]>O&&(L[P/3]=P%3+1);for(P=1;P<4;P++)(q[P-1]>q[P]?q[P-1]/q[P]:q[P]/q[P-1])<1.7&&(L[P]=0,1==P&&(L[0]=0));for(0!=L[0]&&0!=g.nsPsy.lastAttacks[f]&&(L[0]=0),3!=g.nsPsy.lastAttacks[f]&&L[0]+L[1]+L[2]+L[3]==0||((D=0)!=L[1]&&0!=L[0]&&(L[1]=0),0!=L[2]&&0!=L[1]&&(L[2]=0),0!=L[3]&&0!=L[2]&&(L[3]=0)),f<2?x[f]=D:0==D&&(x[0]=x[1]=0),l[f]=g.tot_ener[f],function(e,t,n,i,a,r,o,s,l,u,c){var f=e.internal_flags;if(l<2)me.fft_long(f,i[a],l,u,c),me.fft_short(f,r[o],l,u,c);else if(2==l){for(var d=qe.BLKSIZE-1;0<=d;--d){var h=i[a+0][d],p=i[a+1][d];i[a+0][d]=(h+p)*De.SQRT2*.5,i[a+1][d]=(h-p)*De.SQRT2*.5}for(var _=2;0<=_;--_)for(d=qe.BLKSIZE_s-1;0<=d;--d){h=r[o+0][_][d],p=r[o+1][_][d];r[o+0][_][d]=(h+p)*De.SQRT2*.5,r[o+1][_][d]=(h-p)*De.SQRT2*.5}}for(t[0]=i[a+0][0],t[0]*=t[0],d=qe.BLKSIZE/2-1;0<=d;--d){var v=i[a+0][qe.BLKSIZE/2-d],g=i[a+0][qe.BLKSIZE/2+d];t[qe.BLKSIZE/2-d]=.5*(v*v+g*g)}for(_=2;0<=_;--_){n[_][0]=r[o+0][_][0],n[_][0]*=n[_][0];for(d=qe.BLKSIZE_s/2-1;0<=d;--d){v=r[o+0][_][qe.BLKSIZE_s/2-d],g=r[o+0][_][qe.BLKSIZE_s/2+d];n[_][qe.BLKSIZE_s/2-d]=.5*(v*v+g*g)}}for(var m=0,d=11;d<qe.HBLKSIZE;d++)m+=t[d];if(f.tot_ener[l]=m,e.analysis){for(d=0;d<qe.HBLKSIZE;d++)f.pinfo.energy[s][l][d]=f.pinfo.energy_save[l][d],f.pinfo.energy_save[l][d]=t[d];f.pinfo.pe[s][l]=f.pe[l]}2==e.athaa_loudapprox&&l<2&&(f.loudness_sq[s][l]=f.loudness_sq_save[l],f.loudness_sq_save[l]=se(t,f))}(o,N,Q,m,1&f,b,1&f,n,f,e,t),he(g,N,w,H,F),pe(g,H,F,A),_=0;_<3;_++)for(function(e,t,n,i,a,r){for(var o,s=e.internal_flags,l=o=0;l<s.npart_s;++l){for(var u=0,c=0,f=s.numlines_s[l],d=0;d<f;++d,++o){var h=t[r][o];u+=h,c<h&&(c=h)}n[l]=u}for(o=l=0;l<s.npart_s;l++){var p=s.s3ind_s[l][0],_=s.s3_ss[o++]*n[p];for(++p;p<=s.s3ind_s[l][1];)_+=s.s3_ss[o]*n[p],++o,++p;var v,g=ye*s.nb_s1[a][l];i[l]=Math.min(_,g),s.blocktype_old[1&a]==qe.SHORT_TYPE&&(g=Me*s.nb_s2[a][l],v=i[l],i[l]=Math.min(g,v)),s.nb_s2[a][l]=s.nb_s1[a][l],s.nb_s1[a][l]=_}for(;l<=qe.CBANDS;++l)n[l]=0,i[l]=0}(o,Q,y,M,f,_),le(g,y,M,f,_),p=0;p<qe.SBMAX_s;p++)Y=g.thm[f].s[p][_],Y*=.8,(2<=L[_]||1==L[_+1])&&($=0!=_?_-1:2,Z=ce(g.thm[f].s[p][$],Y,.6*v),Y=Math.min(Y,Z)),1==L[_]?($=0!=_?_-1:2,Z=ce(g.thm[f].s[p][$],Y,Se*v),Y=Math.min(Y,Z)):(0!=_&&3==L[_-1]||0==_&&3==g.nsPsy.lastAttacks[f])&&($=2!=_?_+1:0,Z=ce(g.thm[f].s[p][$],Y,Se*v),Y=Math.min(Y,Z)),j=V[3*_+3]+V[3*_+4]+V[3*_+5],6*V[3*_+5]<j&&(Y*=.5,6*V[3*_+4]<j&&(Y*=.5)),g.thm[f].s[p][_]=Y;for(g.nsPsy.lastAttacks[f]=L[2],d=h=0;d<g.npart_l;d++){for(var ee=g.s3ind[d][0],te=w[ee]*ke[A[ee]],ne=g.s3_ll[h++]*te;++ee<=g.s3ind[d][1];)te=w[ee]*ke[A[ee]],ne=function(e,t,n,i,a,r){var o;if(e<t){if(!(t<e*ve))return e+t;o=t/e}else{if(t*ve<=e)return e+t;o=e/t}if(e+=t,i+3<=6){if(_e<=o)return e;var s=0|De.FAST_LOG10_X(o,16);return e*Re[s]}if(s=0|De.FAST_LOG10_X(o,16),t=0!=r?a.ATH.cb_s[n]*a.ATH.adjust:a.ATH.cb_l[n]*a.ATH.adjust,e<ge*t){if(t<e){a=1;return s<=13&&(a=Ee[s]),t=De.FAST_LOG10_X(e/t,10/15),e*((Ae[s]-a)*t+a)}return 13<s?e:e*Ee[s]}return e*Ae[s]}(ne,g.s3_ll[h++]*te,ee,ee-d,g,0);ne*=.158489319246111,g.blocktype_old[1&f]==qe.SHORT_TYPE?M[d]=ne:M[d]=ce(Math.min(ne,Math.min(be*g.nb_1[f][d],we*g.nb_2[f][d])),ne,v),g.nb_2[f][d]=g.nb_1[f][d],g.nb_1[f][d]=ne}for(;d<=qe.CBANDS;++d)w[d]=0,M[d]=0;ue(g,w,M,f)}for((o.mode==Ve.STEREO||o.mode==Ve.JOINT_STEREO)&&0<o.interChRatio&&function(e){var t=o.internal_flags;if(1<t.channels_out){for(var n=0;n<qe.SBMAX_l;n++){var i=t.thm[0].l[n],a=t.thm[1].l[n];t.thm[0].l[n]+=a*e,t.thm[1].l[n]+=i*e}for(n=0;n<qe.SBMAX_s;n++)for(var r=0;r<3;r++){i=t.thm[0].s[n][r],a=t.thm[1].s[n][r];t.thm[0].s[n][r]+=a*e,t.thm[1].s[n][r]+=i*e}}}(o.interChRatio),o.mode==Ve.JOINT_STEREO&&(function(e){for(var t=0;t<qe.SBMAX_l;t++)e.thm[0].l[t]>1.58*e.thm[1].l[t]||e.thm[1].l[t]>1.58*e.thm[0].l[t]||(n=e.mld_l[t]*e.en[3].l[t],i=Math.max(e.thm[2].l[t],Math.min(e.thm[3].l[t],n)),n=e.mld_l[t]*e.en[2].l[t],a=Math.max(e.thm[3].l[t],Math.min(e.thm[2].l[t],n)),e.thm[2].l[t]=i,e.thm[3].l[t]=a);for(var n,i,a,t=0;t<qe.SBMAX_s;t++)for(var r=0;r<3;r++)e.thm[0].s[t][r]>1.58*e.thm[1].s[t][r]||e.thm[1].s[t][r]>1.58*e.thm[0].s[t][r]||(n=e.mld_s[t]*e.en[3].s[t][r],i=Math.max(e.thm[2].s[t][r],Math.min(e.thm[3].s[t][r],n)),n=e.mld_s[t]*e.en[2].s[t][r],a=Math.max(e.thm[3].s[t][r],Math.min(e.thm[2].s[t][r],n)),e.thm[2].s[t][r]=i,e.thm[3].s[t][r]=a)}(g),R=o.msfix,0<Math.abs(R)&&function(e,t,n){var i=t,a=Math.pow(10,n);t*=2,i*=2;for(var r=0;r<qe.SBMAX_l;r++)u=e.ATH.cb_l[e.bm_l[r]]*a,(o=Math.min(Math.max(e.thm[0].l[r],u),Math.max(e.thm[1].l[r],u)))*t<(s=Math.max(e.thm[2].l[r],u))+(l=Math.max(e.thm[3].l[r],u))&&(s*=c=o*i/(s+l),l*=c),e.thm[2].l[r]=Math.min(s,e.thm[2].l[r]),e.thm[3].l[r]=Math.min(l,e.thm[3].l[r]);a*=qe.BLKSIZE_s/qe.BLKSIZE;for(var o,s,l,u,c,r=0;r<qe.SBMAX_s;r++)for(var f=0;f<3;f++)u=e.ATH.cb_s[e.bm_s[r]]*a,(o=Math.min(Math.max(e.thm[0].s[r][f],u),Math.max(e.thm[1].s[r][f],u)))*t<(s=Math.max(e.thm[2].s[r][f],u))+(l=Math.max(e.thm[3].s[r][f],u))&&(s*=c=o*t/(s+l),l*=c),e.thm[2].s[r][f]=Math.min(e.thm[2].s[r][f],s),e.thm[3].s[r][f]=Math.min(e.thm[3].s[r][f],l)}(g,R,o.ATHlower*g.ATH.adjust)),function(e,t,n,i){var a=e.internal_flags;e.short_blocks!=Ie.short_block_coupled||0!=t[0]&&0!=t[1]||(t[0]=t[1]=0);for(var r=0;r<a.channels_out;r++)i[r]=qe.NORM_TYPE,e.short_blocks==Ie.short_block_dispensed&&(t[r]=1),e.short_blocks==Ie.short_block_forced&&(t[r]=0),0!=t[r]?a.blocktype_old[r]==qe.SHORT_TYPE&&(i[r]=qe.STOP_TYPE):(i[r]=qe.SHORT_TYPE,a.blocktype_old[r]==qe.NORM_TYPE&&(a.blocktype_old[r]=qe.START_TYPE),a.blocktype_old[r]==qe.STOP_TYPE&&(a.blocktype_old[r]=qe.SHORT_TYPE)),n[r]=a.blocktype_old[r],a.blocktype_old[r]=i[r]}(o,x,u,S),f=0;f<c;f++){var ie,ae,re=0,oe=1<f?(ie=s,re=-2,ae=qe.NORM_TYPE,u[0]!=qe.SHORT_TYPE&&u[1]!=qe.SHORT_TYPE||(ae=qe.SHORT_TYPE),a[n][f-2]):(ie=r,re=0,ae=u[f],i[n][f]);ie[re+f]=(ae==qe.SHORT_TYPE?fe:de)(oe,g.masking_lower),o.analysis&&(g.pinfo.pe[n][f]=ie[re+f])}return 0};var L=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];this.L3psycho_anal_vbr=function(r,e,t,n,i,a,o,s,l,u){var c=r.internal_flags,f=Te(qe.HBLKSIZE),d=Ce([3,qe.HBLKSIZE_s]),h=Ce([2,qe.BLKSIZE]),p=Ce([2,3,qe.BLKSIZE_s]),_=Ce([4,qe.CBANDS]),v=Ce([4,qe.CBANDS]),g=Ce([4,3]),m=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],b=Pe(2),w=r.mode==Ve.JOINT_STEREO?4:c.channels_out;(function(e,t,n,i,a,r,o,s,l,u){for(var c=Ce([2,576]),f=e.internal_flags,d=f.channels_out,h=e.mode==Ve.JOINT_STEREO?4:d,p=0;p<d;p++){firbuf=t[p];for(var _=n+576-350-xe+192,v=0;v<576;v++){for(var g=firbuf[_+v+10],m=0,b=0;b<(xe-1)/2-1;b+=2)g+=L[b]*(firbuf[_+v+b]+firbuf[_+v+xe-b]),m+=L[b+1]*(firbuf[_+v+b+1]+firbuf[_+v+xe-b-1]);c[p][v]=g+m}a[i][p].en.assign(f.en[p]),a[i][p].thm.assign(f.thm[p]),2<h&&(r[i][p].en.assign(f.en[p+2]),r[i][p].thm.assign(f.thm[p+2]))}for(p=0;p<h;p++){var w=Te(12),y=Te(12),M=[0,0,0,0],S=c[1&p],x=0,k=3==p?f.nsPsy.attackthre_s:f.nsPsy.attackthre,A=1;if(2==p)for(v=0,b=576;0<b;++v,--b){var R=c[0][v],E=c[1][v];c[0][v]=R+E,c[1][v]=R-E}for(v=0;v<3;v++)y[v]=f.nsPsy.last_en_subshort[p][v+6],w[v]=y[v]/f.nsPsy.last_en_subshort[p][v+4],M[0]+=y[v];for(v=0;v<9;v++){for(var B=x+64,P=1;x<B;x++)P<Math.abs(S[x])&&(P=Math.abs(S[x]));f.nsPsy.last_en_subshort[p][v]=y[v+3]=P,M[1+v/3]+=P,P>y[v+3-2]?P/=y[v+3-2]:P=y[v+3-2]>10*P?y[v+3-2]/(10*P):0,w[v+3]=P}for(v=0;v<3;++v){var T=y[3*v+3]+y[3*v+4]+y[3*v+5],C=1;6*y[3*v+5]<T&&(C*=.5,6*y[3*v+4]<T&&(C*=.5)),s[p][v]=C}if(e.analysis){for(var I=w[0],v=1;v<12;v++)I<w[v]&&(I=w[v]);f.pinfo.ers[i][p]=f.pinfo.ers_save[p],f.pinfo.ers_save[p]=I}for(v=0;v<12;v++)0==l[p][v/3]&&w[v]>k&&(l[p][v/3]=v%3+1);for(v=1;v<4;v++){var O=M[v-1],V=M[v];Math.max(O,V)<4e4&&O<1.7*V&&V<1.7*O&&(1==v&&l[p][0]<=l[p][v]&&(l[p][0]=0),l[p][v]=0)}l[p][0]<=f.nsPsy.lastAttacks[p]&&(l[p][0]=0),3!=f.nsPsy.lastAttacks[p]&&l[p][0]+l[p][1]+l[p][2]+l[p][3]==0||((A=0)!=l[p][1]&&0!=l[p][0]&&(l[p][1]=0),0!=l[p][2]&&0!=l[p][1]&&(l[p][2]=0),0!=l[p][3]&&0!=l[p][2]&&(l[p][3]=0)),p<2?u[p]=A:0==A&&(u[0]=u[1]=0),o[p]=f.tot_ener[p]}})(r,e,t,n,i,a,l,g,m,b),function(e,t){var n=e.internal_flags;e.short_blocks!=Ie.short_block_coupled||0!=t[0]&&0!=t[1]||(t[0]=t[1]=0);for(var i=0;i<n.channels_out;i++)e.short_blocks==Ie.short_block_dispensed&&(t[i]=1),e.short_blocks==Ie.short_block_forced&&(t[i]=0)}(r,b);for(var y,M,S,x,k,A=0;A<w;A++)(function(e,t,n,i,a,r,o,s){var l=e.internal_flags;if(i<2)me.fft_long(l,o[s],i,t,n);else if(2==i)for(var u=qe.BLKSIZE-1;0<=u;--u){var c=o[s+0][u],f=o[s+1][u];o[s+0][u]=(c+f)*De.SQRT2*.5,o[s+1][u]=(c-f)*De.SQRT2*.5}for(r[0]=o[s+0][0],r[0]*=r[0],u=qe.BLKSIZE/2-1;0<=u;--u){var d=o[s+0][qe.BLKSIZE/2-u],h=o[s+0][qe.BLKSIZE/2+u];r[qe.BLKSIZE/2-u]=.5*(d*d+h*h)}for(var p=0,u=11;u<qe.HBLKSIZE;u++)p+=r[u];if(l.tot_ener[i]=p,e.analysis){for(u=0;u<qe.HBLKSIZE;u++)l.pinfo.energy[a][i][u]=l.pinfo.energy_save[i][u],l.pinfo.energy_save[i][u]=r[u];l.pinfo.pe[a][i]=l.pe[i]}})(r,e,t,A,n,f,h,E=1&A),M=n,S=A,x=f,k=void 0,k=(y=r).internal_flags,2==y.athaa_loudapprox&&S<2&&(k.loudness_sq[M][S]=k.loudness_sq_save[S],k.loudness_sq_save[S]=se(x,k)),0!=b[E]?function(e,t,n,i,a){var r=Te(qe.CBANDS),o=Te(qe.CBANDS),s=Pe(qe.CBANDS+2);he(e,t,n,r,o),pe(e,r,o,s);for(var l=0,u=0;u<e.npart_l;u++){var c,f,d,h,p,_,v=e.s3ind[u][0],g=e.s3ind[u][1],m=0,b=0,m=s[v];for(b+=1,f=e.s3_ll[l]*n[v]*ke[s[v]],++l,++v;v<=g;)m+=s[v],b+=1,f=D(f,c=e.s3_ll[l]*n[v]*ke[s[v]],v-u),++l,++v;f*=d=.5*ke[m=(1+2*m)/(2*b)],e.blocktype_old[1&a]==qe.SHORT_TYPE?(h=be*e.nb_1[a][u],i[u]=0<h?Math.min(f,h):Math.min(f,n[u]*Se)):((p=we*e.nb_2[a][u])<=0&&(p=f),(_=be*e.nb_1[a][u])<=0&&(_=f),h=e.blocktype_old[1&a]==qe.NORM_TYPE?Math.min(_,p):_,i[u]=Math.min(f,h)),e.nb_2[a][u]=e.nb_1[a][u],e.nb_1[a][u]=f,c=r[u],c*=e.minval_l[u],c*=d,i[u]>c&&(i[u]=c),1<e.masking_lower&&(i[u]*=e.masking_lower),i[u]>n[u]&&(i[u]=n[u]),e.masking_lower<1&&(i[u]*=e.masking_lower)}for(;u<qe.CBANDS;++u)n[u]=0,i[u]=0}(c,f,_[A],v[A],A):function(e,t){for(var n=0;n<e.npart_l;n++)e.nb_2[t][n]=e.nb_1[t][n],e.nb_1[t][n]=0}(c,A);b[0]+b[1]==2&&r.mode==Ve.JOINT_STEREO&&F(_,v,c.mld_cb_l,c.ATH.cb_l,r.ATHlower*c.ATH.adjust,r.msfix,c.npart_l);for(A=0;A<w;A++)0!=b[E=1&A]&&ue(c,_[A],v[A],A);for(var R=0;R<3;R++){for(A=0;A<w;++A)0!=b[E=1&A]?function(e,t){if(0==R)for(var n=0;n<e.npart_s;n++)e.nb_s2[t][n]=e.nb_s1[t][n],e.nb_s1[t][n]=0}(c,A):(function(e,t,n,i,a,r,o,s){if(e=e.internal_flags,0==a&&i<2&&me.fft_short(e,o[s],i,t,n),2==i)for(var l=qe.BLKSIZE_s-1;0<=l;--l){var u=o[s+0][a][l],c=o[s+1][a][l];o[s+0][a][l]=(u+c)*De.SQRT2*.5,o[s+1][a][l]=(u-c)*De.SQRT2*.5}for(r[a][0]=o[s+0][a][0],r[a][0]*=r[a][0],l=qe.BLKSIZE_s/2-1;0<=l;--l){var f=o[s+0][a][qe.BLKSIZE_s/2-l],d=o[s+0][a][qe.BLKSIZE_s/2+l];r[a][qe.BLKSIZE_s/2-l]=.5*(f*f+d*d)}}(r,e,t,A,R,d,p,E),H(r,d,_[A],v[A],A,R));b[0]+b[1]==0&&r.mode==Ve.JOINT_STEREO&&F(_,v,c.mld_cb_s,c.ATH.cb_s,r.ATHlower*c.ATH.adjust,r.msfix,c.npart_s);for(A=0;A<w;++A)0==b[E=1&A]&&le(c,_[A],v[A],A,R)}for(var E,A=0;A<w;A++)if(0==b[E=1&A])for(var B=0;B<qe.SBMAX_s;B++){for(var P=Te(3),R=0;R<3;R++){var T,C,I=c.thm[A].s[B][R];I*=.8,2<=m[A][R]||1==m[A][R+1]?(T=0!=R?R-1:2,C=ce(c.thm[A].s[B][T],I,.36),I=Math.min(I,C)):1==m[A][R]?(T=0!=R?R-1:2,C=ce(c.thm[A].s[B][T],I,.6*Se),I=Math.min(I,C)):(0!=R&&3==m[A][R-1]||0==R&&3==c.nsPsy.lastAttacks[A])&&(T=2!=R?R+1:0,C=ce(c.thm[A].s[B][T],I,.6*Se),I=Math.min(I,C)),I*=g[A][R],P[R]=I}for(R=0;R<3;R++)c.thm[A].s[B][R]=P[R]}for(A=0;A<w;A++)c.nsPsy.lastAttacks[A]=m[A][2];!function(e,t){for(var n=r.internal_flags,i=0;i<n.channels_out;i++){var a=qe.NORM_TYPE;0!=e[i]?n.blocktype_old[i]==qe.SHORT_TYPE&&(a=qe.STOP_TYPE):(a=qe.SHORT_TYPE,n.blocktype_old[i]==qe.NORM_TYPE&&(n.blocktype_old[i]=qe.START_TYPE),n.blocktype_old[i]==qe.STOP_TYPE&&(n.blocktype_old[i]=qe.SHORT_TYPE)),t[i]=n.blocktype_old[i],n.blocktype_old[i]=a}}(b,u);for(A=0;A<w;A++){var O,V,q,z=1<A?(O=s,V=-2,q=qe.NORM_TYPE,u[0]!=qe.SHORT_TYPE&&u[1]!=qe.SHORT_TYPE||(q=qe.SHORT_TYPE),a[n][A-2]):(O=o,V=0,q=u[A],i[n][A]);O[V+A]=(q==qe.SHORT_TYPE?fe:de)(z,c.masking_lower),r.analysis&&(c.pinfo.pe[n][A]=O[V+A])}return 0},this.psymodel_init=function(e){var t=e.internal_flags,n=!0,i=13,a=0,r=0,o=-8.25,s=-4.5,l=Te(qe.CBANDS),u=Te(qe.CBANDS),c=Te(qe.CBANDS),f=e.out_samplerate;switch(e.experimentalZ){default:case 0:n=!0;break;case 1:n=e.VBR!=Oe.vbr_mtrh&&e.VBR!=Oe.vbr_mt;break;case 2:n=!1;break;case 3:i=8,a=-1.75,r=-.0125,o=-8.25,s=-2.25}for(t.ms_ener_ratio_old=.25,t.blocktype_old[0]=t.blocktype_old[1]=qe.NORM_TYPE,M=0;M<4;++M){for(var d=0;d<qe.CBANDS;++d)t.nb_1[M][d]=1e20,t.nb_2[M][d]=1e20,t.nb_s1[M][d]=t.nb_s2[M][d]=1;for(var h=0;h<qe.SBMAX_l;h++)t.en[M].l[h]=1e20,t.thm[M].l[h]=1e20;for(d=0;d<3;++d){for(h=0;h<qe.SBMAX_s;h++)t.en[M].s[h][d]=1e20,t.thm[M].s[h][d]=1e20;t.nsPsy.lastAttacks[M]=0}for(d=0;d<9;d++)t.nsPsy.last_en_subshort[M][d]=10}for(t.loudness_sq_save[0]=t.loudness_sq_save[1]=0,t.npart_l=S(t.numlines_l,t.bo_l,t.bm_l,l,u,t.mld_l,t.PSY.bo_l_weight,f,qe.BLKSIZE,t.scalefac_band.l,qe.BLKSIZE/1152,qe.SBMAX_l),M=0;M<t.npart_l;M++){var p=a;l[M]>=i&&(p=r*(l[M]-i)/(24-i)+a*(24-l[M])/(24-i)),c[M]=Math.pow(10,p/10),0<t.numlines_l[M]?t.rnumlines_l[M]=1/t.numlines_l[M]:t.rnumlines_l[M]=0}t.s3_ll=x(t.s3ind,t.npart_l,l,u,c,n);d=0;for(M=0;M<t.npart_l;M++){g=U.MAX_VALUE;for(var _=0;_<t.numlines_l[M];_++,d++){var v=f*d/(1e3*qe.BLKSIZE);m=this.ATHformula(1e3*v,e)-20,m=Math.pow(10,.1*m),(m*=t.numlines_l[M])<g&&(g=m)}t.ATH.cb_l[M]=g,6<(g=20*l[M]/10-20)&&(g=100),g<-15&&(g=-15),g-=8,t.minval_l[M]=Math.pow(10,g/10)*t.numlines_l[M]}for(t.npart_s=S(t.numlines_s,t.bo_s,t.bm_s,l,u,t.mld_s,t.PSY.bo_s_weight,f,qe.BLKSIZE_s,t.scalefac_band.s,qe.BLKSIZE_s/384,qe.SBMAX_s),M=d=0;M<t.npart_s;M++){var g,p=o;l[M]>=i&&(p=s*(l[M]-i)/(24-i)+o*(24-l[M])/(24-i)),c[M]=Math.pow(10,p/10),g=U.MAX_VALUE;for(_=0;_<t.numlines_s[M];_++,d++){var m,v=f*d/(1e3*qe.BLKSIZE_s);m=this.ATHformula(1e3*v,e)-20,m=Math.pow(10,.1*m),(m*=t.numlines_s[M])<g&&(g=m)}t.ATH.cb_s[M]=g,g=7*l[M]/12-7,12<l[M]&&(g*=1+3.1*Math.log(1+g)),l[M]<12&&(g*=1+2.3*Math.log(1-g)),g<-15&&(g=-15),g-=8,t.minval_s[M]=Math.pow(10,g/10)*t.numlines_s[M]}t.s3_ss=x(t.s3ind_s,t.npart_s,l,u,c,n),_e=Math.pow(10,(B+1)/16),ve=Math.pow(10,(P+1)/16),ge=Math.pow(10,T/10),me.init_fft(t),t.decay=Math.exp(-1*A/(.01*f/192)),u=3.5,0!=(2&e.exp_nspsytune)&&(u=1),0<Math.abs(e.msfix)&&(u=e.msfix),e.msfix=u;for(var b=0;b<t.npart_l;b++)t.s3ind[b][1]>t.npart_l-1&&(t.s3ind[b][1]=t.npart_l-1);u=576*t.mode_gr/f;if(t.ATH.decay=Math.pow(10,-1.2*u),t.ATH.adjust=.01,-(t.ATH.adjustLimit=1)!=e.ATHtype){for(var w=e.out_samplerate/qe.BLKSIZE,y=0,M=v=0;M<qe.BLKSIZE/2;++M)v+=w,t.ATH.eql_w[M]=1/Math.pow(10,this.ATHformula(v,e)/10),y+=t.ATH.eql_w[M];for(y=1/y,M=qe.BLKSIZE/2;0<=--M;)t.ATH.eql_w[M]*=y}for(b=d=0;b<t.npart_s;++b)for(M=0;M<t.numlines_s[b];++M)++d;for(b=d=0;b<t.npart_l;++b)for(M=0;M<t.numlines_l[b];++M)++d;for(M=d=0;M<t.npart_l;M++){v=f*(d+t.numlines_l[M]/2)/+qe.BLKSIZE;t.mld_cb_l[M]=k(v),d+=t.numlines_l[M]}for(;M<qe.CBANDS;++M)t.mld_cb_l[M]=1;for(M=d=0;M<t.npart_s;M++){v=f*(d+t.numlines_s[M]/2)/+qe.BLKSIZE_s;t.mld_cb_s[M]=k(v),d+=t.numlines_s[M]}for(;M<qe.CBANDS;++M)t.mld_cb_s[M]=1;return 0},this.ATHformula=function(e,t){var n;switch(t.ATHtype){case 0:n=i(e,9);break;case 1:n=i(e,-1);break;case 2:n=i(e,0);break;case 3:n=i(e,1)+6;break;case 4:n=i(e,t.ATHcurve);break;default:n=i(e,0)}return n}}function j(){function g(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=Te(qe.SBMAX_l),this.bo_s_weight=Te(qe.SBMAX_s)}function m(){this.lowerlimit=0}function i(e,t){this.lowpass=t}function b(e){return 1<e?0:e<=0?1:Math.cos(Math.PI/2*e)}function w(e,t){switch(e){case 44100:return t.version=1,0;case 48e3:return t.version=1;case 32e3:return t.version=1,2;case 22050:return t.version=0;case 24e3:return t.version=0,1;case 16e3:return t.version=0,2;case 11025:return t.version=0;case 12e3:return t.version=0,1;case 8e3:return t.version=0,2;default:return t.version=0,-1}}function y(e,t,n){n<16e3&&(t=2);for(var i=G.bitrate_table[t][1],a=2;a<=14;a++)0<G.bitrate_table[t][a]&&Math.abs(G.bitrate_table[t][a]-e)<Math.abs(i-e)&&(i=G.bitrate_table[t][a]);return i}function M(e,t,n){n<16e3&&(t=2);for(var i=0;i<=14;i++)if(0<G.bitrate_table[t][i]&&G.bitrate_table[t][i]==e)return i;return-1}function S(e,t){var n=[new i(0,2e3),new i(0,3700),new i(0,3900),new i(0,5500),new i(0,7e3),new i(0,7500),new i(0,1e4),new i(0,11e3),new i(0,13500),new i(0,15100),new i(0,15600),new i(0,17e3),new i(0,17500),new i(0,18600),new i(0,19400),new i(0,19700),new i(0,20500)],t=R.nearestBitrateFullIndex(t);e.lowerlimit=n[t].lowpass}function x(e){var t=qe.BLKSIZE+e.framesize-qe.FFTOFFSET;return Math.max(t,512+e.framesize-32)}function d(e,t,n,i,a,r,o){var s,l,u,c,f=e.internal_flags,d=0,h=[null,null],p=[null,null];if(f.Class_ID!=z)return-3;if(0==i)return 0;if((c=B.copy_buffer(f,a,r,o,0))<0)return c;if(r+=c,d+=c,p[0]=t,p[1]=n,F.NEQ(e.scale,0)&&F.NEQ(e.scale,1))for(s=0;s<i;++s)p[0][s]*=e.scale,2==f.channels_out&&(p[1][s]*=e.scale);if(F.NEQ(e.scale_left,0)&&F.NEQ(e.scale_left,1))for(s=0;s<i;++s)p[0][s]*=e.scale_left;if(F.NEQ(e.scale_right,0)&&F.NEQ(e.scale_right,1))for(s=0;s<i;++s)p[1][s]*=e.scale_right;if(2==e.num_channels&&1==f.channels_out)for(s=0;s<i;++s)p[0][s]=.5*(p[0][s]+p[1][s]),p[1][s]=0;u=x(e),h[0]=f.mfbuf[0],h[1]=f.mfbuf[1];for(var _=0;0<i;){var v,g=[null,null],m=0;g[0]=p[0],g[1]=p[1];var b=new k;if(function(e,t,n,i,a,r){var o=e.internal_flags;if(o.resample_ratio<.9999||1.0001<o.resample_ratio)for(var s=0;s<o.channels_out;s++){var l=new A;r.n_out=function(e,t,n,i,a,r,o,s,l){var u,c,f=e.internal_flags,d=0,h=e.out_samplerate/function e(t,n){return 0!=n?e(n,t%n):t}(e.out_samplerate,e.in_samplerate);W.BPC<h&&(h=W.BPC);var e=Math.abs(f.resample_ratio-Math.floor(.5+f.resample_ratio))<1e-4?1:0,p=1/f.resample_ratio;1<p&&(p=1);var _=31;0==_%2&&--_;var v=(_+=e)+1;if(0==f.fill_buffer_resample_init){for(f.inbuf_old[0]=Te(v),f.inbuf_old[1]=Te(v),u=0;u<=2*h;++u)f.blackfilt[u]=Te(v);for(f.itime[0]=0,f.itime[1]=0,d=0;d<=2*h;d++){var g=0,m=(d-h)/(2*h);for(u=0;u<=_;u++)g+=f.blackfilt[d][u]=function(e,t,n){var i=Math.PI*t;(e/=n)<0&&(e=0),1<e&&(e=1);t=e-.5,e=.42-.5*Math.cos(2*e*Math.PI)+.08*Math.cos(4*e*Math.PI);return Math.abs(t)<1e-9?i/Math.PI:e*Math.sin(n*i*t)/(Math.PI*n*t)}(u-m,p,_);for(u=0;u<=_;u++)f.blackfilt[d][u]/=g}f.fill_buffer_resample_init=1}var b,w,y=f.inbuf_old[l];for(c=0;c<i&&(b=c*f.resample_ratio,d=0|Math.floor(b-f.itime[l]),!(o<=_+d-_/2));c++){m=b-f.itime[l]-(d+_%2*.5);w=0|Math.floor(2*m*h+h+.5);var M=0;for(u=0;u<=_;++u){var S=0|u+d-_/2;S=S<0?y[v+S]:a[r+S],M+=S*f.blackfilt[w][u]}t[n+c]=M}if(s.num_used=Math.min(o,_+d-_/2),f.itime[l]+=s.num_used-c*f.resample_ratio,s.num_used>=v)for(u=0;u<v;u++)y[u]=a[r+s.num_used+u-v];else{var x=v-s.num_used;for(u=0;u<x;++u)y[u]=y[u+s.num_used];for(d=0;u<v;++u,++d)y[u]=a[r+d]}return c}(e,t[s],o.mf_size,e.framesize,n[s],i,a,l,s),r.n_in=l.num_used}else{r.n_out=Math.min(e.framesize,a),r.n_in=r.n_out;for(var u=0;u<r.n_out;++u)t[0][o.mf_size+u]=n[0][i+u],2==o.channels_out&&(t[1][o.mf_size+u]=n[1][i+u])}}(e,h,g,_,i,b),v=b.n_in,m=b.n_out,f.findReplayGain&&!f.decode_on_the_fly&&E.AnalyzeSamples(f.rgdata,h[0],f.mf_size,h[1],f.mf_size,m,f.channels_out)==H.GAIN_ANALYSIS_ERROR)return-6;if(i-=v,_+=v,f.channels_out,f.mf_size+=m,f.mf_samples_to_encode<1&&(f.mf_samples_to_encode=qe.ENCDELAY+qe.POSTDELAY),f.mf_samples_to_encode+=m,f.mf_size>=u){var m=0==o?0:o-d;if((m=function(e,t,n,i,a,r){r=R.enc.lame_encode_mp3_frame(e,t,n,i,a,r);return e.frameNum++,r}(e,h[0],h[1],a,r,m))<0)return m;for(r+=m,d+=m,f.mf_size-=e.framesize,f.mf_samples_to_encode-=e.framesize,l=0;l<f.channels_out;l++)for(s=0;s<f.mf_size;s++)h[l][s]=h[l][s+e.framesize]}}return d}function k(){this.n_in=0,this.n_out=0}function A(){this.num_used=0}var R=this;j.V9=410,j.V8=420,j.V7=430,j.V6=440,j.V5=450,j.V4=460,j.V3=470,j.V2=480,j.V1=490,j.V0=500,j.R3MIX=1e3,j.STANDARD=1001,j.EXTREME=1002,j.INSANE=1003,j.STANDARD_FAST=1004,j.EXTREME_FAST=1005,j.MEDIUM=1006,j.MEDIUM_FAST=1007;j.LAME_MAXMP3BUFFER=147456;var E,B,P,T,C,I,O,V,q=new X;this.enc=new qe,this.setModules=function(e,t,n,i,a,r,o,s,l){E=e,B=t,P=n,T=i,C=a,I=r,O=s,V=l,this.enc.setModules(B,q,T,I)};var z=4294479419;this.lame_init=function(){var e,t,n=new a;(e=n).class_id=z,t=e.internal_flags=new W,e.mode=Ve.NOT_SET,e.original=1,e.in_samplerate=44100,e.num_channels=2,e.num_samples=-1,e.bWriteVbrTag=!0,e.quality=-1,e.short_blocks=null,t.subblock_gain=-1,e.lowpassfreq=0,e.highpassfreq=0,e.lowpasswidth=-1,e.highpasswidth=-1,e.VBR=Oe.vbr_off,e.VBR_q=4,e.ATHcurve=-1,e.VBR_mean_bitrate_kbps=128,e.VBR_min_bitrate_kbps=0,e.VBR_max_bitrate_kbps=0,e.VBR_hard_min=0,t.VBR_min_bitrate=1,t.VBR_max_bitrate=13,e.quant_comp=-1,e.quant_comp_short=-1,e.msfix=-1,t.resample_ratio=1,t.OldValue[0]=180,t.OldValue[1]=180,t.CurrentStep[0]=4,t.CurrentStep[1]=4,t.masking_lower=1,t.nsPsy.attackthre=-1,t.nsPsy.attackthre_s=-1,e.scale=-1,e.athaa_type=-1,e.ATHtype=-1,e.athaa_loudapprox=-1,e.athaa_sensitivity=0,e.useTemporal=null,e.interChRatio=-1,t.mf_samples_to_encode=qe.ENCDELAY+qe.POSTDELAY,e.encoder_padding=0,t.mf_size=qe.ENCDELAY-qe.MDCTDELAY,e.findReplayGain=!1,e.decode_on_the_fly=!1,t.decode_on_the_fly=!1,t.findReplayGain=!1,t.findPeakSample=!1,t.RadioGain=0,t.AudiophileGain=0,t.noclipGainChange=0,t.noclipScale=-1,e.preset=0,e.write_id3tag_automatic=!0;return n.lame_allocated_gfp=1,n},this.nearestBitrateFullIndex=function(e){for(var t=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],n=0,i=0,a=0,r=0,r=t[16],a=16,i=t[16],n=16,o=0;o<16;o++)if(Math.max(e,t[o+1])!=e){r=t[o+1],a=o+1,i=t[o],n=o;break}return e-i<r-e?n:a},this.lame_init_params=function(e){var t,n=e.internal_flags;if(n.Class_ID=0,null==n.ATH&&(n.ATH=new Q),null==n.PSY&&(n.PSY=new g),null==n.rgdata&&(n.rgdata=new L),n.channels_in=e.num_channels,1==n.channels_in&&(e.mode=Ve.MONO),n.channels_out=e.mode==Ve.MONO?1:2,n.mode_ext=qe.MPG_MD_MS_LR,e.mode==Ve.MONO&&(e.force_ms=!1),e.VBR==Oe.vbr_off&&128!=e.VBR_mean_bitrate_kbps&&0==e.brate&&(e.brate=e.VBR_mean_bitrate_kbps),e.VBR==Oe.vbr_off||e.VBR==Oe.vbr_mtrh||e.VBR==Oe.vbr_mt||(e.free_format=!1),e.VBR==Oe.vbr_off&&0==e.brate&&F.EQ(e.compression_ratio,0)&&(e.compression_ratio=11.025),e.VBR==Oe.vbr_off&&0<e.compression_ratio&&(0==e.out_samplerate&&(e.out_samplerate=map2MP3Frequency(int(.97*e.in_samplerate))),e.brate=0|16*e.out_samplerate*n.channels_out/(1e3*e.compression_ratio),n.samplerate_index=w(e.out_samplerate,e),e.free_format||(e.brate=y(e.brate,e.version,e.out_samplerate))),0!=e.out_samplerate&&(e.out_samplerate<16e3?(e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,8),e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,64)):e.out_samplerate<32e3?(e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,8),e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,160)):(e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,32),e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,320))),0==e.lowpassfreq){var i,a=16e3;switch(e.VBR){case Oe.vbr_off:S(i=new m,e.brate),a=i.lowerlimit;break;case Oe.vbr_abr:S(i=new m,e.VBR_mean_bitrate_kbps),a=i.lowerlimit;break;case Oe.vbr_rh:var r=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];a=0<=e.VBR_q&&e.VBR_q<=9?(o=r[e.VBR_q],s=r[e.VBR_q+1],l=e.VBR_q_frac,linear_int(o,s,l)):19500;break;default:var o,s,l,r=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];a=0<=e.VBR_q&&e.VBR_q<=9?(o=r[e.VBR_q],s=r[e.VBR_q+1],l=e.VBR_q_frac,linear_int(o,s,l)):19500}e.mode!=Ve.MONO||e.VBR!=Oe.vbr_off&&e.VBR!=Oe.vbr_abr||(a*=1.5),e.lowpassfreq=0|a}if(0==e.out_samplerate&&(2*e.lowpassfreq>e.in_samplerate&&(e.lowpassfreq=e.in_samplerate/2),e.out_samplerate=(t=0|e.lowpassfreq,h=e.in_samplerate,p=44100,48e3<=h?p=48e3:44100<=h?p=44100:32e3<=h?p=32e3:24e3<=h?p=24e3:22050<=h?p=22050:16e3<=h?p=16e3:12e3<=h?p=12e3:11025<=h?p=11025:8e3<=h&&(p=8e3),-1==t?p:(t<=15960&&(p=44100),t<=15250&&(p=32e3),t<=11220&&(p=24e3),t<=9970&&(p=22050),t<=7230&&(p=16e3),t<=5420&&(p=12e3),t<=4510&&(p=11025),t<=3970&&(p=8e3),h<p?44100<h?48e3:32e3<h?44100:24e3<h?32e3:22050<h?24e3:16e3<h?22050:12e3<h?16e3:11025<h?12e3:8e3<h?11025:8e3:p))),e.lowpassfreq=Math.min(20500,e.lowpassfreq),e.lowpassfreq=Math.min(e.out_samplerate/2,e.lowpassfreq),e.VBR==Oe.vbr_off&&(e.compression_ratio=16*e.out_samplerate*n.channels_out/(1e3*e.brate)),e.VBR==Oe.vbr_abr&&(e.compression_ratio=16*e.out_samplerate*n.channels_out/(1e3*e.VBR_mean_bitrate_kbps)),e.bWriteVbrTag||(e.findReplayGain=!1,e.decode_on_the_fly=!1,n.findPeakSample=!1),n.findReplayGain=e.findReplayGain,n.decode_on_the_fly=e.decode_on_the_fly,n.decode_on_the_fly&&(n.findPeakSample=!0),n.findReplayGain&&E.InitGainAnalysis(n.rgdata,e.out_samplerate)==H.INIT_GAIN_ANALYSIS_ERROR)return e.internal_flags=null,-6;switch(n.decode_on_the_fly&&!e.decode_only&&(null!=n.hip&&V.hip_decode_exit(n.hip),n.hip=V.hip_decode_init()),n.mode_gr=e.out_samplerate<=24e3?1:2,e.framesize=576*n.mode_gr,e.encoder_delay=qe.ENCDELAY,n.resample_ratio=e.in_samplerate/e.out_samplerate,e.VBR){case Oe.vbr_mt:case Oe.vbr_rh:case Oe.vbr_mtrh:e.compression_ratio=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5][e.VBR_q];break;case Oe.vbr_abr:e.compression_ratio=16*e.out_samplerate*n.channels_out/(1e3*e.VBR_mean_bitrate_kbps);break;default:e.compression_ratio=16*e.out_samplerate*n.channels_out/(1e3*e.brate)}if(e.mode==Ve.NOT_SET&&(e.mode=Ve.JOINT_STEREO),0<e.highpassfreq?(n.highpass1=2*e.highpassfreq,0<=e.highpasswidth?n.highpass2=2*(e.highpassfreq+e.highpasswidth):n.highpass2=2*e.highpassfreq,n.highpass1/=e.out_samplerate,n.highpass2/=e.out_samplerate):(n.highpass1=0,n.highpass2=0),0<e.lowpassfreq?(n.lowpass2=2*e.lowpassfreq,0<=e.lowpasswidth?(n.lowpass1=2*(e.lowpassfreq-e.lowpasswidth),n.lowpass1<0&&(n.lowpass1=0)):n.lowpass1=2*e.lowpassfreq,n.lowpass1/=e.out_samplerate,n.lowpass2/=e.out_samplerate):(n.lowpass1=0,n.lowpass2=0),function(e){var t=e.internal_flags,n=32,i=-1;if(0<t.lowpass1){for(var a=999,r=0;r<=31;r++)(s=r/31)>=t.lowpass2&&(n=Math.min(n,r)),t.lowpass1<s&&s<t.lowpass2&&(a=Math.min(a,r));t.lowpass1=999==a?(n-.75)/31:(a-.75)/31,t.lowpass2=n/31}if(0<t.highpass2&&t.highpass2<.75/31*.9&&(t.highpass1=0,t.highpass2=0,$.err.println("Warning: highpass filter disabled.  highpass frequency too small\n")),0<t.highpass2){for(var o=-1,r=0;r<=31;r++)(s=r/31)<=t.highpass1&&(i=Math.max(i,r)),t.highpass1<s&&s<t.highpass2&&(o=Math.max(o,r));t.highpass1=i/31,t.highpass2=-1==o?(i+.75)/31:(o+.75)/31}for(r=0;r<32;r++){var s=r/31,l=t.highpass2>t.highpass1?b((t.highpass2-s)/(t.highpass2-t.highpass1+1e-20)):1,u=t.lowpass2>t.lowpass1?b((s-t.lowpass1)/(t.lowpass2-t.lowpass1+1e-20)):1;t.amp_filter[r]=l*u}}(e),n.samplerate_index=w(e.out_samplerate,e),n.samplerate_index<0)return e.internal_flags=null,-1;if(e.VBR==Oe.vbr_off){if(e.free_format)n.bitrate_index=0;else if(e.brate=y(e.brate,e.version,e.out_samplerate),n.bitrate_index=M(e.brate,e.version,e.out_samplerate),n.bitrate_index<=0)return e.internal_flags=null,-1}else n.bitrate_index=1;e.analysis&&(e.bWriteVbrTag=!1),null!=n.pinfo&&(e.bWriteVbrTag=!1),B.init_bit_stream_w(n);for(var u=n.samplerate_index+3*e.version+6*(e.out_samplerate<16e3?1:0),c=0;c<qe.SBMAX_l+1;c++)n.scalefac_band.l[c]=T.sfBandIndex[u].l[c];for(c=0;c<qe.PSFB21+1;c++){var f=(n.scalefac_band.l[22]-n.scalefac_band.l[21])/qe.PSFB21,d=n.scalefac_band.l[21]+c*f;n.scalefac_band.psfb21[c]=d}n.scalefac_band.psfb21[qe.PSFB21]=576;for(c=0;c<qe.SBMAX_s+1;c++)n.scalefac_band.s[c]=T.sfBandIndex[u].s[c];for(var h,p,_,v,c=0;c<qe.PSFB12+1;c++){f=(n.scalefac_band.s[13]-n.scalefac_band.s[12])/qe.PSFB12,d=n.scalefac_band.s[12]+c*f;n.scalefac_band.psfb12[c]=d}for(n.scalefac_band.psfb12[qe.PSFB12]=192,1==e.version?n.sideinfo_len=1==n.channels_out?21:36:n.sideinfo_len=1==n.channels_out?13:21,e.error_protection&&(n.sideinfo_len+=2),p=(h=e).internal_flags,h.frameNum=0,h.write_id3tag_automatic&&O.id3tag_write_v2(h),p.bitrate_stereoMode_Hist=D([16,5]),p.bitrate_blockType_Hist=D([16,6]),p.PeakSample=0,h.bWriteVbrTag&&I.InitVbrTag(h),n.Class_ID=z,_=0;_<19;_++)n.nsPsy.pefirbuf[_]=700*n.mode_gr*n.channels_out;switch(-1==e.ATHtype&&(e.ATHtype=4),e.VBR){case Oe.vbr_mt:e.VBR=Oe.vbr_mtrh;case Oe.vbr_mtrh:null==e.useTemporal&&(e.useTemporal=!1),P.apply_preset(e,500-10*e.VBR_q,0),e.quality<0&&(e.quality=LAME_DEFAULT_QUALITY),e.quality<5&&(e.quality=0),5<e.quality&&(e.quality=5),n.PSY.mask_adjust=e.maskingadjust,n.PSY.mask_adjust_short=e.maskingadjust_short,e.experimentalY?n.sfb21_extra=!1:n.sfb21_extra=44e3<e.out_samplerate,n.iteration_loop=new VBRNewIterationLoop(C);break;case Oe.vbr_rh:P.apply_preset(e,500-10*e.VBR_q,0),n.PSY.mask_adjust=e.maskingadjust,n.PSY.mask_adjust_short=e.maskingadjust_short,e.experimentalY?n.sfb21_extra=!1:n.sfb21_extra=44e3<e.out_samplerate,6<e.quality&&(e.quality=6),e.quality<0&&(e.quality=LAME_DEFAULT_QUALITY),n.iteration_loop=new VBROldIterationLoop(C);break;default:n.sfb21_extra=!1,e.quality<0&&(e.quality=LAME_DEFAULT_QUALITY),(v=e.VBR)==Oe.vbr_off&&(e.VBR_mean_bitrate_kbps=e.brate),P.apply_preset(e,e.VBR_mean_bitrate_kbps,0),e.VBR=v,n.PSY.mask_adjust=e.maskingadjust,n.PSY.mask_adjust_short=e.maskingadjust_short,n.iteration_loop=new(v==Oe.vbr_off?N:ABRIterationLoop)(C)}if(e.VBR!=Oe.vbr_off){if(n.VBR_min_bitrate=1,n.VBR_max_bitrate=14,e.out_samplerate<16e3&&(n.VBR_max_bitrate=8),0!=e.VBR_min_bitrate_kbps&&(e.VBR_min_bitrate_kbps=y(e.VBR_min_bitrate_kbps,e.version,e.out_samplerate),n.VBR_min_bitrate=M(e.VBR_min_bitrate_kbps,e.version,e.out_samplerate),n.VBR_min_bitrate<0))return-1;if(0!=e.VBR_max_bitrate_kbps&&(e.VBR_max_bitrate_kbps=y(e.VBR_max_bitrate_kbps,e.version,e.out_samplerate),n.VBR_max_bitrate=M(e.VBR_max_bitrate_kbps,e.version,e.out_samplerate),n.VBR_max_bitrate<0))return-1;e.VBR_min_bitrate_kbps=G.bitrate_table[e.version][n.VBR_min_bitrate],e.VBR_max_bitrate_kbps=G.bitrate_table[e.version][n.VBR_max_bitrate],e.VBR_mean_bitrate_kbps=Math.min(G.bitrate_table[e.version][n.VBR_max_bitrate],e.VBR_mean_bitrate_kbps),e.VBR_mean_bitrate_kbps=Math.max(G.bitrate_table[e.version][n.VBR_min_bitrate],e.VBR_mean_bitrate_kbps)}return e.tune&&(n.PSY.mask_adjust+=e.tune_value_a,n.PSY.mask_adjust_short+=e.tune_value_a),function(e){var t=e.internal_flags;switch(e.quality){default:case 9:t.psymodel=0,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 8:e.quality=7;case 7:t.psymodel=1,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 6:case 5:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=0,t.full_outer_loop=0;break;case 4:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 3:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=1,-(t.noise_shaping_stop=1)==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 2:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),0==t.substep_shaping&&(t.substep_shaping=2),t.noise_shaping_amp=1,-(t.noise_shaping_stop=1)==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 1:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),0==t.substep_shaping&&(t.substep_shaping=2),t.noise_shaping_amp=2,-(t.noise_shaping_stop=1)==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 0:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),0==t.substep_shaping&&(t.substep_shaping=2),t.noise_shaping_amp=2,-(t.noise_shaping_stop=1)==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0}}(e),e.athaa_type<0?n.ATH.useAdjust=3:n.ATH.useAdjust=e.athaa_type,n.ATH.aaSensitivityP=Math.pow(10,e.athaa_sensitivity/-10),null==e.short_blocks&&(e.short_blocks=Ie.short_block_allowed),e.short_blocks!=Ie.short_block_allowed||e.mode!=Ve.JOINT_STEREO&&e.mode!=Ve.STEREO||(e.short_blocks=Ie.short_block_coupled),e.quant_comp<0&&(e.quant_comp=1),e.quant_comp_short<0&&(e.quant_comp_short=0),e.msfix<0&&(e.msfix=0),e.exp_nspsytune=1|e.exp_nspsytune,e.internal_flags.nsPsy.attackthre<0&&(e.internal_flags.nsPsy.attackthre=X.NSATTACKTHRE),e.internal_flags.nsPsy.attackthre_s<0&&(e.internal_flags.nsPsy.attackthre_s=X.NSATTACKTHRE_S),e.scale<0&&(e.scale=1),e.ATHtype<0&&(e.ATHtype=4),e.ATHcurve<0&&(e.ATHcurve=4),e.athaa_loudapprox<0&&(e.athaa_loudapprox=2),e.interChRatio<0&&(e.interChRatio=0),null==e.useTemporal&&(e.useTemporal=!0),n.slot_lag=n.frac_SpF=0,e.VBR==Oe.vbr_off&&(n.slot_lag=n.frac_SpF=72e3*(e.version+1)*e.brate%e.out_samplerate|0),T.iteration_init(e),q.psymodel_init(e),0},this.lame_encode_flush=function(e,t,n,i){var a,r,o,s,l=e.internal_flags,u=_([2,1152]),c=0,f=l.mf_samples_to_encode-qe.POSTDELAY,d=x(e);if(l.mf_samples_to_encode<1)return 0;for(a=0,e.in_samplerate!=e.out_samplerate&&(f+=16*e.out_samplerate/e.in_samplerate),(o=e.framesize-f%e.framesize)<576&&(o+=e.framesize),s=(f+(e.encoder_padding=o))/e.framesize;0<s&&0<=c;){var h=d-l.mf_size,p=e.frameNum;h*=e.in_samplerate,1152<(h/=e.out_samplerate)&&(h=1152),h<1&&(h=1),r=0==i?0:i-a,n+=c=this.lame_encode_buffer(e,u[0],u[1],h,t,n,r),a+=c,s-=p!=e.frameNum?1:0}if(c<(l.mf_samples_to_encode=0))return c;if(r=0==i?0:i-a,B.flush_bitstream(e),(c=B.copy_buffer(l,t,n,r,1))<0)return c;if(n+=c,a+=c,r=0==i?0:i-a,e.write_id3tag_automatic){if(O.id3tag_write_v1(e),(c=B.copy_buffer(l,t,n,r,0))<0)return c;a+=c}return a},this.lame_encode_buffer=function(e,t,n,i,a,r,o){var s,l,u=e.internal_flags,c=[null,null];if(u.Class_ID!=z)return-3;if(0==i)return 0;l=i,(null==(s=u).in_buffer_0||s.in_buffer_nsamples<l)&&(s.in_buffer_0=Te(l),s.in_buffer_1=Te(l),s.in_buffer_nsamples=l),c[0]=u.in_buffer_0,c[1]=u.in_buffer_1;for(var f=0;f<i;f++)c[0][f]=t[f],1<u.channels_in&&(c[1][f]=n[f]);return d(e,c[0],c[1],i,a,r,o)}}function I(){this.setModules=function(e,t){0}}function q(){this.setModules=function(e,t,n){0}}function z(){}function Y(){this.setModules=function(e,t){0}}function c(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}var ze={fill:function(e,t,n,i){if(2==arguments.length)for(var a=0;a<e.length;a++)e[a]=t;else for(a=t;a<n;a++)e[a]=i}},$={arraycopy:function(e,t,n,i,a){for(var r=t+a;t<r;)n[i++]=e[t++]}},De={SQRT2:1.4142135623730951,FAST_LOG10:function(e){return Math.log10(e)},FAST_LOG10_X:function(e,t){return Math.log10(e)*t}};Ie.short_block_allowed=new Ie(0),Ie.short_block_coupled=new Ie(1),Ie.short_block_dispensed=new Ie(2),Ie.short_block_forced=new Ie(3);var U={MAX_VALUE:34028235e31};Oe.vbr_off=new Oe(0),Oe.vbr_mt=new Oe(1),Oe.vbr_rh=new Oe(2),Oe.vbr_abr=new Oe(3),Oe.vbr_mtrh=new Oe(4),Oe.vbr_default=Oe.vbr_mtrh,Ve.STEREO=new Ve(0),Ve.JOINT_STEREO=new Ve(1),Ve.DUAL_CHANNEL=new Ve(2),Ve.MONO=new Ve(3),Ve.NOT_SET=new Ve(4),H.STEPS_per_dB=100,H.MAX_dB=120,H.GAIN_NOT_ENOUGH_SAMPLES=-24601,H.GAIN_ANALYSIS_ERROR=0,H.GAIN_ANALYSIS_OK=1,H.INIT_GAIN_ANALYSIS_ERROR=0,H.INIT_GAIN_ANALYSIS_OK=1,H.MAX_ORDER=H.YULE_ORDER=10,H.MAX_SAMPLES_PER_WINDOW=(H.MAX_SAMP_FREQ=48e3)*(H.RMS_WINDOW_TIME_NUMERATOR=1)/(H.RMS_WINDOW_TIME_DENOMINATOR=20)+1,F.EQ=function(e,t){return Math.abs(e)>Math.abs(t)?Math.abs(e-t)<=1e-6*Math.abs(e):Math.abs(e-t)<=1e-6*Math.abs(t)},F.NEQ=function(e,t){return!F.EQ(e,t)},A.NUMTOCENTRIES=100,A.MAXFRAMESIZE=2880;var G={t1HB:[1,1,1,0],t2HB:[1,2,1,3,1,1,3,2,0],t3HB:[3,2,1,1,1,1,3,2,0],t5HB:[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],t6HB:[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],t7HB:[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],t8HB:[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],t9HB:[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],t10HB:[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],t11HB:[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],t12HB:[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],t13HB:[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],t15HB:[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],t16HB:[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],t24HB:[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],t32HB:[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],t33HB:[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],t1l:[1,4,3,5],t2l:[1,4,7,4,5,7,6,7,8],t3l:[2,3,7,4,4,7,6,7,8],t5l:[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],t6l:[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],t7l:[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],t8l:[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],t9l:[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],t10l:[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],t11l:[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],t12l:[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],t13l:[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],t15l:[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],t16_5l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],t16l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],t24l:[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],t32l:[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],t33l:[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8]};G.ht=[new e(0,0,null,null),new e(2,0,G.t1HB,G.t1l),new e(3,0,G.t2HB,G.t2l),new e(3,0,G.t3HB,G.t3l),new e(0,0,null,null),new e(4,0,G.t5HB,G.t5l),new e(4,0,G.t6HB,G.t6l),new e(6,0,G.t7HB,G.t7l),new e(6,0,G.t8HB,G.t8l),new e(6,0,G.t9HB,G.t9l),new e(8,0,G.t10HB,G.t10l),new e(8,0,G.t11HB,G.t11l),new e(8,0,G.t12HB,G.t12l),new e(16,0,G.t13HB,G.t13l),new e(0,0,null,G.t16_5l),new e(16,0,G.t15HB,G.t15l),new e(1,1,G.t16HB,G.t16l),new e(2,3,G.t16HB,G.t16l),new e(3,7,G.t16HB,G.t16l),new e(4,15,G.t16HB,G.t16l),new e(6,63,G.t16HB,G.t16l),new e(8,255,G.t16HB,G.t16l),new e(10,1023,G.t16HB,G.t16l),new e(13,8191,G.t16HB,G.t16l),new e(4,15,G.t24HB,G.t24l),new e(5,31,G.t24HB,G.t24l),new e(6,63,G.t24HB,G.t24l),new e(7,127,G.t24HB,G.t24l),new e(8,255,G.t24HB,G.t24l),new e(9,511,G.t24HB,G.t24l),new e(11,2047,G.t24HB,G.t24l),new e(13,8191,G.t24HB,G.t24l),new e(0,0,G.t32HB,G.t32l),new e(0,0,G.t33HB,G.t33l)],G.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],G.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],G.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],G.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],G.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],G.scfsi_band=[0,6,11,16,21],P.Q_MAX=257,P.Q_MAX2=116,P.LARGE_BITS=1e5,P.IXMAX_VAL=8206;var K={};K.SFBMAX=3*qe.SBMAX_s,qe.ENCDELAY=576,qe.POSTDELAY=1152,qe.FFTOFFSET=224+(qe.MDCTDELAY=48),qe.DECDELAY=528,qe.SBLIMIT=32,qe.CBANDS=64,qe.SBPSY_l=21,qe.SBPSY_s=12,qe.SBMAX_l=22,qe.SBMAX_s=13,qe.PSFB21=6,qe.PSFB12=6,qe.HBLKSIZE=(qe.BLKSIZE=1024)/2+1,qe.HBLKSIZE_s=(qe.BLKSIZE_s=256)/2+1,qe.NORM_TYPE=0,qe.START_TYPE=1,qe.SHORT_TYPE=2,qe.STOP_TYPE=3,qe.MPG_MD_LR_LR=0,qe.MPG_MD_LR_I=1,qe.MPG_MD_MS_LR=2,qe.MPG_MD_MS_I=3,qe.fircoef=[-.1039435,-.1892065,5*-.0432472,-.155915,3898045e-23,.0467745*5,.50455,.756825,.187098*5],W.MFSIZE=3456+qe.ENCDELAY-qe.MDCTDELAY,W.MAX_HEADER_BUF=256,W.MAX_BITS_PER_CHANNEL=4095,W.MAX_BITS_PER_GRANULE=7680,W.BPC=320,c("RIFF"),c("WAVE"),c("fmt "),c("data"),K.SFBMAX=3*qe.SBMAX_s,window.MediaEngineMp3Encoder=function(n,e,t){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),n=1,e=44100,t=128);var i=new j,a=new I,r=new H,o=new F,s=new M,l=new P,u=new C,c=new A,f=new y,d=new Y,h=new k,p=new x,_=new q,v=new z;i.setModules(r,o,s,l,u,c,f,d,v),o.setModules(r,v,f,c),d.setModules(o,f),s.setModules(i),u.setModules(o,h,l,p),l.setModules(p,h,i.enc.psy),h.setModules(o),p.setModules(l),c.setModules(i,o,f),a.setModules(_,v),_.setModules(f,d,s);var g=i.lame_init();g.num_channels=n,g.in_samplerate=e,g.brate=t,g.mode=Ve.STEREO,g.quality=3,g.bWriteVbrTag=!1,g.disable_reservoir=!0,g.write_id3tag_automatic=!1;var m=(i.lame_init_params(g),1152),b=0|1.25*m+7200,w=S(b);this.encodeBuffer=function(e,t){1==n&&(t=e),e.length>m&&(m=e.length,w=S(b=0|1.25*m+7200));e=i.lame_encode_buffer(g,e,t,e.length,w,0,b);return new Int8Array(w.subarray(0,e))},this.flush=function(){var e=i.lame_encode_flush(g,w,0,b);return new Int8Array(w.subarray(0,e))}}}();